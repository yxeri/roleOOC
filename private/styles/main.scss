/*
 Copyright 2018 Aleksandar Jankovic

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */

$background-color: #11433e;
$second-background-color: #11433e;
$text-color: white;
$second-color: #a5a5a5;
$darker-color: #092522;
$darkest-color: black;
$warning-color: #910000;
$focus-color: #218277;
$new-color: #218277;
$p-margin: .4em;
$border-width: .1em;
$top-row-height: 1.3em;
$map-box-padding: .5em;
$padding: .3em;

html, body, div, span, p, a, img, ul, li, video, textarea, button, input, fieldset {
  margin: 0;
  padding: 0;
  border: 0;
  font: inherit;
  font-size: 100%;
  vertical-align: baseline;
}

button::-moz-focus-inner,
input::-moz-focus-inner {
  padding: 0;
  border: none;
}

html, body {
  height: 100%;
  width: 100%;
  background-color: $background-color;
  color: $text-color;
  font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
  font-size: .9em;
  -webkit-overflow-scrolling: touch;
}


span.clickable {
  cursor: pointer;
  text-decoration: underline;
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
}

h1, h2, h3, h4, h5, h6 {
  margin: 0;
  padding: 0;
}

ul, li {
  list-style: none;
  -webkit-overflow-scrolling: touch;
}

textarea {
  width: 100%;
  border-radius: 0;
}

button {
  background-color: $darker-color;
  color: $text-color;
  box-sizing: border-box;
  border: $border-width solid $text-color;
  padding: $padding;
}

.cover {
  background-color: rgba(0, 0, 0, .6);
  z-index: 9;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

/**********
 * Dialog *
 **********/

.dialog {
  max-height: calc(99% - 4em);
  max-width: 30em;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  background-color: $background-color;
  border: $border-width solid $text-color;
  position: absolute;
  top: 2em;
  left: 0;
  right: 0;
  margin: 0 auto;
  padding: .5em;
  z-index: 10;

  input {
    width: 99%;
    padding: .1em;
    margin-bottom: $p-margin;
  }

  input:last-child {
    margin-bottom: 0;
  }

  #lowerButtons {
    float: right;
    padding-top: $p-margin;

    span {
      margin-right: $p-margin;
    }

    span:last-child {
      margin-right: 0;
    }
  }
}

/**********
 * Inputs *
 **********/

/*
 * A required input field that has been left empty.
 * The class is most commonly added when the input is blurred.
 */
.emptyInput {
  background-color: $warning-color;
}

/*********
 * Views *
 *********/

.docFileView {
  .oneOfTwo {
    width: 0;
  }

  .oneOfTwo:first-child {
    flex-grow: 1;
  }

  .oneOfTwo:last-child {
    flex-grow: 4;
  }
}

.forumView {

}

/*********
 * Lists *
 *********/

/*
 * Generic list.
 */

.list {
  word-wrap: break-word;
}

/*
 * A list of rooms.
 */
.roomList {
}

/*
 * A list of messages.
 */
.msgList {
}

/*
 * A list of files.
 */
.docFileList {
}

.positionList {
  display: inline-block;
  border-bottom: 10px $darker-color solid;
  width: 20%;
}

/*
 * A list item that has focus in a list.
 */
.focusListItem {
  background-color: $focus-color;
  text-decoration: underline;
}

/*
 * A marked list item in a list.
 * A list item will be marked when the object that it's connected to is updated.
 */
.markListItem {
  background-color: yellow;
}

/**
 * A new list item in the list.
 * A list item added to a list will temporarily have the newListItem class.
 * The class is removed after a set amount of time.
 */
.newListItem {
  background-color: $new-color;
}

/*************
 * World Map *
 *************/

$map-box-border-weight: .1em;
$map-box-border: $map-box-border-weight solid $second-color;
$map-box-left: .5em;

.worldMapView {
  padding-top: 2em; // Gmaps fix
  overflow: hidden;
  height: 100%;
  width: 100%;

  a {
    display: none !important;
  }
}

.mapLeftClickBox {
  position: absolute;
  z-index: 3;
  top: $map-box-left;
  left: $map-box-left;
  width: calc(100% - ((#{$map-box-left} * 2) + (#{$map-box-padding} * 2) + (#{$map-box-border-weight} * 2)));
  max-width: 30em;
  max-height: calc(100% - (#{$top-row-height} + #{$map-box-padding}));
  padding: $map-box-padding;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  background-color: $background-color;
  border: $map-box-border;

  p {
    margin-bottom: $p-margin;
  }
}

.mapRightClickBox {
  position: fixed;
  z-index: 3;
  background-color: $background-color;
  border: $map-box-border;
  padding: .2em;
  max-width: 15em;
}

.fallbackMapRightClickBox {
  position: absolute;
  z-index: 3;
  top: $map-box-left;
  left: $map-box-left;
  max-width: 15em;
  padding: .2em;
  background-color: $background-color;
  border: $map-box-border;
}

/**************
 * Forum Feed *
 **************/

$border-color: #dddfe2;
$border: $border-width solid $border-color;
$forum-pieces-background-color: #ffffff;
$border-radius: .3em;
$forum-pieces-bottom-margin: .5em;
$post-padding: .5em;
$forum-padding: .5em;

.feedWrapper {
  margin-left: auto;
  margin-right: auto;

  > div {
    width: 40em;
  }

  > div:first-child {
    width: 15em;
  }

  > div:last-child {
    width: 15em;
  }

  .forum {
    > header {
      border-top: $border;
      border-right: $border;
      border-left: $border;
    }

    img {
      max-width: 100%;
    }

    .timeCreated, .lastUpdated {
      color: #90949c
    }

    .username {
      color: #3f9946;
      font-weight: bold;
    }

    .forumList {
    }

    .contentEnd {
      font-size: .9em;

      span {
        margin-right: .5em;
      }
    }

    .forumContent {
      border-bottom: $border;
      border-right: $border;
      border-left: $border;
      margin-bottom: $forum-pieces-bottom-margin;
    }

    .thread {
      border: $border;
      -webkit-border-radius: $border-radius;
      -moz-border-radius: $border-radius;
      margin-bottom: $forum-pieces-bottom-margin;
      background-color: $forum-pieces-background-color;

      > header {
        padding: 0 $forum-padding;
      }
    }

    .threadContent {
      padding: 0 $forum-padding;
      border-bottom: $border-width solid #e5e5e5;
    }

    .post {
      -webkit-border-radius: $border-radius;
      -moz-border-radius: $border-radius;
      margin: 0 $forum-padding;

      > header {
        -webkit-border-top-left-radius: $border-radius;
        -webkit-border-top-right-radius: $border-radius;
        background-color: $forum-pieces-background-color;
        padding: 0 $post-padding 0 $post-padding;
      }
    }

    .postContent {
      -webkit-border-bottom-left-radius: $border-radius;
      -webkit-border-bottom-right-radius: $border-radius;
      background-color: $forum-pieces-background-color;
      margin-bottom: $forum-pieces-bottom-margin;
      padding: 0 $post-padding 0 $post-padding;
    }

    .postContainer {
      padding-top: $forum-pieces-bottom-margin;
      border-bottom: $border;
      background-color: #f2f3f5;
    }

    .subPost {
      -webkit-border-radius: $border-radius;
      background-color: $forum-pieces-background-color;
      padding: $post-padding $post-padding 0 $post-padding;
      margin: 0 0 $forum-pieces-bottom-margin $forum-padding * 2;
    }

    .subContainer {
    }

    .pictureContainer {
    }
  }

  .msgList {
    list-style: none;
  }
}

/****************
 * View Wrapper *
 ****************/

.viewWrapper {
  display: flex;
  height: 100%;
  width: 100%;
  flex-flow: row wrap;
}

.column {
  overflow: hidden;
  -webkit-overflow-scrolling: touch;
}

.one {
  width: 100%;
}

.oneOfTwo {
  width: 50%;
  box-sizing: border-box;
}

.oneOfThree {
  width: 33%;
  box-sizing: border-box;
}

.withTopRow {
  height: calc(100% - #{$top-row-height});
  order: 2;
}

/*************
 * Chat View *
 *************/

//$column-padding: .4em;
$msgList-msgInfo-border: .1em solid $second-color;
$msgList-li-padding: .5em;
$msgList-msgLine-side-padding: .2em;
$msgList-msgInfo-padding: .1em;
$msgList-textarea-border: .3em solid $darker-color;

.chatView {
  .msgList {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;

    li {
      padding-bottom: $msgList-li-padding;
    }

    .msgInfo {
      border-top: $msgList-msgInfo-border;
      border-bottom: $msgList-msgInfo-border;
      padding: $msgList-msgInfo-padding ($msgList-msgLine-side-padding / 2);
      background-color: $darker-color;
      margin-bottom: $p-margin;

      span {
        padding: 0 .2em;
      }

      span:first-child {
        padding-left: 0;
      }

      span:last-child {
        padding-right: 0;
      }
    }

    .msgLine {
      padding: 0 $msgList-msgLine-side-padding;
      margin-bottom: $p-margin;
    }

    .msgLine:last-child {
      margin-bottom: 0;
    }

    .msgRoomName:before {
      content: '[';
    }

    .msgRoomName:after {
      content: ']';
    }
  }

  .msgList::-webkit-scrollbar {
    display: none;
  }

  .one {
    //padding: $column-padding;
  }

  .oneOfTwo {
    width: 0;
    //padding: $column-padding;
  }

  .oneOfTwo:first-child {
    flex-grow: 1;
  }

  .oneOfTwo:last-child {
    flex-grow: 4;
  }

  .inputArea {
    padding-top: .5em;
    margin-top: auto;

    textarea {
      width: calc(100% - (#{$msgList-msgLine-side-padding} * 2));
      padding: 0 $msgList-msgLine-side-padding;
      border-top: $msgList-textarea-border;
      border-bottom: $msgList-textarea-border;
    }
  }

  .columnChat {
    display: flex;
    flex-direction: column;
  }
}

.userRoomList:before {
  content: '- USERS -\A';
}

.userRoomList {
  li:first-child {
    border-top: $border-width solid $border-color;
    padding-top: $padding;
  }
}

.columnRoomList {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  padding-top: $padding;

  .list {
    box-sizing: border-box;
    border-top: $border-width solid $border-color;
    margin-bottom: $padding;
  }

  .list:first-child {
    border-top: none;
  }

  .list:last-child {
    margin-bottom: 0;
  }
}

.columnRoomList::-webkit-scrollbar {
  display: none;
}

/********
 * Misc *
 ********/

#main {
  height: 100%;
  width: 100%;

  .viewWrapper {
    > .oneOfTwo {
      border-right: $border-width solid;
    }

    > .oneOfTwo:last-child {
      border-right: 0;
    }

    > .oneOfThree {
      border-right: $border-width solid;
    }

    > .oneOfThree:last-child {
      border-right: $border-width solid;
    }
  }
}

.topView {
  order: 1;
  width: 100%;
  box-sizing: border-box;
  border-bottom: $border-width solid $text-color;
  background-color: $darkest-color;
  display: flex;
  z-index: 8;

  > span {
    margin-right: .5em;
  }

  > span:last-child {
    margin-right: 0;
  }

  > div {
    margin-right: .5em;
  }

  .clickable {
    text-decoration: none;
  }

  .topMenuButton {
    font-weight: bold;
    background-color: $text-color;
    color: $darker-color;
    padding-left: .1em;
    padding-right: .1em;
  }

  .topMenuButton:before {
    content: '> ';
  }

  .topMenuButton:after {
    content: ' <';
  }

  .topMenu {
    position: absolute;
    background-color: $second-background-color;
    max-width: 12em;
    z-index: 9;

    button {
      width: 100%;
    }

    p {
      background-color: $darker-color;
      color: $text-color;
      box-sizing: border-box;
      border: $border-width solid $text-color;
      width: 100%;
      padding: .3em 0;
      text-align: center;

      span {
        padding: 0 .3em;
      }
    }
  }
}

.hide {
  display: none;
}

.hideOverflow {
  overflow: hidden;
}

@media (orientation: portrait) {
  #main {
    > .viewWrapper {
      > .oneOfTwo:last-child {
        display: none;
      }

      > .oneOfTwo {
        border-right: 0;
      }

      > .oneOfThree {
        border-right: 0;
      }
    }
  }

  .viewWrapper {
    width: 100%;
  }

  .oneOfTwo {
    width: 100%;
  }

  .mapLeftClickBox {
    left: 0;
    width: calc(100% - ((#{$map-box-padding} * 2) + (#{$map-box-border-weight} * 2)));
  }
}
