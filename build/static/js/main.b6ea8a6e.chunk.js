(this.webpackJsonproleterminal=this.webpackJsonproleterminal||[]).push([[0],Array(29).concat([function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWAQMAAAAGz+OhAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+LUNEtwAAAARnQU1BAACxjwv8YQUAAAABc1JHQgCuzhzpAAAABlBMVEUAAAAA/+8G9rtUAAAAAXRSTlMAQObYZgAAAfNJREFUSMfl1jtOxDAQBuBYLlz6CDmKb4ZDxbWMKLhGEAVtJAoiEcX4PTP2LKSj2K12P+1m/9gzE0/T/b1mD6+1GCJ/ZJLYfDZNzA2Xqxc0xLZkltg+/G35Y0HtvGU0Xg7ImepsSXbAcohqG1ojk0y39ck36pI5ZPqiqWLL/5ldBpPtnsF0WxuwOS85MVNrApn19c/BWp2ACSi8X0222vnb9s4Ua9+MvTG2MuYu/vbzZpaHMbMIK9TfmwyfewuR6Fpt8d02rN8cLtqvvQk7SvbIxWY86V4uqRnJnvvceEtXGzGRwzW05yZbUa3Fd3FWbF1NxlmxdxZnxdFZnBVnZ6l7qYV4H94/EQvxXrx/JRbiPcavYgvxwiW/iMU6t6Vgq8XVM53ZcM9zZ3FLNDXh064Rk/GTpKbi8gtqOrUXtdyGlphJ7WqI2VRtM7HcNRqbyB2nsMn8QWJTvn4dTJfux1anhEVmyjQxyGxpkBlZbWoNJupAQHsu6zBBpnzb5WY1HrY2xJDVeGRODv0L8ZCJcV5BPGSKmYmamZ38jD2YGbtP44wd5jjEI7PETeNsGp4LEA8M4oFBPDCI18xBvLa/zxCv2TvEK7WhQn/C48zUaoR4kwfrnvFXzwdXzxvcWYU903BnH+6MxJ2luDMXdzZjz3D39PoBF4cEYKUUl6gAAAAASUVORK5CYII="},,function(e,t,n){e.exports=n(71)},,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),c=n(1),i=n(3),l=function(e){return e>9?"".concat(e):"0".concat(e)},s=function(e){return e.config.get("requireOffName")},u=function(e){return e.config.get("publicRoomId")},d=function(e){return e.config.get("allowedImages")},m=function(e){return e.config.get("gpsTracking")},f=function(e){return e.config.get("permissions")},p=function(e,t){var n=t.date,a=t.offset,r=t.lockDate,o=new Date(n),c={},i=e.config,s=i.yearModification,u=i.dayModification;return a&&o.setHours(o.getHours()+a),r||Number.isNaN(s)||(s&&!Number.isNaN(s)&&o.setFullYear(o.getFullYear()+parseInt(s,10)),u&&!Number.isNaN(u)&&o.setDate(o.getDate()+parseInt(u,10))),c.mins=l(o.getMinutes()),c.hours=l(o.getHours()),c.seconds=l(o.getSeconds()),c.month=l(o.getMonth()+1),c.day=l(o.getDate()),c.year=o.getFullYear(),c.halfTime="".concat(c.hours,":").concat(c.mins),c.fullTime="".concat(c.halfTime,":").concat(c.seconds),c.halfDate="".concat(c.day,"/").concat(c.month),c.fullDate="".concat(c.halfDate,"/").concat(c.year),c.fullStamp="".concat(c.halfTime," ").concat(c.fullDate),c};function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var g=r.a.createElement("circle",{cx:12,cy:12,r:10}),y=r.a.createElement("polyline",{points:"12 6 12 12 16 14"}),b=function(e){var t=e.svgRef,n=e.title,a=v(e,["svgRef","title"]);return r.a.createElement("svg",h({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-clock",ref:t},a),n?r.a.createElement("title",null,n):null,g,y)},w=r.a.forwardRef((function(e,t){return r.a.createElement(b,h({svgRef:t},e))})),E=(n.p,n(8)),O=(n(41),r.a.forwardRef((function(e,t){var n=e.onClick,a=e.children,o=e.disabled,c=e.stopPropagation,i=e.classNames,l=void 0===i?[""]:i,s=e.type,u=void 0===s?"button":s;return r.a.createElement("button",{ref:t,className:"".concat(["Button"].concat(l).join(" ")),disabled:o,type:u,onClick:function(e){n(e),c&&e.stopPropagation()}},a)}))),j=r.a.memo(O);O.propTypes={onClick:E.func.isRequired,children:E.node.isRequired,type:Object(E.oneOf)(["button","submit"]),disabled:E.bool,classNames:Object(E.arrayOf)(E.string),stopPropagation:E.bool},O.defaultProps={type:"button",disabled:void 0,classNames:[],stopPropagation:void 0};var I=n(12),k=n(27),x="aliases",C="devices",N="docFiles",S="forums",A="forumPosts",R="forumThreads",T="gameCodes",P="invitations",L="messages",M="rooms",F="simpleMsgs",W="teams",D="transactions",U="users",B="wallets",H=n(9),z=n(5),q="update",V="create",Y="remove",Z=function(e,t){var n=new Map(Object(z.a)(e)),a=t.type,r=t.payload,o=r.changeType,c=r[a];switch(o){case V:return n.set(c.objectId,c),n;case q:var i=n.get(c.objectId)||{},l=Object(H.a)(Object(H.a)({},i),c);return i===l?e:(n.set(c.objectId,l),n);case Y:return n.has(c.objectId)?(n.delete(c.objectId),n):e;default:return e}},G=function(e,t){var n=t.type,a=t.payload,r=a.reset,o=a.changeType,c=r?new Map:new Map(Object(z.a)(e)),i=a[n];switch(o){case V:return i.forEach((function(e){return c.set(e.objectId,e)})),c;case q:return i.forEach((function(e){var t=c.get(e.objectId)||{},n=Object(H.a)(Object(H.a)({},t),e);t!==n&&c.set(e.objectId,n)})),c;case Y:return i.forEach((function(e){return c.delete(e.objectId)})),c;default:return e}};var J="online",X="offline",Q="reconnecting";var K=0,$=1,_=4,ee=function(e){var t=e.objectToAccess,n=e.toAuth;if(!t||!n)return{canSee:!1,hasFullAccess:!1,hasAccess:!1};var a=t.ownerId,r=t.ownerAliasId,o=t.teamId,c=t.isPublic,i=t.visibility,l=t.teamIds,s=void 0===l?[]:l,u=t.userIds,d=void 0===u?[]:u,m=t.userAdminIds,f=void 0===m?[]:m,p=t.teamAdminIds,h=void 0===p?[]:p,v=n.hasFullAccess,g=n.partOfTeams,y=void 0===g?[]:g,b=n.accessLevel,w=void 0===b?K:b,E=n.objectId,O=n.teamIds,j=void 0===O?[]:O,I=n.aliases,k=void 0===I?[]:I,x=r&&k.includes(r),C=o&&y.includes(o),N=d.concat([a]).includes(E),S=C||s.find((function(e){return j.includes(e)})),A=x||k.find((function(e){return d.includes(e)})),R=f.includes(E),T=x||k.find((function(e){return f.includes(e)})),P=C||h.find((function(e){return j.includes(e)})),L=a===E||v||w>=_;return{canSee:L||c||N||S||A||w>=i,hasAccess:L||c||N||S||A,hasFullAccess:L||R||P||T}},te=new Map;te.set("broadcastId","111111111111111111111116"),te.set("publicRoomId","111111111111111111111110"),te.set("defaultForum","111111111111111111111120"),te.set("defaultLanguage","en"),te.set("centerCoordinates",{longitude:0,latitude:0}),te.set("cornerOneCoordinates",{longitude:0,latitude:0}),te.set("cornerTwoCoordinates",{longitude:0,latitude:0}),te.set("defaultZoomLevel",15),te.set("yearModification",0),te.set("dayModification",0),te.set("requireOffName",!1),te.set("activateTermination",!1),te.set("allowedImages",{CHAT:!1,PROFILE:!1,DOCFILE:!1}),te.set("permissions",{CreateAlias:{name:"CreateAlias",accessLevel:$},CreateUser:{name:"CreateUser",accessLevel:K}}),te.set("anonymousUser",{accessLevel:K,followingRooms:[],objectId:"-1",isAnonymous:!0});var ne="wallet",ae="chat",re="worldMap",oe="docFile",ce="dialogIdentity",ie="dialogCreateRoom",le="dialogRemoveRoom",se="dialogRegister",ue="dialogLogin",de="dialogCreateAlias",me="dialogCreateTransaction",fe="dialogCreateDocFile",pe=new Map;var he=Object(I.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"user"===t.type?Z(e,t):t.type===U?G(e,t):e},aliases:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"alias"===t.type?Z(e,t):t.type===x?G(e,t):e},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"message"===t.type?Z(e,t):t.type===L?G(e,t):e},online:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;if("online"===t.type){var n=t.payload,a=n.online;return a}return e},rooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"room"===t.type?Z(e,t):t.type===M?G(e,t):e},userId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1",t=arguments.length>1?arguments[1]:void 0;if("userId"===t.type){var n=t.payload,a=n.reset,r=n.userId;return a?"-1":r}return e},positions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"position"===t.type?Z(e,t):"positions"===t.type?G(e,t):e},transactions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"transaction"===t.type?Z(e,t):t.type===D?G(e,t):e},wallets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"wallet"===t.type?Z(e,t):t.type===B?G(e,t):e},config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;if("config"===t.type){var n=t.payload,a=n.entries,r=new Map(Object(z.a)(e));return a.forEach((function(e){return r.set(e[0],e[1])})),r}return e},aliasId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;if("aliasId"===t.type){var n=t.payload,a=n.reset,r=n.aliasId;return a?null:r}return e},windowOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;if("windowOrder"===t.type){var n=t.payload,a=n.id,r=n.value,o=n.changeType,c=new Map(Object(z.a)(e));if(o===q){if(c.size>0&&Object(z.a)(c.keys()).indexOf(a)===c.size-1){var i=c.get(a);if(Object.keys(r).length===Object.keys(i).length&&Object.keys(r).every((function(e){return i[e]===r[e]})))return e}return c.delete(a),c.set(a,r),c}return o===Y?(c.delete(a),c):e}if("windowOrders"===t.type){var l=t.payload,s=l.windows,u=new Map(Object(z.a)(e));return s.forEach((function(e){var t=e.id,n=e.value;return u.set(t,n)})),u}return e},teams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"team"===t.type?Z(e,t):t.type===W?G(e,t):e},docFiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"docFile"===t.type?Z(e,t):t.type===N?G(e,t):e}}),ve=Object(I.d)(he,Object(I.a)(k.a)),ge=r.a.memo((function(){var e=Object(a.useState)(new Date),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!1),l=Object(i.a)(c,2),s=l[0],u=l[1],d=p(ve.getState(),{date:n});Object(a.useEffect)((function(){!function e(){setTimeout((function(){o(new Date),e()}),1e3)}()}),[]);var m=Object(a.useCallback)((function(){return u(!s)}),[s]);return r.a.createElement("div",{key:"clock",className:"Clock"},r.a.createElement(j,{onClick:m,classNames:["".concat(s?"hide":"")]},r.a.createElement(w,null)),r.a.createElement(j,{onClick:m,classNames:["".concat(s?"":"hide")]},d.halfTime))})),ye=(n(42),r.a.memo((function(e){var t=e.items;return r.a.createElement(r.a.Fragment,null,t)}))),be=function(e){var t=e.children,n=e.title,o=e.scrollTo,c=e.checkWidth,l=void 0!==c&&c,s=e.dropdown,u=void 0!==s&&s,d=e.classNames,m=void 0===d?[]:d,f=Object(a.useRef)(null),p=Object(a.useRef)(null),h=Object(a.useState)("undefined"!==typeof n),v=Object(i.a)(h,2),g=v[0],y=v[1],b=[],w=["List"].concat(m),E=function(e){u&&f.current&&(!l||!p.current||p.current.offsetWidth<600)&&(e.target!==f.current&&f.current.parentElement.contains(e.target)||y(!0))};return Object(a.useEffect)((function(){o&&f.current&&("bottom"===o.direction&&f.current.lastElementChild?f.current.lastElementChild.scrollIntoView():"top"===o.direction&&f.current.firstElementChild&&f.current.firstElementChild.scrollIntoView())})),Object(a.useEffect)((function(){u&&(g?document.removeEventListener("mousedown",E,!1):document.addEventListener("mousedown",E,!1))}),[g]),g?b.push("hide"):w.push("expanded"),u&&b.push("dropdown"),r.a.createElement("div",{key:"List",className:w.join(" ")},n&&r.a.createElement("header",{role:"button",tabIndex:0,key:"listHeader",className:"toggle clickable",onClick:function(){y(!g)}},n),r.a.createElement("ul",{ref:function(e){f.current=e,e&&(p.current=e.closest(".Window"))},key:"listElem",className:"".concat(b.join(" ")),onClick:function(e){u&&(E(e),e.stopPropagation())}},r.a.createElement(ye,{items:t})))},we=r.a.memo(be);be.defaultProps={classNames:[],children:void 0,title:void 0,dropdown:!1,scrollTo:void 0,checkWidth:!1};var Ee=n(2),Oe=n.n(Ee),je=n(4),Ie="deviceId",ke="token",xe="userId",Ce="aliasId",Ne=function(e,t){"string"===typeof t?localStorage.setItem(e,t):localStorage.setItem(e,function(e){return JSON.stringify(e)}(t))},Se=function(e){return localStorage.getItem(e)},Ae=function(e){return localStorage.removeItem(e)},Re=function(){return Ae(Ce)},Te=function(){Ae(ke),Ae(xe),Re()},Pe=function(){return Se(Ie)},Le=function(){return Se(ke)},Me=function(e){var t=e.userId,n=e.token;return Ne(ke,n),function(e){Ne(xe,e)}(t),{type:"userId",payload:{userId:t}}},Fe=function(){return Te(),function(e){Object(c.b)((function(){e({type:"userId",payload:{reset:!0}}),e({type:"aliasId",payload:{reset:!0}})}))}},We=function(e){return e.online===J},De=function(){return{type:"online",payload:{online:J}}},Ue=function(e){return e.aliasId},Be=function(e){return e.userId},He=function(e){return Ue(e)||Be(e)},ze=function(e){var t=e.messages;return 1===t.length?{type:"message",payload:{changeType:V,message:t[0]}}:{type:L,payload:{messages:t,changeType:V}}},qe="chatMsg",Ve="whisper",Ye=function(e){var t=e.wallets;return 1===t.length?{type:"wallet",payload:{wallet:t[0],changeType:q}}:{type:B,payload:{wallets:t,changeType:q}}},Ze=function(e){var t=e.wallets;return 1===t.length?{type:"wallet",payload:{wallet:t[0],changeType:V}}:{type:B,payload:{wallets:t,changeType:V}}},Ge=function(e){var t=e.forums;return 1===t.length?{type:"forum",payload:{forum:t[0],changeType:V}}:{type:S,payload:{forums:t,changeType:V}}},Je=function(e){var t=e.gameCodes;return 1===t.length?{type:"gameCode",payload:{gameCode:t[0],changeType:V}}:{type:T,payload:{gameCodes:t,changeType:V}}},Xe=function(e){var t=e.users;return 1===t.length?{type:"user",payload:{user:t[0],changeType:q}}:{type:U,payload:{users:t,changeType:q}}},Qe=function(e){var t=e.users;return 1===t.length?{type:"user",payload:{user:t[0],changeType:V}}:{type:U,payload:{users:t,changeType:V}}},Ke=function(e){var t=e.user,n=e.wallet,a=e.room,r=e.forum,o=e.gameCode;return function(){var e=Object(je.a)(Oe.a.mark((function e(i){return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){i(Qe({users:[t]})),i($e({rooms:[a]})),i(Ze({wallets:[n]})),i(Ge({forums:[r]})),i(Je({gameCodes:[o]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},$e=function(e){var t=e.rooms;return 1===t.length?{type:"room",payload:{changeType:V,room:t[0]}}:{type:M,payload:{rooms:t,changeType:V}}},_e=function(e){var t=e.rooms;return 1===t.length?{type:"room",payload:{changeType:q,room:t[0]}}:{type:M,payload:{rooms:t,changeType:V}}},et=function(e){var t=e.rooms;return 1===t.length?{type:"room",payload:{changeType:Y,room:t[0]}}:{type:M,payload:{rooms:t,changeType:Y}}},tt=function(e){var t=e.room,n=e.user;return function(e){Object(c.b)((function(){e(_e({rooms:[t]})),e(Xe({users:[n]}))}))}},nt="room",at="followRoom",rt="user",ot=function(e){var t=e.aliasId;return t?(Ne(Ce,t),{type:"aliasId",payload:{aliasId:t}}):(Re(),{type:"aliasId",payload:{reset:!0}})},ct=function(e){var t=e.aliases;return 1===t.length?{type:"alias",payload:{alias:t[0],changeType:V}}:{type:x,payload:{aliases:t,changeType:V}}},it=function(e){var t=e.alias,n=e.wallet,a=e.room;return function(){var e=Object(je.a)(Oe.a.mark((function e(r){return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){r(ct({aliases:[t]})),r($e({rooms:[a]})),r(Ze({wallets:[n]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},lt="alias",st="wallet",ut=function(e){var t=e.transaction,n=e.wallet;return function(e){Object(c.b)((function(){e(function(e){var t=e.transactions;return 1===t.length?{type:"transaction",payload:{transaction:t[0],changeType:V}}:{type:D,payload:{transactions:t,changeType:V}}}({transactions:[t]})),e(Ye({wallets:[n]}))}))}},dt="transaction",mt=function(e){var t=e.docFiles;return 1===t.length?{type:"docFile",payload:{docFile:t[0],changeType:V}}:{type:N,payload:{docFiles:t,changeType:V}}},ft="docFile",pt=function(){var e="undefined"!==typeof ioUri?ioUri:"/";return window.io(e,{forceNew:!0})}(),ht="createAlias",vt="createUser",gt="sendMessage",yt="createRoom",bt="createDocFile",wt="createTransaction",Et="followRoom",Ot="getMessagesByRoom",jt="removeRoom",It={ALIASES:"getAliases",USERS:"getUsers",MESSAGES:"getMessages",ROOMS:"getRooms",INVITATIONS:"getInvitations",DOCFILES:"getDocFiles",FORUMS:"getForums",FORUMPOSTS:"getForumPosts",FORUMTHREADS:"getForumThreads",GAMECODES:"getGameCodes",SIMPLEMSGS:"getSimpleMsgs",TEAMS:"getTeams",TRANSACTIONS:"getTransactions",WALLETS:"getWallets",DEVICES:"getDevices"},kt="login",xt="reconnect",Ct="startup",Nt="disconnect",St=function(){var e=Object(je.a)(Oe.a.mark((function e(t){var n,a;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.event,a=t.callback,pt.on(n,(function(e){console.log(n,e),a(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),At=function(){ve.getState().online!==Q&&(pt.disconnect(),pt.connect())},Rt=function(){var e=Object(je.a)(Oe.a.mark((function e(t){var n,a=arguments;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",new Promise((function(e,a){var r=n;r.token=Le(),We(ve.getState())||At(),pt.emit(t,r,(function(t){var n=t.error,r=t.data;n?a(n):e(r)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();St({event:xt,callback:function(){Be(ve.getState)&&Rt("updateId",{}).then((function(){ve.dispatch(De())})).catch((function(e){console.log(e),ve.dispatch(Fe())}))}}),St({event:Ct,callback:function(e){var t,n=e.data,a=Se(xe),r=Le(),o=Se(Ce);a&&r&&ve.dispatch(Me({userId:a,token:r})),o&&ve.dispatch(ot({aliasId:o})),Pe()||Ne(Ie,"1234567890123456"),ve.dispatch((t=n,function(e){Object(c.b)((function(){e({type:"config",payload:{entries:Object.entries(t)}}),e(De())}))})),(a||r)&&Rt("updateId",{}).then((function(){ve.dispatch(De())})).catch((function(e){console.log(e),ve.dispatch(Fe())}))}}),St({event:Nt,callback:function(){ve.dispatch({type:"online",payload:{online:X}}),At()}}),St({event:qe,callback:function(e){var t=e.data,n=e.error;if(t&&t.message){var a=t.message;t.changeType===V&&ve.dispatch(ze({messages:[a]}))}else console.log(qe,n,t)}}),St({event:Ve,callback:function(e){var t=e.data,n=e.error;if(t&&t.message){var a=t.message;t.changeType===V&&ve.dispatch(ze({messages:[a]}))}else console.log(Ve,n,t)}}),St({event:nt,callback:function(e){var t=e.error,n=e.data;if(n&&n.room){var a=n.room,r=n.changeType;r===V?ve.dispatch($e({rooms:[a]})):r===q?ve.dispatch(_e({rooms:[a]})):r===Y&&ve.dispatch(et({rooms:[a]}))}else console.log(nt,t,n)}}),St({event:at,callback:function(e){var t=e.error,n=e.data;n&&n.room&&n.user?ve.dispatch(function(){var e=Object(je.a)(Oe.a.mark((function e(t){return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){t(_e({rooms:[n.room]})),t(Xe({users:[n.user]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):console.log(at,t,n)}}),St({event:rt,callback:function(e){var t=e.error,n=e.data;if(n&&n.user){var a=n.user,r=n.changeType;r===V?ve.dispatch(Qe({users:[a]})):r===q&&ve.dispatch(Xe({users:[a]}))}else console.log(rt,t,n)}}),St({event:lt,callback:function(e){var t=e.error,n=e.data;if(n&&n.alias){var a=n.alias,r=n.changeType;r===V?ve.dispatch(ct({aliases:[a]})):r===q&&ve.dispatch(function(e){var t=e.aliases;return 1===t.length?{type:"alias",payload:{alias:t[0],changeType:q}}:{type:x,payload:{aliases:t,changeType:q}}}({aliases:[a]}))}else console.log(lt,t,n)}}),St({event:st,callback:function(e){var t=e.error,n=e.data;if(n&&n.wallet){var a=n.wallet,r=n.changeType;r===V?ve.dispatch(Ze({wallets:[a]})):r===q&&ve.dispatch(Ye({wallets:[a]}))}else console.log(st,t,n)}}),St({event:dt,callback:function(e){var t=e.error,n=e.data;if(n&&n.transaction&&(n.changeType===q||n.wallet)){var a=n.transaction,r=n.changeType;r===V?ve.dispatch(ut(n)):r===q&&ve.dispatch(function(e){var t=e.transactions;return 1===t.length?{type:"transaction",payload:{transaction:t[0],changeType:q}}:{type:D,payload:{transactions:t,changeType:q}}}({transactions:[a]}))}else console.log(dt,t,n)}}),St({event:ft,callback:function(e){var t=e.error,n=e.data;if(n&&n.docFile){var a=n.docFile,r=n.changeType;r===V?ve.dispatch(mt({docFiles:[a]})):r===q&&ve.dispatch(function(e){var t=e.docFiles;return 1===t.length?{type:"docFile",payload:{docFile:t[0],changeType:q}}:{type:N,payload:{docFiles:t,changeType:q}}}({docFiles:[a]}))}else console.log(ft,t,n)}});var Tt=function(){var e=Object(je.a)(Oe.a.mark((function e(t,n){var a,r,o;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(kt,{user:{username:t,password:n}});case 2:return a=e.sent,r=a.user,o=a.token,ve.dispatch(Me({userId:r.objectId,token:o})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Pt=function(){var e=Object(je.a)(Oe.a.mark((function e(){return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ve.dispatch(Fe());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Lt=n(13),Mt=n(7),Ft=n.n(Mt),Wt=function(e){return e.aliases},Dt=function(e,t){var n=t.id;return e.aliases.get(n)},Ut=function(e){return e.users},Bt=function(e,t){var n=t.id;return e.users.get(n)},Ht=function(e){return e.users.get(Be(e))||function(e){return e.config.get("anonymousUser")}(e)},zt=Object(Lt.createSelector)([Ht],(function(e){return e.accessLevel})),qt=Ft()([Ut,Wt],(function(e,t){return[].concat(Object(z.a)(e.values()),Object(z.a)(t.values()))}))((function(){return"identities"})),Vt=Ft()([Ut,Wt,function(e,t){return t.ids}],(function(e,t,n){var a=new Map;return n.forEach((function(n){return a.set(n,e.get(n)||t.get(n))})),a}))((function(e,t){var n=t.ids;return"identities-".concat(n.join(" "))})),Yt=Ft()([Ut,Wt,function(e){return e.teams},function(e,t){return t.ids}],(function(e,t,n,a){var r=new Map;return a.forEach((function(a){return r.set(a,n.get(a)||e.get(a)||t.get(a))})),r}))((function(e,t){var n=t.ids;return console.log("identities-teams-".concat(n.join(" "))),"identities-teams-".concat(n.join(" "))})),Zt=Object(Lt.createSelector)([Bt,Dt],(function(e,t){return e||t})),Gt=Object(Lt.createSelector)([Bt,Dt,function(e,t){var n=t.id;return e.teams.get(n)}],(function(e,t,n){return n||t||e})),Jt=Ft()([qt,Be],(function(e,t){return e.filter((function(e){return e.objectId!==t&&e.ownerId!==t&&!e.userIds.includes(t)})).map((function(e){return e.objectId}))}))((function(){return"other-identity-ids"})),Xt=Ft()([qt,Be],(function(e,t){return e.filter((function(e){return e.objectId===t||e.ownerId===t||e.userIds.includes(t)}))}))((function(){return"current-identities"})),Qt=function(e){var t=e.children,n=e.onClick,a=e.stopPropagation,o=void 0!==a&&a,c=e.classNames,i=void 0===c?[]:c;return r.a.createElement("li",{className:["ListItem","".concat(n?"clickable":"")].concat(i).join(" "),onClick:function(e){n&&n(e),"UL"===e.target.parentElement.tagName&&e.target.parentElement.click(),o&&e.stopPropagation()}},t)},Kt=r.a.memo(Qt);function $t(){return($t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function _t(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}Qt.defaultProps={onClick:void 0,classNames:[],stopPropagation:!1};var en=r.a.createElement("line",{x1:3,y1:12,x2:21,y2:12}),tn=r.a.createElement("line",{x1:3,y1:6,x2:21,y2:6}),nn=r.a.createElement("line",{x1:3,y1:18,x2:21,y2:18}),an=function(e){var t=e.svgRef,n=e.title,a=_t(e,["svgRef","title"]);return r.a.createElement("svg",$t({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-menu",ref:t},a),n?r.a.createElement("title",null,n):null,en,tn,nn)},rn=r.a.forwardRef((function(e,t){return r.a.createElement(an,$t({svgRef:t},e))})),on=(n.p,function(e){var t=e.windows;if(1===t.length){var n=Object(i.a)(t,1)[0],a=n.value;return{type:"windowOrder",payload:{id:n.id,value:a,changeType:q}}}return{type:"windowOrders",payload:{windows:t,changeType:q}}}),cn=function(e){return{type:"windowOrder",payload:{id:e.id,changeType:Y}}},ln=r.a.memo((function(){var e=Object(c.d)(zt),t=Object(c.d)(f),n=[];return e===t.CreateUser.accessLevel&&n.push(r.a.createElement(Kt,{stopPropagation:!0,key:"register",onClick:function(){return ve.dispatch(on({windows:[{id:se,value:{type:se}}]}))}},"Create user")),e===K&&n.push(r.a.createElement(Kt,{stopPropagation:!0,key:"login",onClick:function(){return ve.dispatch(on({windows:[{id:ue,value:{type:ue}}]}))}},"Login")),e>=t.CreateAlias.accessLevel&&n.push(r.a.createElement(Kt,{stopPropagation:!0,key:"alias",onClick:function(){return ve.dispatch(on({windows:[{id:de,value:{type:de}}]}))}},"Create alias")),e>=$&&n.push(r.a.createElement(Kt,{stopPropagation:!0,key:"logout",onClick:function(){Pt()}},"Logout")),r.a.createElement(we,{dropdown:!0,title:r.a.createElement(rn,null)},n)}));n(44);function sn(){return(sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function un(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var dn=r.a.createElement("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),mn=function(e){var t=e.svgRef,n=e.title,a=un(e,["svgRef","title"]);return r.a.createElement("svg",sn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-message-square",ref:t},a),n?r.a.createElement("title",null,n):null,dn)},fn=r.a.forwardRef((function(e,t){return r.a.createElement(mn,sn({svgRef:t},e))}));n.p;function pn(){return(pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function hn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var vn=r.a.createElement("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),gn=r.a.createElement("line",{x1:8,y1:2,x2:8,y2:18}),yn=r.a.createElement("line",{x1:16,y1:6,x2:16,y2:22}),bn=function(e){var t=e.svgRef,n=e.title,a=hn(e,["svgRef","title"]);return r.a.createElement("svg",pn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-map",ref:t},a),n?r.a.createElement("title",null,n):null,vn,gn,yn)},wn=r.a.forwardRef((function(e,t){return r.a.createElement(bn,pn({svgRef:t},e))}));n.p;function En(){return(En=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function On(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var jn=r.a.createElement("rect",{x:1,y:4,width:22,height:16,rx:2,ry:2}),In=r.a.createElement("line",{x1:1,y1:10,x2:23,y2:10}),kn=function(e){var t=e.svgRef,n=e.title,a=On(e,["svgRef","title"]);return r.a.createElement("svg",En({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-credit-card",ref:t},a),n?r.a.createElement("title",null,n):null,jn,In)},xn=r.a.forwardRef((function(e,t){return r.a.createElement(kn,En({svgRef:t},e))}));n.p;function Cn(){return(Cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Nn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Sn=r.a.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),An=r.a.createElement("polyline",{points:"14 2 14 8 20 8"}),Rn=r.a.createElement("line",{x1:16,y1:13,x2:8,y2:13}),Tn=r.a.createElement("line",{x1:16,y1:17,x2:8,y2:17}),Pn=r.a.createElement("polyline",{points:"10 9 9 9 8 9"}),Ln=function(e){var t=e.svgRef,n=e.title,a=Nn(e,["svgRef","title"]);return r.a.createElement("svg",Cn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-file-text",ref:t},a),n?r.a.createElement("title",null,n):null,Sn,An,Rn,Tn,Pn)},Mn=r.a.forwardRef((function(e,t){return r.a.createElement(Ln,Cn({svgRef:t},e))})),Fn=(n.p,r.a.memo((function(){var e=Object(c.d)(zt),t=function(e){var t=e.id,n=e.value;return ve.dispatch(on({windows:[{id:t,value:n}]}))};return r.a.createElement(we,{classNames:["OpenApps"]},r.a.createElement(Kt,{key:"chat"},r.a.createElement(j,{onClick:function(){return t({id:ae,value:{type:ae}})}},r.a.createElement(fn,null))),r.a.createElement(Kt,{key:"docFile"},r.a.createElement(j,{onClick:function(){return t({id:oe,value:{type:oe}})}},r.a.createElement(Mn,null))),r.a.createElement(Kt,{key:"map"},r.a.createElement(j,{onClick:function(){return t({id:re,value:{type:re}})}},r.a.createElement(wn,null))),e>=$&&r.a.createElement(Kt,{key:"wallet"},r.a.createElement(j,{onClick:function(){return t({id:ne,value:{type:ne}})}},r.a.createElement(xn,null))))})));function Wn(){return(Wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Dn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Un=r.a.createElement("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),Bn=r.a.createElement("circle",{cx:9,cy:7,r:4}),Hn=r.a.createElement("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),zn=r.a.createElement("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),qn=function(e){var t=e.svgRef,n=e.title,a=Dn(e,["svgRef","title"]);return r.a.createElement("svg",Wn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-users",ref:t},a),n?r.a.createElement("title",null,n):null,Un,Bn,Hn,zn)},Vn=r.a.forwardRef((function(e,t){return r.a.createElement(qn,Wn({svgRef:t},e))})),Yn=(n.p,function(e){var t=e.useIcon,n=void 0!==t&&t,a=Object(c.d)(Xt),o=Object(c.d)(He),i=a.find((function(e){return e.objectId===o})),l=i?i.aliasName||i.username:"---";return r.a.createElement(we,{dropdown:!0,classNames:["IdentityPicker"],title:n?r.a.createElement(Vn,null):l},(n?a:a.filter((function(e){return e.objectId!==o}))).map((function(e){return r.a.createElement(Kt,{classNames:["".concat(e.objectId===o?"selected":"")],key:e.objectId,onClick:function(){return ve.dispatch(ot({aliasId:e.aliasName?e.objectId:void 0}))}},e.aliasName||e.username)})))}),Zn=r.a.memo(Yn);Yn.defaultProps={useIcon:void 0};var Gn=r.a.memo((function(){var e=Object(c.d)(We),t=Object(c.d)(zt),n=[],a=[];return e||a.push("warning"),r.a.createElement("div",{className:"".concat(a.join(" ")),id:"MenuBar"},r.a.createElement(ln,null),r.a.createElement(Fn,null),n,r.a.createElement("div",{className:"rightAligned"},t>=$&&r.a.createElement(Zn,{useIcon:!0}),r.a.createElement(ge,null)))})),Jn=n(10),Xn=function(){var e=Object(c.c)(),t=Object(c.d)(Be);return Object(a.useEffect)((function(){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.reset;[{type:U,event:It.USERS},{type:x,event:It.ALIASES},{type:L,event:It.MESSAGES},{type:M,event:It.ROOMS},{type:P,event:It.INVITATIONS},{type:N,event:It.DOCFILES},{type:S,event:It.FORUMS},{type:A,event:It.FORUMPOSTS},{type:R,event:It.FORUMTHREADS},{type:T,event:It.GAMECODES},{type:F,event:It.SIMPLEMSGS},{type:W,event:It.TEAMS},{type:D,event:It.TRANSACTIONS},{type:B,event:It.WALLETS},{type:C,event:It.DEVICES}].forEach(function(){var t=Object(je.a)(Oe.a.mark((function t(a){var r,o;return Oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.event,o=a.type,Rt(r,{}).then((function(t){e({type:o,payload:Object(Jn.a)({reset:n,changeType:V},o,t[o])})})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}({reset:!0})}),[t]),r.a.createElement(r.a.Fragment,null)},Qn=n(30);n(49);function Kn(){return(Kn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function $n(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _n=r.a.createElement("polyline",{points:"15 3 21 3 21 9"}),ea=r.a.createElement("polyline",{points:"9 21 3 21 3 15"}),ta=r.a.createElement("line",{x1:21,y1:3,x2:14,y2:10}),na=r.a.createElement("line",{x1:3,y1:21,x2:10,y2:14}),aa=function(e){var t=e.svgRef,n=e.title,a=$n(e,["svgRef","title"]);return r.a.createElement("svg",Kn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-maximize-2",ref:t},a),n?r.a.createElement("title",null,n):null,_n,ea,ta,na)},ra=r.a.forwardRef((function(e,t){return r.a.createElement(aa,Kn({svgRef:t},e))}));n.p;function oa(){return(oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ca(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ia=r.a.createElement("line",{x1:18,y1:6,x2:6,y2:18}),la=r.a.createElement("line",{x1:6,y1:6,x2:18,y2:18}),sa=function(e){var t=e.svgRef,n=e.title,a=ca(e,["svgRef","title"]);return r.a.createElement("svg",oa({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-x",ref:t},a),n?r.a.createElement("title",null,n):null,ia,la)},ua=r.a.forwardRef((function(e,t){return r.a.createElement(sa,oa({svgRef:t},e))})),da=(n.p,n(50),r.a.memo((function(e){var t=e.onDoubleClick,n=e.title,a=e.done;return r.a.createElement("div",{onDoubleClick:t,className:"TopBar"},r.a.createElement("div",{className:"TopBarHandle"},r.a.createElement("span",{className:"title"},n)),r.a.createElement("div",{className:"buttons"},r.a.createElement(j,{type:"button",onClick:t},r.a.createElement(ra,null)),r.a.createElement(j,{stopPropagation:!0,type:"button",onClick:a},r.a.createElement(ua,null))))}))),ma=function(e){var t=e.onClick,n=e.children,o=e.order,c=e.menu,l=e.done,s=e.type,u=void 0===s?"window":s,d=e.title,m=void 0===d?"app":d,f=e.classNames,p=void 0===f?[]:f,h="window"===u?{width:640,height:460}:{width:440,height:360},v=Object(a.useState)(h),g=Object(i.a)(v,2),y=g[0],b=g[1],w=Object(a.useState)({x:0,y:0}),E=Object(i.a)(w,2),O=E[0],j=E[1],I=["Window"].concat(p),k=Object(a.useCallback)((function(){"100%"===y.width&&"100%"===y.height?b(h):(j({x:0,y:0}),b({width:"100%",height:"100%"}))}),[y,O]);return r.a.createElement(Qn.a,{position:O,className:"".concat(["rnd"].join(" ")),style:{zIndex:o},size:y,maxHeight:"100%",maxWidth:"100%",bounds:"parent",dragHandleClassName:"TopBarHandle",enableResizing:{top:!1,topRight:!1,topLeft:!1,right:!0,bottom:!0,left:!0,bottomRight:!0,bottomLeft:!0},resizeHandleStyles:{left:{left:"0",width:"5px"},right:{right:"0",width:"5px"},bottom:{bottom:"0",height:"5px"},bottomLeft:{bottom:"0",left:"0",width:"5px",height:"5px"},bottomRight:{bottom:"0",right:"0",width:"5px",height:"5px"}},onDragStart:t,onDragStop:function(e,t){var n=t.node,a=t.x,r=t.y;O&&a===O.x&&r===O.y||(0===a&&0===r&&"100%"!==y.height?(b({width:"50%",height:"50%"}),j({x:0,y:0})):0===a&&r+n.offsetHeight+35>=window.innerHeight&&"100%"!==y.height?(b({width:"50%",height:"50%"}),j({x:0,y:(window.innerHeight-36)/2})):0===r&&a+n.offsetWidth>=window.innerWidth&&"100%"!==y.height?(b({width:"50%",height:"50%"}),j({x:window.innerWidth/2,y:0})):a+n.offsetWidth>=window.innerWidth&&r+n.offsetHeight+35>=window.innerHeight&&"100%"!==y.height?(b({width:"50%",height:"50%"}),j({x:window.innerWidth/2,y:(window.innerHeight-36)/2})):0===a&&r>0?(b({width:"50%",height:"100%"}),j({x:0,y:0})):a+n.offsetWidth>=window.innerWidth&&r>0?(b({width:"50%",height:"100%"}),j({x:window.innerWidth/2,y:0})):j({x:a,y:r}))},onResizeStart:t,onResizeStop:function(e,t,n){n.offsetWidth===y.width&&n.offsetHeight===y.height||b({width:n.offsetWidth,height:n.offsetHeight})}},r.a.createElement("div",{role:"complementary",onClick:t,className:"".concat(I.join(" "))},r.a.createElement(da,{done:l,title:m,onDoubleClick:k}),r.a.createElement("div",{className:"windowBox"},c&&r.a.createElement("div",{className:"menu"},c),r.a.createElement("div",{className:"content"},n))))},fa=r.a.memo(ma);ma.defaultProps={done:void 0,classNames:[],title:"app",menu:void 0,order:void 0,type:"window"};var pa=Ft()([function(e){return e.transactions},function(e,t){return t.ids}],(function(e,t){return Object(z.a)(e.values()).filter((function(e){var n=e.fromWalletId,a=e.toWalletId;return t.includes(n)||t.includes(a)})).map((function(e){return e.objectId}))}))((function(e,t){var n=t.ids;return"transaction-ids-".concat(n.join(" "))})),ha=(n(51),r.a.memo((function(e){var t=e.transactionId,n=Object(c.d)((function(e){return function(e,t){var n=t.id;return e.transactions.get(n)}(e,{id:t})})),a=Object(c.d)((function(e){return Gt(e,{id:n.fromWalletId})})),o=Object(c.d)((function(e){return Gt(e,{id:n.toWalletId})}));return r.a.createElement(Kt,{classNames:["TransactionItem"]},r.a.createElement("p",null,p(ve.getState(),{date:new Date(n.customTimeCreated||n.timeCreated)}).fullStamp),r.a.createElement("p",null,"".concat(a.teamName||a.aliasName||a.username," -> ").concat(o.teamName||o.aliasName||o.username)),r.a.createElement("p",null,"Amount: ".concat(n.amount)),n.note&&r.a.createElement("p",null,n.note))}))),va=r.a.memo((function(e){var t=e.walletIds,n=Object(c.d)((function(e){return pa(e,{ids:t})}));return r.a.createElement(we,{scrollTo:{buffer:!0,direction:"top"},classNames:["TransactionList"]},Object(z.a)(n).reverse().map((function(e){return r.a.createElement(ha,{key:e,transactionId:e})})))})),ga=Ft()([function(e){return e.wallets},Ht],(function(e,t){return Object(z.a)(e.values()).filter((function(e){return e.ownerId===t.objectId||t.aliases.includes(e.ownerAliasId)})).map((function(e){return e.objectId}))}))((function(){return"wallet-ids-current-user"})),ya=r.a.memo((function(e){var t=e.identityId,n=Object(c.d)((function(e){return Zt(e,{id:t})}));return r.a.createElement(Kt,{stopPropagation:!0,key:n.objectId,onClick:function(){ve.dispatch(on({windows:[{id:"".concat(ce,"-").concat(n.objectId),value:{identityId:n.objectId,type:ce}}]}))}},n.username||n.aliasName)})),ba=r.a.memo((function(){var e=Object(c.d)(Jt);return r.a.createElement(we,{dropdown:!0,checkWidth:!0,classNames:["IdentityList"],title:"Users"},e.map((function(e){return r.a.createElement(ya,{key:e,identityId:e})})))})),wa=r.a.memo((function(e){var t=e.walletId,n=e.onChange,a=Object(c.d)((function(e){return function(e,t){var n=t.id;return e.wallets.get(n)}(e,{id:t})})),o=Object(c.d)((function(e){return Gt(e,{id:t})}));return r.a.createElement(Kt,{classNames:["WalletItem"],onClick:function(){return n(t)}},o?"".concat(o.teamName||o.aliasName||o.username,": ").concat(a.amount):"Show all")})),Ea=r.a.memo((function(e){var t=e.onChange,n=Object(c.d)(ga);return r.a.createElement(we,{dropdown:!0,checkWidth:!0,title:"Your wallets",classNames:["WalletList"]},r.a.createElement(wa,{key:"showAll",onChange:t,walletId:"showAll"}),n.map((function(e){return r.a.createElement(wa,{key:e,walletId:e,onChange:t})})))})),Oa=(n(52),r.a.memo((function(e){var t=e.id,n=Object(a.useState)("showAll"),o=Object(i.a)(n,2),l=o[0],s=o[1],u=Object(c.d)(ga),d=Object(c.d)((function(e){return Gt(e,{id:l})})),m=Object(a.useCallback)((function(){ve.dispatch(on({windows:[{id:t,value:{type:ne}}]}))}),[]),f=Object(a.useCallback)((function(){return ve.dispatch(cn({id:t}))}),[t]),p=Object(a.useCallback)((function(e){return s(e)}),[]);return r.a.createElement(fa,{done:f,classNames:["Wallet"],title:"Wallet".concat(d?": ".concat(d.teamName||d.aliasName||d.username):"s"),onClick:m,menu:r.a.createElement(r.a.Fragment,null,r.a.createElement(Ea,{key:"walletList",onChange:p}),r.a.createElement(ba,{key:"identityList"}))},r.a.createElement(va,{key:"transactionList",walletIds:"showAll"!==l?[l]:u}))}))),ja=(n(53),function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=(t[0],t[1]),o=Object(a.useRef)();return Object(a.useEffect)((function(){!function e(){if("undefined"!==typeof window.google&&"undefined"!==typeof window.MarkerClusterer&&"undefined"!==typeof window.MapLabel){var t=new window.google.maps.Map(o.current,{disableDefaultUI:!0,fullscreenControl:!1,keyboardShortcuts:!1,mapTypeControl:!1,noClear:!0,zoomControl:!1,panControl:!1,overviewMapControl:!1,rotateControl:!1,scaleControl:!1,streetViewControl:!1,center:{lat:-34.397,lng:150.644},zoom:8,styles:[{elementType:"geometry",stylers:[{color:"#13002d"}]},{elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"administrative",stylers:[{color:"#370087"}]},{featureType:"landscape.natural.terrain",stylers:[{color:"#44003a"}]},{featureType:"road",stylers:[{color:"#6e6c6d"},{weight:.5}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{color:"#7d006c"}]}]});n(t)}else setTimeout(e,1e3)}()}),[]),r.a.createElement("div",{ref:o,className:"MapView"})}),Ia=function(e){return e.positions},ka=function(e){return Object(Lt.createSelector)([Ia],(function(t){return Object(z.a)(t.values()).filter((function(t){var n=t.positionType;return e===n})).map((function(e){return{positionName:e.positionName,objectId:e.objectId}}))}))},xa=function(e){var t=e.title,n=e.positionType,o=Object(a.useMemo)(ka,[]),i=Object(c.d)((function(e){return o(e,n)}));return r.a.createElement("div",{key:"positionsList",className:"PositionsList"},r.a.createElement(we,{title:t},i.map((function(e){return r.a.createElement(Kt,{key:e.objectId,onClick:function(){console.log(e.objectId)}},e.positionName)}))))},Ca=r.a.memo(xa);xa.defaultProps={title:void 0};var Na=function(e){var t=e.positionTypes,n=void 0===t?[]:t;return r.a.createElement("div",{className:"lists Positions"},n.map((function(e){return r.a.createElement(Ca,{title:e,positionType:e})})))},Sa=(n(54),r.a.memo((function(e){var t=e.id,n=Object(a.useCallback)((function(){ve.dispatch(on({windows:[{id:t,value:{type:re}}]}))}),[]);return r.a.createElement(fa,{done:function(){return ve.dispatch(cn({id:t}))},classNames:["WorldMap"],title:"map",onClick:n,menu:r.a.createElement(r.a.Fragment,null,r.a.createElement(Na,null))},r.a.createElement(ja,null))}))),Aa=function(e){return e.rooms},Ra=function(e,t){var n=t.id;return e.rooms.get(n)},Ta=Ft()([Aa],(function(e){return Object(z.a)(e.values()).filter((function(e){return!e.isWhisper&&!e.isUser}))}))((function(){return"normalRooms"})),Pa=Ft()([Aa],(function(e){return Object(z.a)(e.values()).filter((function(e){return e.isWhisper})).map((function(e){return{objectId:e.objectId,participantIds:e.participantIds}}))}))((function(){return"whisperRooms"})),La=Ft()([Ta,Ht],(function(e,t){return e.filter((function(e){return!t.followingRooms.includes(e.objectId)})).map((function(e){return{roomName:e.roomName,objectId:e.objectId}})).sort((function(e,t){var n=e.roomName.toLowerCase(),a=t.roomName.toLowerCase();return n>a||a<n?1:0})).map((function(e){return e.objectId}))}))((function(){return"unfollowedRooms"})),Ma=Ft()([Ta,Ht],(function(e,t){return e.filter((function(e){return t.followingRooms.includes(e.objectId)})).map((function(e){return e.objectId}))}))((function(){return"followedRooms"})),Fa=Ft()([Pa,function(e,t){return{identityId:t.identityId,currentIdentityId:t.currentIdentityId}},function(e,t){var n=t.identityId;return Ra(e,{id:n})}],(function(e,t,n){var a=t.currentIdentityId,r=t.identityId;return e.find((function(e){return e.participantIds.includes(a)&&e.participantIds.includes(r)}))||n}))((function(e,t){var n=t.currentIdentityId,a=t.identityId;return"whisper-".concat(n,"-").concat(a)})),Wa=Ft()([Vt,Xt,function(e,t){return t.ids}],(function(e,t,n){var a=e.get(n[0]),r=e.get(n[1]);return t.find((function(e){var t=e.objectId;return a.objectId===t||a.ownerId===t||a.userIds.includes(t)}))?"".concat(a.username||a.aliasName," > ").concat(r.username||a.aliasName):"".concat(r.username||a.aliasName," > ").concat(a.username||a.aliasName)}))((function(e,t){var n=t.ids;return"w-name-".concat(n.join(" "))})),Da="chat",Ua="whisper",Ba=function(){var e=Object(je.a)(Oe.a.mark((function e(t){var n,a,r,o,c,i,l;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,a=t.roomId,r=t.image,o=Ra(ve.getState(),{id:a}),c=o.isWhisper?o.participantIds:[],i={roomId:a,ownerAliasId:Ue(ve.getState())||void 0,text:n.split("\n")},o.isUser?(i.messageType=Ua,c.push(He(ve.getState())),c.push(a)):o.isWhisper?i.messageType=Ua:i.messageType=Da,e.next=7,Rt(gt,{message:i,image:r,participantIds:c});case 7:return l=e.sent,ve.dispatch(ze({messages:[l.message]})),e.abrupt("return",{message:l.message,switchRoom:!0});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ha=function(){var e=Object(je.a)(Oe.a.mark((function e(t){var n,a;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,e.next=3,Rt(Ot,{roomId:n});case 3:return a=e.sent,ve.dispatch(ze({messages:a.messages})),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),za=function(){var e=Object(je.a)(Oe.a.mark((function e(t){var n,a,r;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.room,a=Object(H.a)(Object(H.a)({},n),{},{ownerAliasId:Ue(ve.getState())||void 0}),e.next=4,Rt(yt,{room:a});case 4:return r=e.sent,e.next=7,ve.dispatch(tt({room:r.room,user:r.user}));case 7:return e.abrupt("return",{room:r.room});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qa=function(){var e=Object(je.a)(Oe.a.mark((function e(t){var n,a,r;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,a=t.password,e.next=3,Rt(Et,{roomId:n,password:a});case 3:return r=e.sent,e.next=6,Ha({roomId:n});case 6:return e.next=8,ve.dispatch(tt({room:r.room,user:r.user}));case 8:return e.abrupt("return",{room:r.room,user:r.user});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Va=function(){var e=Object(je.a)(Oe.a.mark((function e(t){var n,a;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,e.next=3,Rt(jt,{roomId:n});case 3:return a=e.sent,e.next=6,ve.dispatch(et({rooms:[{objectId:n}]}));case 6:return e.abrupt("return",{room:a.room});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ya=r.a.memo((function(e){var t=e.roomId,n=e.onChange,a=Object(c.d)((function(e){return Ra(e,{id:t})}));return r.a.createElement(Kt,{key:t,onClick:function(){qa({roomId:a.objectId}).then((function(){return n({roomId:a.objectId})})).catch((function(e){return console.log(e)}))}},a.roomName)})),Za=r.a.memo((function(e){var t=e.onChange,n=Object(c.d)(La);return r.a.createElement(we,{dropdown:!0,checkWidth:!0,key:"roomList",classNames:["RoomList"],title:"Rooms"},n.map((function(e){return r.a.createElement(Ya,{key:e,roomId:e,onChange:t})})))})),Ga=r.a.memo((function(e){var t=e.room,n=e.onChange,a=Object(c.d)((function(e){return Wa(e,{ids:t.participantIds})}));return r.a.createElement(Kt,{key:t.objectId,onClick:function(){n({roomId:t.objectId,roomName:a})}},a)})),Ja=r.a.memo((function(e){var t=e.onChange,n=Object(c.d)(Pa);return r.a.createElement(we,{dropdown:!0,checkWidth:!0,key:"whisperList",classNames:["WhisperList"],title:"PM"},n.map((function(e){return r.a.createElement(Ga,{key:e.objectId,room:e,onChange:t})})))})),Xa=function(e){var t=e.roomId,n=e.onChange,a=e.classNames,o=void 0===a?[]:a,i=Object(c.d)((function(e){return Ra(e,{id:t})}));return r.a.createElement(Kt,{classNames:["FollowingItem"].concat(o),key:t,onClick:function(){n({roomId:t})}},i.roomName)},Qa=r.a.memo(Xa);Xa.defaultProps={classNames:[]};var Ka=r.a.memo((function(e){var t=e.onChange,n=e.roomId,a=Object(c.d)(Ma);return r.a.createElement(we,{dropdown:!0,checkWidth:!0,key:"followingList",classNames:["FollowingList"],title:"Joined"},a.map((function(e){return r.a.createElement(Qa,{classNames:["".concat(e===n?"selected":"")],key:e,roomId:e,onChange:t})})))})),$a=r.a.memo((function(e){var t=e.onChange,n=e.roomId,a=Object(c.d)(zt);return r.a.createElement(r.a.Fragment,null,a>=$&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ka,{roomId:n,key:"following",onChange:t}),r.a.createElement(Ja,{key:"whisper",onChange:t}),r.a.createElement(Za,{key:"room",onChange:t})),r.a.createElement(ba,{onDone:t,key:"user"}))})),_a=n(6),er=r.a.forwardRef((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,n=e.onRemove,a=e.classNames,o=void 0===a?[]:a,c=e.altText,i=void 0===c?"":c,l=arguments.length>1?arguments[1]:void 0;return r.a.createElement("div",{className:"".concat(["Image"].concat(o).join(" "))},n&&r.a.createElement("div",{role:"complementary",onClick:function(e){n(),e.stopPropagation()}},"X"),r.a.createElement("img",{ref:l,src:t,alt:i}))})),tr=er;er.propTypes={image:E.string.isRequired,altText:E.string,classNames:Object(E.arrayOf)(E.string),onRemove:E.func},er.defaultProps={altText:"",classNames:[],onRemove:void 0};var nr=n(29),ar=n.n(nr),rr=(n(55),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,n=Object(a.useRef)(null),o=Object(a.useRef)(null),c=Object(a.useState)(),l=Object(i.a)(c,2),s=l[0],u=l[1];Object(a.useEffect)((function(){t(s)}),[s]);var d=function(e){var t=(e.target.files||[])[0];if(t){var n=new FileReader;n.addEventListener("load",(function(){n.result&&u({imageName:t.name,source:n.result,width:o.current.naturalWidth,height:o.current.naturalHeight})})),n.readAsDataURL(t)}};return r.a.createElement("div",{className:"ImageUpload"},r.a.createElement("input",{key:"uploadInput",className:"hide",ref:n,type:"file",accept:"image/png, image/jpeg, image/pjpeg",onChange:d}),r.a.createElement(j,{type:"button",onClick:function(){n.current.click()}},r.a.createElement(tr,{onRemove:function(){return u()},ref:o,classNames:["previewImage"].concat([s?"":"hide"]),image:s?s.source:"",altText:"Image preview"}),r.a.createElement(tr,{image:ar.a,altText:"Upload image"})))}),or=r.a.memo(rr);function cr(){return(cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ir(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}rr.defaultProps={};var lr=r.a.createElement("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),sr=r.a.createElement("circle",{cx:12,cy:10,r:3}),ur=function(e){var t=e.svgRef,n=e.title,a=ir(e,["svgRef","title"]);return r.a.createElement("svg",cr({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-map-pin",ref:t},a),n?r.a.createElement("title",null,n):null,lr,sr)},dr=r.a.forwardRef((function(e,t){return r.a.createElement(ur,cr({svgRef:t},e))}));n.p;function mr(){return(mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function fr(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var pr=r.a.createElement("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),hr=r.a.createElement("line",{x1:7,y1:7,x2:7.01,y2:7}),vr=function(e){var t=e.svgRef,n=e.title,a=fr(e,["svgRef","title"]);return r.a.createElement("svg",mr({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-tag",ref:t},a),n?r.a.createElement("title",null,n):null,pr,hr)},gr=r.a.forwardRef((function(e,t){return r.a.createElement(vr,mr({svgRef:t},e))}));n.p;function yr(){return(yr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function br(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var wr=r.a.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),Er=r.a.createElement("polyline",{points:"14 2 14 8 20 8"}),Or=r.a.createElement("line",{x1:12,y1:18,x2:12,y2:12}),jr=r.a.createElement("line",{x1:9,y1:15,x2:15,y2:15}),Ir=function(e){var t=e.svgRef,n=e.title,a=br(e,["svgRef","title"]);return r.a.createElement("svg",yr({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-file-plus",ref:t},a),n?r.a.createElement("title",null,n):null,wr,Er,Or,jr)},kr=r.a.forwardRef((function(e,t){return r.a.createElement(Ir,yr({svgRef:t},e))})),xr=(n.p,n(56),function(e){var t=e.roomId,n=e.onSend,o=e.minAccessLevel,l=void 0===o?$:o,s=Object(_a.b)(),u=s.register,f=s.handleSubmit,p=s.reset,h=Object(a.useRef)(null),v=Object(a.useRef)(null),g=Object(a.useState)(),y=Object(i.a)(g,2),b=y[0],w=y[1],E=Object(c.d)(We),O=Object(c.d)(zt),I=Object(c.d)(d),k=Object(c.d)(m),x=function(){if(h.current){var e=h.current;e.style.height&&e.scrollHeight.toString()===e.style.height.split("px")[0]||(e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px"),h.current.scrollIntoView())}},C=Object(a.useCallback)((function(e){return w(e)}),[]);return r.a.createElement("div",{className:"InputArea"},r.a.createElement("form",{onSubmit:f((function(e){var a=e.text;Ba({roomId:t,image:b,text:a}).then((function(e){var t=e.message,a=e.switchRoom;b&&w(void 0),p(),x(),a&&n({roomId:t.roomId})})).catch((function(e){console.log(e)}))}))},O>=l&&r.a.createElement("div",{key:"buttonBox",className:"buttonBox"},I.CHAT&&r.a.createElement(or,{onChange:C}),r.a.createElement(j,{onClick:function(){}},r.a.createElement(gr,null)),r.a.createElement(j,{onClick:function(){}},r.a.createElement(kr,null)),k&&r.a.createElement(j,{onClick:function(){}},r.a.createElement(dr,null)),r.a.createElement(Zn,null)),r.a.createElement("div",{className:"input"},r.a.createElement("textarea",{name:"text",key:"input",rows:1,ref:function(e){u(e),h.current=e},onKeyDown:function(e){var t=e.key;e.altKey&&"Enter"===t&&v.current&&v.current.click()},placeholder:E?"Alt+Enter to send message":"Offline. Reconnecting to server...",className:[].join(" "),onChange:function(e){return x(e.target)}}),r.a.createElement(j,{ref:v,disabled:!E,key:"send",type:"submit",classNames:["sendButton"],onClick:function(){}},"Send"))))}),Cr=r.a.memo(xr);xr.defaultProps={minAccessLevel:$};var Nr=function(e,t){var n=t.id;return e.messages.get(n)},Sr=Ft()([function(e){return e.messages},function(e,t){return t.roomId}],(function(e,t){return Object(z.a)(e.values()).filter((function(e){return e.roomId===t}))}))((function(e,t){return t.roomId})),Ar=Ft()([Sr],(function(e){return e.map((function(e){return e.objectId}))}))((function(e,t){var n=t.roomId;return"id-".concat(n)})),Rr=(n(57),r.a.memo((function(e){var t=e.identityId,n=e.timeCreated,a=Object(c.d)((function(e){return Zt(e,{id:t})})),o=Object(c.d)((function(e){return p(e,{date:n})}));return r.a.createElement("p",{className:"MessageInfo"},r.a.createElement("span",{role:"button",tabIndex:0,className:"clickable username",onClick:function(e){a&&ve.dispatch(on({windows:[{id:"".concat(ce,"-").concat(a.objectId),value:{identityId:a.objectId,type:ce}}]})),e.stopPropagation()}},a?a.username||a.aliasName:"-"),r.a.createElement("span",{className:"time"},o.fullStamp))}))),Tr=(n(58),function(e){var t=e.previousMessageId,n=e.messageId,a=Object(c.d)((function(e){return Nr(e,{id:t})})),o=Object(c.d)((function(e){return Nr(e,{id:n})})),i=ee({objectToAccess:o,toAuth:Ht(ve.getState())}).hasFullAccess;return r.a.createElement(Kt,{classNames:["MessageItem","".concat(i?"clickable":"")],key:n},!(!!a&&!(new Date(o.lastUpdated).getTime()-9e5>new Date(a.lastUpdated).getTime())&&(!(!a.ownerAliasId||!o.ownerAliasId||a.ownerAliasId!==o.ownerAliasId)||!a.ownerAliasId&&!o.ownerAliasId&&a.ownerId===o.ownerId))&&r.a.createElement(Rr,{identityId:o.ownerAliasId||o.ownerId,timeCreated:o.customTimeCreated||o.timeCreated}),r.a.createElement("div",{className:"text"},o.text.map((function(e,t){return r.a.createElement("p",{key:t},e)}))))}),Pr=r.a.memo(Tr);Tr.defaultProps={previousMessageId:void 0};n(59);var Lr=function(e){var t=e.roomId,n=Object(c.d)((function(e){return Ar(e,{roomId:t})}));return r.a.createElement(we,{scrollTo:{buffer:!0,direction:"bottom"},classNames:["MessageList"]},n.map((function(e,t,n){return r.a.createElement(Pr,{key:e,previousMessageId:n[t-1],messageId:e})})))},Mr=r.a.memo(Lr);Lr.defaultProps={roomId:void 0};n(60);var Fr=function(e){var t=e.roomId,n=e.onSend,a=Object(c.d)(zt);return r.a.createElement("div",{className:"Messages"},r.a.createElement("div",{className:"spacer"}),r.a.createElement(Mr,{key:"messagesList",roomId:t}),a>=$&&r.a.createElement(Cr,{onSend:n,roomId:t,key:"inputArea"}))},Wr=r.a.memo(Fr);Fr.defaultProps={roomId:void 0};var Dr=r.a.memo((function(e){var t=e.children;return r.a.createElement(we,{dropdown:!0,checkWidth:!0,classNames:["FileMenu"],title:"File"},t)})),Ur=(n(61),function(e){var t=e.id,n=e.roomId,o=Object(a.useState)(n||u(ve.getState())),l=Object(i.a)(o,2),s=l[0],d=l[1],m=Object(c.d)((function(e){return Ra(e,{id:s})})),f=Object(c.d)(Ht);Object(a.useEffect)((function(){f&&!f.isAnonymous&&m||s===u(ve.getState())||d(u(ve.getState()))}),[m,f]),Object(a.useEffect)((function(){n&&s!==n&&d(n)}),[n]);var p=function(){if(!m)return"Chat";if(m.isUser){var e=Zt(ve.getState(),{id:s});return"PM: ".concat(e.aliasName||e.username)}return m.isWhisper?"PM: ".concat(Wa(ve.getState(),{ids:m.participantIds})):"Chat: ".concat(m.roomName)}(),h=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.roomId;d(t)}),[]),v=Object(a.useCallback)((function(){ve.dispatch(on({windows:[{id:t,value:{type:ae}}]}))}),[]),g=Object(a.useCallback)((function(){return ve.dispatch(cn({id:t}))}),[t]),y=Object(a.useCallback)((function(){return ve.dispatch(on({windows:[{id:ie,value:{type:ie}}]}))}),[]),b=ee({objectToAccess:m,toAuth:f}).hasFullAccess;return r.a.createElement(fa,{done:g,classNames:["Chat"],title:p,onClick:v,menu:r.a.createElement(r.a.Fragment,null,!f.isAnonymous&&r.a.createElement(Dr,{key:"fileMenu"},r.a.createElement(Kt,{stopPropagation:!0,key:"createRoom",onClick:y},"New room"),b&&r.a.createElement(Kt,{stopPropagation:!0,key:"configRoom",onClick:function(){}},"Config room"),b&&!m.isWhisper&&!m.isUser&&!m.isSystemRoom&&!m.isTeam&&r.a.createElement(Kt,{stopPropagation:!0,key:"removeRoom",onClick:function(){return ve.dispatch(on({windows:[{id:le,value:{type:le,roomId:s}}]}))}},"Delete room")),r.a.createElement($a,{roomId:s,key:"rooms",onChange:h}))},r.a.createElement(Wr,{key:"messages",roomId:s,onSend:h}))}),Br=r.a.memo(Ur);Ur.defaultProps={roomId:void 0};var Hr=function(e){return e.windowOrder},zr=(Ft()([Hr,function(e,t){return t.id}],(function(e,t){return Object(z.a)(e.keys()).indexOf(t)}))((function(e,t){var n=t.id;return"index-".concat(n)})),n(62),n(63),function(e){var t=e.children,n=e.title,a=e.error,o=e.text,c=e.done,i=e.onClick,l=e.classNames,s=void 0===l?[]:l;return r.a.createElement(fa,{type:"dialog",done:c,title:n,classNames:["Dialog"].concat(s),onClick:i},a&&r.a.createElement("div",null,a.type),o&&r.a.createElement("div",null,o),t)}),qr=r.a.memo(zr);zr.defaultProps={children:void 0,error:void 0,title:void 0,text:void 0,classNames:[]};var Vr=r.a.memo((function(e){var t=e.id,n=e.identityId,a=Object(c.d)((function(e){return Zt(e,{id:n})})),o=Object(c.d)(He);return r.a.createElement(qr,{title:"User: ".concat(a.aliasName||a.username),onClick:function(){ve.dispatch(on({windows:[{id:t,value:{type:ce,identityId:n}}]}))},done:function(){return ve.dispatch(cn({id:t}))}},"-1"!==o&&r.a.createElement("div",{className:"buttons"},r.a.createElement(j,{stopPropagation:!0,type:"button",onClick:function(){return Object(c.b)((function(){ve.dispatch(on({windows:[{id:"".concat(me,"-").concat(n),value:{type:me,toWalletId:n}}]})),ve.dispatch(cn({id:t}))}))}},r.a.createElement(xn,null)),r.a.createElement(j,{stopPropagation:!0,type:"button",onClick:function(){var e=Fa(ve.getState(),{identityId:n,currentIdentityId:o});Object(c.b)((function(){ve.dispatch(on({windows:[{id:ae,value:{type:ae,roomId:e.objectId}}]})),ve.dispatch(cn({id:t}))}))}},r.a.createElement(fn,null))))})),Yr=function(e){var t=e.onChange,n=e.name,o=e.shouldEqual,c=e.maxLength,l=e.type,s=void 0===l?"text":l,u=e.required,d=void 0!==u&&u,m=e.placeholder,f=void 0===m?"":m,p=Object(_a.c)(),h=p.register,v=p.getValues,g=Object(a.useState)(!1),y=Object(i.a)(g,2),b=y[0],w=y[1],E=Object(a.useState)(!1),O=Object(i.a)(E,2),j=O[0],I=O[1];return r.a.createElement("input",{maxLength:c,required:d,name:n,ref:h({maxLength:c,validate:function(e){return!o||e===v(o)||"Must match ".concat(o)}}),type:s,defaultValue:"",className:"Input ".concat(j?"empty":""),onFocus:function(){b?j&&I(!1):w(!0)},onBlur:function(e){b&&d&&I(!e.target.value||""===e.target.value)},onChange:function(e){t&&t(e.target.value)},placeholder:f})},Zr=r.a.memo(Yr);Yr.defaultProps={placeholder:"",required:!1,type:"text",onChange:void 0,shouldEqual:void 0,maxLength:void 0};var Gr=r.a.memo((function(e){var t=e.id,n=Object(_a.b)(),o=Object(a.useState)(),l=Object(i.a)(o,2),s=l[0];l[1];return r.a.createElement(qr,{classNames:["CreateRoomDialog"],onClick:function(){ve.dispatch(on({windows:[{id:t,value:{type:ie}}]}))},done:function(){return ve.dispatch(cn({id:t}))},error:s,title:"New room"},r.a.createElement(_a.a,n,r.a.createElement("form",{onSubmit:n.handleSubmit((function(e){var n=e.roomName,a=e.password,r=e.repeatPassword,o=e.topic;n&&(a&&a!==r||za({room:{roomName:n,password:a,topic:o}}).then((function(e){var n=e.room;Object(c.b)((function(){ve.dispatch(on({windows:[{id:ae,value:{type:ae,roomId:n.objectId}}]})),ve.dispatch(cn({id:t}))}))})).catch((function(e){return console.log(e)})))}))},r.a.createElement(Zr,{required:!0,name:"roomName",placeholder:"Name of the room"}),r.a.createElement(Zr,{name:"topic",placeholder:"Topic (shown when joining the room)"}),r.a.createElement(Zr,{name:"password",type:"password",placeholder:"Password"}),r.a.createElement(Zr,{name:"repeatPassword",type:"password",placeholder:"Repeat password"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(j,{type:"submit",onClick:function(){}},"Create")))))})),Jr=r.a.memo((function(e){var t=e.id,n=e.roomId,o=Object(a.useState)(),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(c.d)((function(e){return Ra(e,{id:n})}));return r.a.createElement(qr,{classNames:["RemoveRoomDialog"],error:s,onClick:function(){ve.dispatch(on({windows:[{id:t,value:{type:le,roomId:n}}]}))},done:function(){return ve.dispatch(cn({id:t}))},title:"Delete room ".concat(d?d.roomName:""),text:"Are you sure you want to delete ".concat(d?d.roomName:"","?")},r.a.createElement(j,{type:"button",onClick:function(){return ve.dispatch(cn({id:t}))}},"No"),r.a.createElement(j,{type:"submit",onClick:function(){Va({roomId:n}).then((function(){Object(c.b)((function(){ve.dispatch(on({windows:[{id:ae,value:{type:ae}}]})),ve.dispatch(cn({id:t}))}))})).catch((function(e){return u(e)}))}},"Yes"))})),Xr=r.a.memo((function(e){var t=e.id,n=Object(_a.b)(),o=Object(a.useState)(),c=Object(i.a)(o,2),l=c[0],s=c[1],u=function(){var e=Object(je.a)(Oe.a.mark((function e(n){var a,r;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.username,r=n.password,Tt(a,r).then((function(){ve.dispatch(cn({id:t}))})).catch((function(e){s(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(qr,{classNames:["LoginDialog"],onClick:function(){ve.dispatch(on({windows:[{id:t,value:{type:ue}}]}))},done:function(){return ve.dispatch(cn({id:t}))},error:l,title:"Login"},r.a.createElement(_a.a,n,r.a.createElement("form",{onSubmit:n.handleSubmit(u)},r.a.createElement(Zr,{name:"username",placeholder:"Username"}),r.a.createElement(Zr,{name:"password",placeholder:"Password",type:"password"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(j,{type:"submit",onClick:function(){}},"Login")))))})),Qr=function(e){var t=e.onChange,n=e.children,o=e.name,c=e.defaultValue,l=e.required,s=void 0!==l&&l,u=e.placeholder,d=void 0===u?"":u,m=e.multiple,f=void 0!==m&&m,p=Object(_a.c)().register,h=Object(a.useState)(!1),v=Object(i.a)(h,2),g=v[0],y=v[1],b=Object(a.useState)(!1),w=Object(i.a)(b,2),E=w[0],O=w[1],j=function(e){var t=Array.from(e.target.selectedOptions).filter((function(e){return""!==e.value}));g&&s&&O(0===t.length)};return r.a.createElement("select",{defaultValue:c,required:s,name:o,ref:p,className:"Select ".concat(E?"empty":""),onFocus:function(){return y(!0)},onBlur:j,onChange:function(e){j(e),t&&t(Array.from(e.target.selectedOptions).map((function(e){return e.value})).filter((function(e){return""!==e})))},placeholder:d,multiple:f},n)},Kr=Qr;Qr.defaultProps={multiple:!1,children:void 0,placeholder:"",required:!1,onChange:void 0};var $r=function(e){var t=e.onChange,n=e.name,o=e.maxLength,c=e.required,l=void 0!==c&&c,s=e.placeholder,u=void 0===s?"":s,d=Object(_a.c)().register,m=Object(a.useState)(!1),f=Object(i.a)(m,2),p=f[0],h=f[1],v=Object(a.useState)(!1),g=Object(i.a)(v,2),y=g[0],b=g[1];return r.a.createElement("textarea",{maxLength:o,required:l,name:n,ref:d({maxLength:o}),defaultValue:"",className:y?"empty":"",onFocus:function(){return h(!0)},onBlur:function(e){var t=e.target.value.trim();p&&l&&b(""!==t)},onChange:function(e){t&&t(e.target.value)},placeholder:u})},_r=$r;$r.defaultProps={placeholder:"",required:!1,onChange:void 0,maxLength:void 0};var eo=function(){var e=Object(je.a)(Oe.a.mark((function e(t){var n,a;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t).user.registerDevice=Pe(),e.next=4,Rt(vt,n);case 4:return a=e.sent,e.next=7,ve.dispatch(Ke(a));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),to=r.a.memo((function(e){var t=e.id,n=Object(_a.b)(),o=Object(a.useState)(),l=Object(i.a)(o,2),u=l[0],d=(l[1],Object(a.useState)()),m=Object(i.a)(d,2),f=m[0],p=m[1],h=Object(c.d)(s),v=function(){var e=Object(je.a)(Oe.a.mark((function e(n){var a,r,o,c,i,l,s;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.offName,r=n.username,o=n.password,c=n.repeatPassword,i=n.pronouns,l=n.description,(!h||a)&&r&&o&&c&&i){e.next=3;break}return e.abrupt("return");case 3:if(o===c){e.next=5;break}return e.abrupt("return");case 5:return s={image:u,user:{offName:a,username:r,password:o,pronouns:i,description:l?l.split("\n"):void 0}},e.prev=6,e.next=9,eo(s);case 9:return e.next=11,Tt(r,o);case 11:ve.dispatch(cn({id:t})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),p(e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(qr,{error:f,onClick:function(){ve.dispatch(on({windows:[{id:t,value:{type:se}}]}))},done:function(){return ve.dispatch(cn({id:t}))},title:"Register user"},r.a.createElement(_a.a,n,r.a.createElement("form",{onSubmit:n.handleSubmit(v)},h&&r.a.createElement(Zr,{required:!0,name:"offName",placeholder:"Out-of-game name"}),r.a.createElement(Zr,{required:!0,name:"username",placeholder:"Username"}),r.a.createElement(Kr,{multiple:!0,required:!0,name:"pronouns"},r.a.createElement("option",{value:""},"---Choose pronouns---"),r.a.createElement("option",{value:"they"},"They/Them"),r.a.createElement("option",{value:"she"},"She/Her"),r.a.createElement("option",{value:"he"},"He/Him"),r.a.createElement("option",{value:"it"},"It")),r.a.createElement(Zr,{required:!0,name:"password",placeholder:"Password",type:"password"}),r.a.createElement(Zr,{required:!0,shouldEqual:"password",name:"repeatPassword",placeholder:"Repeat password",type:"password"}),r.a.createElement(_r,{name:"description",placeholder:"Description"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(j,{type:"submit",onClick:function(){}},"Register")))))})),no=function(){var e=Object(je.a)(Oe.a.mark((function e(t){var n;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(ht,t);case 2:return n=e.sent,e.next=5,ve.dispatch(it(n));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ao=r.a.memo((function(e){var t=e.id,n=Object(_a.b)(),o=Object(a.useState)(),c=Object(i.a)(o,2),l=c[0],s=(c[1],function(){var e=Object(je.a)(Oe.a.mark((function e(n){var a,r,o;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.aliasName,r=n.pronouns,o=n.description,no({image:l,alias:{aliasName:a,pronouns:r,description:o}}).then((function(){return ve.dispatch(cn({id:t}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return r.a.createElement(qr,{title:"Create alias",onClick:function(){ve.dispatch(on({windows:[{id:t,value:{type:de}}]}))},done:function(){return ve.dispatch(cn({id:t}))}},r.a.createElement(_a.a,n,r.a.createElement("form",{onSubmit:n.handleSubmit(s)},r.a.createElement(Zr,{required:!0,name:"aliasName",placeholder:"Alias name"}),r.a.createElement(Kr,{multiple:!0,required:!0,name:"pronouns"},r.a.createElement("option",{value:""},"---Choose pronouns---"),r.a.createElement("option",{value:"they"},"They/Them"),r.a.createElement("option",{value:"she"},"She/Her"),r.a.createElement("option",{value:"he"},"He/Him"),r.a.createElement("option",{value:"it"},"It")),r.a.createElement(_r,{name:"description",placeholder:"Description"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(j,{stopPropagation:!0,type:"submit",onClick:function(){}},"Create")))))})),ro=function(){var e=Object(je.a)(Oe.a.mark((function e(t){var n,a,r;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction,a=Object(H.a)(Object(H.a)({},n),{},{ownerAliasId:Ue(ve.getState())||void 0}),e.next=4,Rt(wt,{transaction:a});case 4:return r=e.sent,e.next=7,ve.dispatch(ut(r));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oo=r.a.memo((function(e){var t=e.id,n=e.toWalletId,a=Object(_a.b)(),o=Object(c.d)(He),i=Object(c.d)(ga),l=Object(c.d)((function(e){return Yt(e,{ids:i})})),s=Object(c.d)((function(e){return Gt(e,{id:n})})),u=[],d=function(){var e=Object(je.a)(Oe.a.mark((function e(a){var r,o,c;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.note,o=a.amount,c=a.fromWalletId,ro({transaction:{note:r,amount:o,fromWalletId:c,toWalletId:n}}).then((function(){return ve.dispatch(cn({id:t}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.forEach((function(e){u.push(r.a.createElement("option",{key:e.objectId,value:e.objectId},e.teamName||e.aliasName||e.username))})),r.a.createElement(qr,{title:"Transfer to ".concat(s.teamName||s.aliasName||s.username),onClick:function(){ve.dispatch(on({windows:[{id:t,value:{type:me,toWalletId:n}}]}))},done:function(){return ve.dispatch(cn({id:t}))}},r.a.createElement(_a.a,a,r.a.createElement("form",{onSubmit:a.handleSubmit(d)},r.a.createElement("p",null,"You are making a transfer to ".concat(s.teamName||s.aliasName||s.username)),r.a.createElement("div",null,r.a.createElement("span",null,"From your wallet: "),r.a.createElement(Kr,{required:!0,defaultValue:o,name:"fromWalletId"},r.a.createElement("option",{value:""},"---Choose wallet---"),r.a.createElement(r.a.Fragment,null,u))),r.a.createElement(Zr,{required:!0,name:"amount",placeholder:"Amount"}),r.a.createElement(Zr,{name:"note",placeholder:"Note"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(j,{stopPropagation:!0,type:"submit",onClick:function(){}},"Transfer")))))})),co=(n(64),function(e,t){var n=t.id;return e.docFiles.get(n)}),io=Ft()([function(e){return e.docFiles}],(function(e){return Object(z.a)(e.values()).map((function(e){return{objectId:e.objectId,title:e.title}}))}))((function(){return"docFile-ids-names"}));function lo(){return(lo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function so(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var uo=r.a.createElement("rect",{x:3,y:11,width:18,height:11,rx:2,ry:2}),mo=r.a.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}),fo=function(e){var t=e.svgRef,n=e.title,a=so(e,["svgRef","title"]);return r.a.createElement("svg",lo({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-lock",ref:t},a),n?r.a.createElement("title",null,n):null,uo,mo)},po=r.a.forwardRef((function(e,t){return r.a.createElement(fo,lo({svgRef:t},e))})),ho=(n.p,n(65),r.a.memo((function(e){var t=e.docFileId,n=Object(c.d)((function(e){return co(e,{id:t})}));return r.a.createElement(Kt,{stopPropagation:!0,classNames:["DocFileItem"],key:n.objectId,onClick:function(){n.isLocked?console.log("clocked"):ve.dispatch(on({windows:[{id:oe,value:{type:oe,docFileId:t}}]}))}},n.title,n.isLocked&&r.a.createElement("div",{className:"lock"},r.a.createElement(po,null)))}))),vo=r.a.memo((function(){var e=Object(c.d)(io);return r.a.createElement(we,{dropdown:!0,checkWidth:!0,title:"Documents"},e.sort((function(e,t){var n=e.title.toLowerCase(),a=t.title.toLowerCase();return n>a?1:n<a?-1:0})).map((function(e){var t=e.objectId;return r.a.createElement(ho,{key:t,docFileId:t})})))})),go=(n(66),r.a.memo((function(e){var t=e.docFileId,n=Object(c.d)((function(e){return co(e,{id:t})})),a=Object(c.d)((function(e){return Gt(e,{id:n.ownerAliasId||n.ownerId})}));return r.a.createElement("div",{className:"DocFileViewer"},r.a.createElement("h1",{className:"title"},n.title),r.a.createElement("div",{className:"info"},r.a.createElement("p",{className:"author"},"Author: ".concat(a.teamName||a.aliasName||a.username)),r.a.createElement("p",{className:"code"},"Code: ".concat(n.code)),r.a.createElement("p",{className:"public"},"Public: ".concat(n.isPublic?"Yes":"No"))),r.a.createElement("div",{className:"text"},n.text.join("\n")))}))),yo=function(e){var t=e.id,n=e.docFileId,o=Object(a.useState)(),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(c.d)((function(e){return co(e,{id:n})}));Object(a.useEffect)((function(){n&&s!==n&&u(n)}),[n]);var m=Object(a.useCallback)((function(){ve.dispatch(on({windows:[{id:t,value:{type:oe}}]}))}),[]),f=Object(a.useCallback)((function(){return ve.dispatch(cn({id:t}))}),[t]),p=Object(a.useCallback)((function(e){return u(e)}),[]),h=Object(a.useCallback)((function(){return ve.dispatch(on({windows:[{id:fe,value:{type:fe}}]}))}));return r.a.createElement(fa,{done:f,classNames:["DocFile"],title:"".concat(d?"Document: ".concat(d.title):"Documents"),onClick:m,menu:r.a.createElement(r.a.Fragment,null,r.a.createElement(Dr,null,r.a.createElement(Kt,{stopPropagation:!0,onClick:h,key:"createDocFile"},"Create document")),r.a.createElement(vo,{onChange:p}))},s&&r.a.createElement(go,{key:"viewer",docFileId:s}))},bo=r.a.memo(yo);yo.defaultProps={docFileId:void 0};var wo=function(){var e=Object(je.a)(Oe.a.mark((function e(t){var n,a,r,o;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.docFile,a=t.images,r=Object(H.a)(Object(H.a)({},n),{},{code:""!==n.code?n.code:void 0,ownerAliasId:Ue(ve.getState())||void 0,text:n.text.split("\n")}),e.next=4,Rt(bt,{docFile:r,images:a});case 4:return o=e.sent,e.next=7,ve.dispatch(mt({docFiles:[o.docFile]}));case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Eo=(n(67),r.a.memo((function(e){var t=e.id,n=Object(_a.b)(),o=Object(a.useState)(),c=Object(i.a)(o,2),l=c[0],s=(c[1],function(){var e=Object(je.a)(Oe.a.mark((function e(n){var a,r,o,c;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.title,r=n.text,o=n.code,c=n.isPublic,wo({images:l?[l]:void 0,docFile:{title:a,text:r,code:o,isPublic:c}}).then((function(){return ve.dispatch(cn({id:t}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return r.a.createElement(qr,{classNames:["CreateDocFileDialog"],title:"Create document",onClick:function(){ve.dispatch(on({windows:[{id:t,value:{type:fe}}]}))},done:function(){return ve.dispatch(cn({id:t}))}},r.a.createElement(_a.a,n,r.a.createElement("form",{onSubmit:n.handleSubmit(s)},r.a.createElement("div",{className:"identity"},r.a.createElement("span",null,"You are:"),r.a.createElement(Zn,null)),r.a.createElement("div",{className:"public"},r.a.createElement(Zr,{type:"checkbox",name:"isPublic"}),r.a.createElement("span",null,"Do you want it to be available to the public? (A user with the right code can always access the document)")),r.a.createElement(Zr,{required:!0,maxLength:40,name:"title",placeholder:"Title"}),r.a.createElement(Zr,{name:"code",placeholder:"Code"}),r.a.createElement(_r,{required:!0,maxLength:3500,name:"text",placeholder:"Text"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(j,{stopPropagation:!0,type:"submit",onClick:function(){}},"Create")))))}))),Oo=r.a.memo((function(){var e=Object(c.d)(Hr),t=[];return e.forEach((function(e,n){var a=e.type;a===ae?t.push(r.a.createElement(Br,{key:n,id:n,roomId:e.roomId})):a===ne?t.push(r.a.createElement(Oa,{key:n,id:n})):a===re?t.push(r.a.createElement(Sa,{key:n,id:n})):a===oe?t.push(r.a.createElement(bo,{key:n,id:n,docFileId:e.docFileId})):a===ce?t.push(r.a.createElement(Vr,{key:n,id:n,identityId:e.identityId})):a===ie?t.push(r.a.createElement(Gr,{key:n,id:n})):a===ue?t.push(r.a.createElement(Xr,{key:n,id:n})):a===se?t.push(r.a.createElement(to,{key:n,id:n})):a===le?t.push(r.a.createElement(Jr,{key:n,id:n,roomId:e.roomId})):a===de?t.push(r.a.createElement(ao,{key:n,id:n})):a===me?t.push(r.a.createElement(oo,{key:n,id:n,toWalletId:e.toWalletId})):a===fe&&t.push(r.a.createElement(Eo,{key:n,id:n}))})),r.a.createElement("div",{id:"MainWindow"},t)}));var jo=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xn,null),r.a.createElement(Gn,null),r.a.createElement(Oo,null))},Io=(n(68),n(69));Object(o.render)(r.a.createElement(c.a,{store:ve},r.a.createElement(jo,null)),document.getElementById("root")),Io.ElementQueries.listen()}]),[[31,1,2]]]);
//# sourceMappingURL=main.b6ea8a6e.chunk.js.map