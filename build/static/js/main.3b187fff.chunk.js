(this.webpackJsonproleterminal=this.webpackJsonproleterminal||[]).push([[0],Array(31).concat([function(e,t,n){e.exports=n(85)},,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),c=n(1),i=n(29),l=n(3),u=function(e){return e>9?"".concat(e):"0".concat(e)},s=function(e){return e.config.get("requireOffName")},d=function(e){return e.config.get("publicRoomId")},m=function(e){return e.config.get("allowedImages")},f=function(e){return e.config.get("gpsTracking")},p=function(e){return e.config.get("permissions")},h=function(e){return e.config.get("newsRoomId")},v=function(e){return e.config.get("newsCost")},g=function(e,t){var n=t.date,a=t.offset,r=t.lockDate,o=new Date(n),c={},i=e.config,l=i.yearModification,s=i.dayModification;return a&&o.setHours(o.getHours()+a),r||Number.isNaN(l)||(l&&!Number.isNaN(l)&&o.setFullYear(o.getFullYear()+parseInt(l,10)),s&&!Number.isNaN(s)&&o.setDate(o.getDate()+parseInt(s,10))),c.mins=u(o.getMinutes()),c.hours=u(o.getHours()),c.seconds=u(o.getSeconds()),c.month=u(o.getMonth()+1),c.day=u(o.getDate()),c.year=o.getFullYear(),c.halfTime="".concat(c.hours,":").concat(c.mins),c.fullTime="".concat(c.halfTime,":").concat(c.seconds),c.halfDate="".concat(c.day,"/").concat(c.month),c.fullDate="".concat(c.halfDate,"/").concat(c.year),c.fullStamp="".concat(c.halfTime," ").concat(c.fullDate),c};function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var E=r.a.createElement("circle",{cx:12,cy:12,r:10}),O=r.a.createElement("polyline",{points:"12 6 12 12 16 14"}),w=function(e){var t=e.svgRef,n=e.title,a=b(e,["svgRef","title"]);return r.a.createElement("svg",y({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-clock",ref:t},a),n?r.a.createElement("title",null,n):null,E,O)},j=r.a.forwardRef((function(e,t){return r.a.createElement(w,y({svgRef:t},e))})),I=(n.p,n(10)),k=(n(41),r.a.forwardRef((function(e,t){var n=e.onClick,a=e.children,o=e.disabled,c=e.stopPropagation,i=e.className,l=void 0===i?"":i,u=e.type,s=void 0===u?"button":u;return r.a.createElement("button",{ref:t,className:"Button ".concat(l),disabled:o,type:s,onClick:function(e){n(e),c&&e.stopPropagation()}},a)}))),x=r.a.memo(k);k.propTypes={onClick:I.func.isRequired,children:I.node.isRequired,type:Object(I.oneOf)(["button","submit"]),disabled:I.bool,className:I.string,stopPropagation:I.bool},k.defaultProps={type:"button",disabled:void 0,className:"",stopPropagation:void 0};var C=n(12),N=n(27),S="aliases",L="devices",R="docFiles",A="forums",T="forumPosts",P="forumThreads",D="gameCodes",M="invitations",W="messages",F="rooms",G="simpleMsgs",H="teams",B="transactions",U="users",Y="wallets",V=n(4),z=n(6),q="update",J="create",K="remove",Q=function(e,t){var n=new Map(Object(z.a)(e)),a=t.type,r=t.payload,o=r.changeType,c=r[a];switch(o){case J:return n.set(c.objectId,c),n;case q:var i=n.get(c.objectId)||{},l=Object(V.a)(Object(V.a)({},i),c);return i===l?e:(n.set(c.objectId,l),n);case K:return n.has(c.objectId)?(n.delete(c.objectId),n):e;default:return e}},X=function(e,t){var n=t.type,a=t.payload,r=a.reset,o=a.changeType,c=r?new Map:new Map(Object(z.a)(e)),i=a[n];switch(o){case J:return i.forEach((function(e){return c.set(e.objectId,e)})),c;case q:return i.forEach((function(e){var t=c.get(e.objectId)||{},n=Object(V.a)(Object(V.a)({},t),e);t!==n&&c.set(e.objectId,n)})),c;case K:return i.forEach((function(e){return c.delete(e.objectId)})),c;default:return e}};var Z="chat",$="whisper",_="news";var ee="online",te="offline",ne="reconnecting";var ae=0,re=1,oe=4,ce=function(e){var t=e.objectToAccess,n=e.toAuth;if(!t||!n)return{canSee:!1,hasFullAccess:!1,hasAccess:!1};var a=t.ownerId,r=t.ownerAliasId,o=t.teamId,c=t.isPublic,i=t.visibility,l=t.teamIds,u=void 0===l?[]:l,s=t.userIds,d=void 0===s?[]:s,m=t.userAdminIds,f=void 0===m?[]:m,p=t.teamAdminIds,h=void 0===p?[]:p,v=n.hasFullAccess,g=n.partOfTeams,y=void 0===g?[]:g,b=n.accessLevel,E=void 0===b?ae:b,O=n.objectId,w=n.teamIds,j=void 0===w?[]:w,I=n.aliases,k=void 0===I?[]:I,x=r&&k.includes(r),C=o&&y.includes(o),N=d.concat([a]).includes(O),S=C||u.find((function(e){return j.includes(e)})),L=x||k.find((function(e){return d.includes(e)})),R=f.includes(O),A=x||k.find((function(e){return f.includes(e)})),T=C||h.find((function(e){return j.includes(e)})),P=a===O||v||E>=oe;return{canSee:P||c||N||S||L||E>=i,hasAccess:P||c||N||S||L,hasFullAccess:P||R||T||A}},ie=new Map;ie.set("broadcastId","111111111111111111111116"),ie.set("publicRoomId","111111111111111111111110"),ie.set("newsRoomId","111111111111111111111114"),ie.set("defaultForum","111111111111111111111120"),ie.set("defaultLanguage","en"),ie.set("centerCoordinates",{longitude:0,latitude:0}),ie.set("cornerOneCoordinates",{longitude:0,latitude:0}),ie.set("cornerTwoCoordinates",{longitude:0,latitude:0}),ie.set("defaultZoomLevel",15),ie.set("yearModification",0),ie.set("dayModification",0),ie.set("requireOffName",!1),ie.set("activateTermination",!1),ie.set("allowedImages",{CHAT:!1,PROFILE:!1,DOCFILE:!1}),ie.set("newsCost",0),ie.set("permissions",{CreateAlias:{name:"CreateAlias",accessLevel:re},CreateUser:{name:"CreateUser",accessLevel:ae}}),ie.set("anonymousUser",{accessLevel:ae,followingRooms:["111111111111111111111110"],objectId:"-1",isAnonymous:!0,systemConfig:{},aliases:[]}),ie.set("systemUser",{objectId:"222222222222222222222220",username:"system"});var le={WALLET:"Wallet",CHAT:"Chat",WORLDMAP:"Map",DOCFILE:"Files",NEWS:"News",DIALOGIDENTITY:"User",DIALOGCREATEROOM:"New room",DIALOGREMOVEROOM:"Remove room",DIALOGREGISTER:"Register",DIALOGLOGIN:"Login",DIALOGCREATEALIAS:"New alias",DIALOGCREATETRANSACTION:"Transfer",DIALOGCREATEDOCFILE:"New file",DIALOGCREATENEWS:"New article",DIALOGJOINROOM:"Join room",DIALOGCONFIGSYSTEM:"Config system"},ue=new Map;var se="help",de={mode:"default",target:""};var me=Object(C.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"user"===t.type?Q(e,t):t.type===U?X(e,t):e},aliases:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"alias"===t.type?Q(e,t):t.type===S?X(e,t):e},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"message"===t.type?Q(e,t):t.type===W?X(e,t):e},online:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;if("online"===t.type){var n=t.payload,a=n.online;return a}return e},rooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"room"===t.type?Q(e,t):t.type===F?X(e,t):e},userId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1",t=arguments.length>1?arguments[1]:void 0;if("userId"===t.type){var n=t.payload,a=n.reset,r=n.userId;return a?"-1":r}return e},positions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"position"===t.type?Q(e,t):"positions"===t.type?X(e,t):e},transactions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"transaction"===t.type?Q(e,t):t.type===B?X(e,t):e},wallets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"wallet"===t.type?Q(e,t):t.type===Y?X(e,t):e},config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;if("config"===t.type){var n=t.payload,a=n.entries,r=new Map(Object(z.a)(e));return a.forEach((function(e){return r.set(e[0],e[1])})),r}return e},aliasId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;if("aliasId"===t.type){var n=t.payload,a=n.reset,r=n.aliasId;return a?null:r}return e},windowOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;if("windowOrder"===t.type){var n=t.payload,a=n.id,r=n.value,o=n.changeType,c=new Map(Object(z.a)(e));if(o===q){if(c.size>0&&c.get(a)&&c.get(a).index===c.size){var i=c.get(a);if(Object.keys(r).length===Object.keys(i).length-1&&Object.keys(r).every((function(e){return i[e]===r[e]})))return e}var u=Object(V.a)({},r);if(c.get(a)){var s=Object(z.a)(c.entries()).sort((function(e,t){var n=e[1].index,a=t[1].index;return n>a?1:n<a?-1:0})),d=s.splice(s.findIndex((function(e){return Object(l.a)(e,1)[0]===a})),1),m=Object(l.a)(d,1),f=m[0];f[1]=Object(V.a)({},u),s.push(f),console.log(s),s.forEach((function(e,t){var n=Object(l.a)(e,2),a=n[0],r=n[1],o=Object(V.a)(Object(V.a)({},r),{},{index:t+1});c.set(a,o)}))}else u.index=c.size+1,c.set(a,u);return c}return o===K?(c.delete(a),c):e}if("windowOrders"===t.type){var p=t.payload,h=p.windows,v=new Map(Object(z.a)(e));return h.forEach((function(e){var t=e.id,n=e.value;return v.set(t,n)})),v}return e},teams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"team"===t.type?Q(e,t):t.type===H?X(e,t):e},docFiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"docFile"===t.type?Q(e,t):t.type===R?X(e,t):e},mode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;if("mode"===t.type){var n=t.payload,a=n.mode,r=n.target,o=Object(V.a)({},e);return!a&&r&&e.target===r?e:(r&&a!==e.mode?o.target=r:o.target=de.target,a===e.mode?o.mode=de.mode:a&&(o.mode=a),o)}return e}}),fe=Object(C.d)(me,Object(C.a)(N.a)),pe=(n(42),r.a.memo((function(){var e=Object(a.useState)(new Date),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!1),i=Object(l.a)(c,2),u=i[0],s=i[1],d=g(fe.getState(),{date:n});Object(a.useEffect)((function(){!function e(){setTimeout((function(){o(new Date),e()}),1e3)}()}),[]);var m=Object(a.useCallback)((function(){return s(!u)}),[u]);return r.a.createElement("div",{key:"clock",className:"Clock"},r.a.createElement(x,{className:"icon ".concat(u?"active":""),onClick:m},r.a.createElement(j,null)),r.a.createElement(x,{onClick:m,className:"time ".concat(u?"":"hide")},d.halfTime))})));function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ve(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ge=r.a.createElement("circle",{cx:12,cy:12,r:10}),ye=r.a.createElement("polyline",{points:"16 12 12 8 8 12"}),be=r.a.createElement("line",{x1:12,y1:16,x2:12,y2:8}),Ee=function(e){var t=e.svgRef,n=e.title,a=ve(e,["svgRef","title"]);return r.a.createElement("svg",he({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-up-circle",ref:t},a),n?r.a.createElement("title",null,n):null,ge,ye,be)},Oe=r.a.forwardRef((function(e,t){return r.a.createElement(Ee,he({svgRef:t},e))}));n.p;function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function je(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Ie=r.a.createElement("circle",{cx:12,cy:12,r:10}),ke=r.a.createElement("polyline",{points:"8 12 12 16 16 12"}),xe=r.a.createElement("line",{x1:12,y1:8,x2:12,y2:16}),Ce=function(e){var t=e.svgRef,n=e.title,a=je(e,["svgRef","title"]);return r.a.createElement("svg",we({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-down-circle",ref:t},a),n?r.a.createElement("title",null,n):null,Ie,ke,xe)},Ne=r.a.forwardRef((function(e,t){return r.a.createElement(Ce,we({svgRef:t},e))})),Se=(n.p,n(43),r.a.forwardRef((function(e,t){var n=e.children,o=e.title,c=e.observe,i=e.startRevealed,u=void 0!==i&&i,s=e.alwaysExpanded,d=void 0!==s&&s,m=e.checkWidth,f=void 0!==m&&m,p=e.dropdown,h=void 0!==p&&p,v=e.className,g=void 0===v?"":v,y=Object(a.useRef)(),b=Object(a.useRef)(),E=Object(a.useRef)(null),O=Object(a.useRef)(null),w=Object(a.useState)(!u&&!d&&"undefined"!==typeof o),j=Object(l.a)(w,2),I=j[0],k=j[1],C=[],N=["List"].concat([g]),S=function(e){h&&E.current&&(!f||!O.current||O.current.offsetWidth<600)&&(e.target!==E.current&&E.current.parentElement.contains(e.target)||k(!0))},L=function(e){var t=e.direction;"bottom"===t&&E.current.lastElementChild?E.current.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"}):"top"===t&&E.current.firstElementChild&&E.current.firstElementChild.scrollIntoView({behavior:"smooth",block:"start"})};return Object(a.useEffect)((function(){return E.current&&c&&(y.current=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?b.current.classList.add("hide"):b.current.classList.remove("hide")}))}),{root:E.current,rootMargin:"50px",threshold:1}),"upper"===c&&E.current.firstElementChild&&y.current.observe(E.current.firstElementChild),"lower"===c&&E.current.lastElementChild&&y.current.observe(E.current.lastElementChild)),function(){y.current&&y.current.disconnect()}}),[]),Object(a.useEffect)((function(){y.current&&(y.current.disconnect(),"upper"===c&&E.current.firstElementChild&&y.current.observe(E.current.firstElementChild),"lower"===c&&E.current.lastElementChild&&y.current.observe(E.current.lastElementChild))}),[n]),Object(a.useEffect)((function(){h&&(I?document.removeEventListener("mousedown",S,!1):document.addEventListener("mousedown",S,!1))}),[I]),I?C.push("hide"):N.push("expanded"),h&&C.push("dropdown"),r.a.createElement("div",{key:"List",className:N.join(" ")},o&&r.a.createElement("header",{role:"button",tabIndex:0,key:"listHeader",className:"toggle ".concat(d?"":"clickable"),onClick:function(){d||k(!I)}},o),c&&"upper"===c&&r.a.createElement(x,{key:"upper",className:"upper hide",ref:b,onClick:function(){return L({direction:"top"})}},r.a.createElement(Oe,null)),r.a.createElement("ul",{ref:function(e){E.current=e,t&&(t.current=e),e&&(O.current=e.closest(".Window"))},key:"listElem",className:"".concat(C.join(" ")),onClick:function(e){h&&(S(e),e.stopPropagation())}},n),c&&"lower"===c&&r.a.createElement(x,{key:"lower",className:"lower hide",ref:b,onClick:function(){return L({direction:"bottom"})}},r.a.createElement(Ne,null)))}))),Le=r.a.memo(Se);Se.defaultProps={className:"",children:void 0,title:void 0,dropdown:!1,checkWidth:!1,alwaysExpanded:!1,observe:void 0,startRevealed:void 0};var Re=n(2),Ae=n.n(Re),Te=n(5),Pe="deviceId",De="token",Me="userId",We="aliasId",Fe=function(e,t){"string"===typeof t?localStorage.setItem(e,t):localStorage.setItem(e,function(e){return JSON.stringify(e)}(t))},Ge=function(e){return localStorage.getItem(e)},He=function(e){return localStorage.removeItem(e)},Be=function(){return He(We)},Ue=function(){He(De),He(Me),Be()},Ye=function(){return Ge(Pe)},Ve=function(){return Ge(De)},ze=function(e){var t=e.userId,n=e.token;return Fe(De,n),function(e){Fe(Me,e)}(t),{type:"userId",payload:{userId:t}}},qe=function(){return Ue(),function(e){Object(c.b)((function(){e({type:"userId",payload:{reset:!0}}),e({type:"aliasId",payload:{reset:!0}})}))}},Je=function(e){return e.online===ee},Ke=function(){return{type:"online",payload:{online:ee}}},Qe=function(e){return e.aliasId},Xe=function(e){return e.userId},Ze=function(e){return Qe(e)||Xe(e)},$e=function(e){var t=e.wallets;return 1===t.length?{type:"wallet",payload:{wallet:t[0],changeType:q}}:{type:Y,payload:{wallets:t,changeType:q}}},_e=function(e){var t=e.wallets;return 1===t.length?{type:"wallet",payload:{wallet:t[0],changeType:J}}:{type:Y,payload:{wallets:t,changeType:J}}},et=function(e){var t=e.transactions;return 1===t.length?{type:"transaction",payload:{transaction:t[0],changeType:J}}:{type:B,payload:{transactions:t,changeType:J}}},tt=function(e){var t=e.transaction,n=e.wallet;return function(e){Object(c.b)((function(){e(et({transactions:[t]})),e($e({wallets:[n]}))}))}},nt=function(e){var t=e.messages;return 1===t.length?{type:"message",payload:{changeType:J,message:t[0]}}:{type:W,payload:{messages:t,changeType:J}}},at=function(e){var t=e.message,n=e.transaction,a=e.wallet;return function(){var e=Object(Te.a)(Ae.a.mark((function e(r){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){r(nt({messages:[t]})),r(et({transactions:[n]})),r($e({wallets:[a]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},rt="chatMsg",ot="whisper",ct=function(e){var t=e.forums;return 1===t.length?{type:"forum",payload:{forum:t[0],changeType:J}}:{type:A,payload:{forums:t,changeType:J}}},it=function(e){var t=e.gameCodes;return 1===t.length?{type:"gameCode",payload:{gameCode:t[0],changeType:J}}:{type:D,payload:{gameCodes:t,changeType:J}}},lt=function(e){var t=e.users;return 1===t.length?{type:"user",payload:{user:t[0],changeType:q}}:{type:U,payload:{users:t,changeType:q}}},ut=function(e){var t=e.users;return 1===t.length?{type:"user",payload:{user:t[0],changeType:J}}:{type:U,payload:{users:t,changeType:J}}},st=function(e){var t=e.user,n=e.wallet,a=e.room,r=e.forum,o=e.gameCode;return function(){var e=Object(Te.a)(Ae.a.mark((function e(i){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){i(ut({users:[t]})),i(dt({rooms:[a]})),i(_e({wallets:[n]})),i(ct({forums:[r]})),i(it({gameCodes:[o]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},dt=function(e){var t=e.rooms;return 1===t.length?{type:"room",payload:{changeType:J,room:t[0]}}:{type:F,payload:{rooms:t,changeType:J}}},mt=function(e){var t=e.rooms;return 1===t.length?{type:"room",payload:{changeType:q,room:t[0]}}:{type:F,payload:{rooms:t,changeType:J}}},ft=function(e){var t=e.rooms;return 1===t.length?{type:"room",payload:{changeType:K,room:t[0]}}:{type:F,payload:{rooms:t,changeType:K}}},pt=function(e){var t=e.room,n=e.user;return function(e){Object(c.b)((function(){e(mt({rooms:[t]})),e(lt({users:[n]}))}))}},ht="room",vt="followRoom",gt="user",yt=function(e){var t=e.aliasId;return t?(Fe(We,t),{type:"aliasId",payload:{aliasId:t}}):(Be(),{type:"aliasId",payload:{reset:!0}})},bt=function(e){var t=e.aliases;return 1===t.length?{type:"alias",payload:{alias:t[0],changeType:J}}:{type:S,payload:{aliases:t,changeType:J}}},Et=function(e){var t=e.alias,n=e.wallet,a=e.room;return function(){var e=Object(Te.a)(Ae.a.mark((function e(r){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){r(bt({aliases:[t]})),r(dt({rooms:[a]})),r(_e({wallets:[n]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ot="alias",wt="wallet",jt="transaction",It=function(e){var t=e.docFiles;return 1===t.length?{type:"docFile",payload:{docFile:t[0],changeType:J}}:{type:R,payload:{docFiles:t,changeType:J}}},kt="docFile",xt=function(){var e="undefined"!==typeof ioUri?ioUri:"/";return window.io(e,{forceNew:!0})}(),Ct="createAlias",Nt="createUser",St="sendMessage",Lt="createRoom",Rt="createDocFile",At="createTransaction",Tt="followRoom",Pt="getMessagesByRoom",Dt="removeRoom",Mt="updateUser",Wt={ALIASES:"getAliases",USERS:"getUsers",MESSAGES:"getMessages",ROOMS:"getRooms",INVITATIONS:"getInvitations",DOCFILES:"getDocFiles",FORUMS:"getForums",FORUMPOSTS:"getForumPosts",FORUMTHREADS:"getForumThreads",GAMECODES:"getGameCodes",SIMPLEMSGS:"getSimpleMsgs",TEAMS:"getTeams",TRANSACTIONS:"getTransactions",WALLETS:"getWallets",DEVICES:"getDevices"},Ft="login",Gt="reconnect",Ht="startup",Bt="disconnect",Ut=function(){var e=Object(Te.a)(Ae.a.mark((function e(t){var n,a;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.event,a=t.callback,xt.on(n,(function(e){console.log(n,e),a(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yt=function(){fe.getState().online!==ne&&(xt.disconnect(),xt.connect())},Vt=function(){var e=Object(Te.a)(Ae.a.mark((function e(t){var n,a=arguments;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",new Promise((function(e,a){var r=n;r.token=Ve(),Je(fe.getState())||Yt(),xt.emit(t,r,(function(t){var n=t.error,r=t.data;n?a(n):e(r)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Ut({event:Gt,callback:function(){Xe(fe.getState)&&Vt("updateId",{}).then((function(){fe.dispatch(Ke())})).catch((function(e){console.log(e),fe.dispatch(qe())}))}}),Ut({event:Ht,callback:function(e){var t,n=e.data,a=Ge(Me),r=Ve(),o=Ge(We);a&&r&&fe.dispatch(ze({userId:a,token:r})),o&&fe.dispatch(yt({aliasId:o})),Ye()||Fe(Pe,"1234567890123456"),fe.dispatch((t=n,function(e){Object(c.b)((function(){e({type:"config",payload:{entries:Object.entries(t)}}),e(Ke())}))})),(a||r)&&Vt("updateId",{}).then((function(){fe.dispatch(Ke())})).catch((function(e){console.log(e),fe.dispatch(qe())}))}}),Ut({event:Bt,callback:function(){fe.dispatch({type:"online",payload:{online:te}}),Yt()}}),Ut({event:rt,callback:function(e){var t=e.data,n=e.error;if(t&&t.message){var a=t.message;t.changeType===J&&fe.dispatch(nt({messages:[a]}))}else console.log(rt,n,t)}}),Ut({event:ot,callback:function(e){var t=e.data,n=e.error;if(t&&t.message){var a=t.message;t.changeType===J&&fe.dispatch(nt({messages:[a]}))}else console.log(ot,n,t)}}),Ut({event:ht,callback:function(e){var t=e.error,n=e.data;if(n&&n.room){var a=n.room,r=n.changeType;r===J?fe.dispatch(dt({rooms:[a]})):r===q?fe.dispatch(mt({rooms:[a]})):r===K&&fe.dispatch(ft({rooms:[a]}))}else console.log(ht,t,n)}}),Ut({event:vt,callback:function(e){var t=e.error,n=e.data;n&&n.room&&n.user?fe.dispatch(function(){var e=Object(Te.a)(Ae.a.mark((function e(t){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){t(mt({rooms:[n.room]})),t(lt({users:[n.user]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):console.log(vt,t,n)}}),Ut({event:gt,callback:function(e){var t=e.error,n=e.data;if(n&&n.user){var a=n.user,r=n.changeType;r===J?fe.dispatch(ut({users:[a]})):r===q&&fe.dispatch(lt({users:[a]}))}else console.log(gt,t,n)}}),Ut({event:Ot,callback:function(e){var t=e.error,n=e.data;if(n&&n.alias){var a=n.alias,r=n.changeType;r===J?fe.dispatch(bt({aliases:[a]})):r===q&&fe.dispatch(function(e){var t=e.aliases;return 1===t.length?{type:"alias",payload:{alias:t[0],changeType:q}}:{type:S,payload:{aliases:t,changeType:q}}}({aliases:[a]}))}else console.log(Ot,t,n)}}),Ut({event:wt,callback:function(e){var t=e.error,n=e.data;if(n&&n.wallet){var a=n.wallet,r=n.changeType;r===J?fe.dispatch(_e({wallets:[a]})):r===q&&fe.dispatch($e({wallets:[a]}))}else console.log(wt,t,n)}}),Ut({event:jt,callback:function(e){var t=e.error,n=e.data;if(n&&n.transaction&&(n.changeType===q||n.wallet)){var a=n.transaction,r=n.changeType;r===J?fe.dispatch(tt(n)):r===q&&fe.dispatch(function(e){var t=e.transactions;return 1===t.length?{type:"transaction",payload:{transaction:t[0],changeType:q}}:{type:B,payload:{transactions:t,changeType:q}}}({transactions:[a]}))}else console.log(jt,t,n)}}),Ut({event:kt,callback:function(e){var t=e.error,n=e.data;if(n&&n.docFile){var a=n.docFile,r=n.changeType;r===J?fe.dispatch(It({docFiles:[a]})):r===q&&fe.dispatch(function(e){var t=e.docFiles;return 1===t.length?{type:"docFile",payload:{docFile:t[0],changeType:q}}:{type:R,payload:{docFiles:t,changeType:q}}}({docFiles:[a]}))}else console.log(kt,t,n)}});var zt=function(){var e=Object(Te.a)(Ae.a.mark((function e(t,n){var a,r,o;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vt(Ft,{user:{username:t,password:n}});case 2:return a=e.sent,r=a.user,o=a.token,fe.dispatch(ze({userId:r.objectId,token:o})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),qt=function(){var e=Object(Te.a)(Ae.a.mark((function e(){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fe.dispatch(qe());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Jt=n(13),Kt=n(8),Qt=n.n(Kt),Xt=function(e){return e.aliases},Zt=function(e,t){var n=t.id;return e.aliases.get(n)},$t=function(e){return e.teams},_t=Qt()([$t,function(e,t){return t.ids}],(function(e,t){var n=new Map;return t.forEach((function(t){return n.set(t,e.get(t))})),n}))((function(e,t){var n=t.ids;return"teams-".concat(n.join(n))})),en=function(e){return e.users},tn=function(e,t){var n=t.id;return e.users.get(n)},nn=function(e){return e.users.get(Xe(e))||function(e){return e.config.get("anonymousUser")}(e)},an=Object(Jt.createSelector)([nn],(function(e){return e.accessLevel})),rn=Qt()([en,Xt],(function(e,t){return[].concat(Object(z.a)(e.values()),Object(z.a)(t.values()))}))((function(){return"identities"})),on=Qt()([en,Xt,function(e,t){return t.ids}],(function(e,t,n){var a=new Map;return n.forEach((function(n){return a.set(n,e.get(n)||t.get(n))})),a}))((function(e,t){var n=t.ids;return"identities-".concat(n.join(" "))})),cn=Qt()([en,Xt,$t,function(e,t){return t.ids}],(function(e,t,n,a){var r=new Map;return a.forEach((function(a){return r.set(a,n.get(a)||e.get(a)||t.get(a))})),r}))((function(e,t){var n=t.ids;return"identities-teams-".concat(n.join(" "))})),ln=Object(Jt.createSelector)([tn,Zt],(function(e,t){return e||t})),un=Object(Jt.createSelector)([tn,Zt,function(e,t){var n=t.id;return e.teams.get(n)}],(function(e,t,n){return n||t||e})),sn=Qt()([rn,Xe],(function(e,t){return e.filter((function(e){return e.objectId!==t&&e.ownerId!==t&&!e.userIds.includes(t)})).map((function(e){return{objectId:e.objectId,name:e.aliasName||e.username}}))}))((function(){return"other-identity-ids"})),dn=Qt()([rn,Xe],(function(e,t){return e.filter((function(e){return e.objectId===t||e.ownerId===t||e.userIds.includes(t)}))}))((function(){return"current-identities"})),mn=(n(45),r.a.forwardRef((function(e,t){var n=e.children,o=e.onClick,c=e.elementId,i=e.scrollTo,l=e.stopPropagation,u=void 0!==l&&l,s=e.className,d=void 0===s?"":s,m=Object(a.useRef)(null);Object(a.useLayoutEffect)((function(){i&&m.current&&(m.current.scrollIntoView({behavior:"smooth",block:"nearest"}),setTimeout((function(){return m.current.scrollIntoView({behavior:"smooth",block:"nearest"})}),300))}),[i]);var f=Object(a.useCallback)((function(e){o&&o(e),"UL"===e.target.parentElement.tagName&&e.target.parentElement.click(),u&&e.stopPropagation()}),[]);return r.a.createElement("li",{ref:function(e){t&&(t.current=e),m.current=e},id:c,className:"ListItem ".concat(o?"clickable":""," ").concat(d),onClick:f},n)}))),fn=r.a.memo(mn);function pn(){return(pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function hn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}mn.defaultProps={onClick:void 0,className:"",stopPropagation:!1,elementId:void 0,children:void 0,scrollTo:!1};var vn=r.a.createElement("line",{x1:3,y1:12,x2:21,y2:12}),gn=r.a.createElement("line",{x1:3,y1:6,x2:21,y2:6}),yn=r.a.createElement("line",{x1:3,y1:18,x2:21,y2:18}),bn=function(e){var t=e.svgRef,n=e.title,a=hn(e,["svgRef","title"]);return r.a.createElement("svg",pn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-menu",ref:t},a),n?r.a.createElement("title",null,n):null,vn,gn,yn)},En=r.a.forwardRef((function(e,t){return r.a.createElement(bn,pn({svgRef:t},e))})),On=(n.p,function(e){return e.mode}),wn=function(e){return{type:"mode",payload:{mode:e.mode,target:e.target}}},jn=function(e){return{type:"mode",payload:{target:e.target}}},In=function(e){var t=e.windows;if(1===t.length){var n=Object(l.a)(t,1)[0],a=n.value,r=n.id;return function(e){Object(c.b)((function(){On(fe.getState()).mode===se&&e(jn({target:r})),e({type:"windowOrder",payload:{id:r,value:a,changeType:q}})}))}}return{type:"windowOrders",payload:{windows:t,changeType:q}}},kn=function(e){return{type:"windowOrder",payload:{id:e.id,changeType:K}}},xn=r.a.memo((function(){var e=Object(c.d)(an),t=Object(c.d)(p),n=[];return e===t.CreateUser.accessLevel&&n.push(r.a.createElement(fn,{stopPropagation:!0,key:"register",onClick:function(){return fe.dispatch(In({windows:[{id:le.DIALOGREGISTER,value:{type:le.DIALOGREGISTER}}]}))}},"Create user")),e===ae&&n.push(r.a.createElement(fn,{stopPropagation:!0,key:"login",onClick:function(){return fe.dispatch(In({windows:[{id:le.DIALOGLOGIN,value:{type:le.DIALOGLOGIN}}]}))}},"Login")),e>=t.CreateAlias.accessLevel&&n.push(r.a.createElement(fn,{stopPropagation:!0,key:"alias",onClick:function(){return fe.dispatch(In({windows:[{id:le.DIALOGCREATEALIAS,value:{type:le.DIALOGCREATEALIAS}}]}))}},"Create alias")),e>=re&&(n.push(r.a.createElement(fn,{stopPropagation:!0,key:"settings",onClick:function(){return fe.dispatch(In({windows:[{id:le.DIALOGCONFIGSYSTEM,value:{type:le.DIALOGCONFIGSYSTEM}}]}))}},"Settings")),n.push(r.a.createElement(fn,{stopPropagation:!0,key:"logout",onClick:function(){qt()}},"Logout"))),r.a.createElement(Le,{dropdown:!0,title:r.a.createElement(En,null)},n)}));function Cn(){return(Cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Nn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Sn=r.a.createElement("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),Ln=function(e){var t=e.svgRef,n=e.title,a=Nn(e,["svgRef","title"]);return r.a.createElement("svg",Cn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-message-square",ref:t},a),n?r.a.createElement("title",null,n):null,Sn)},Rn=r.a.forwardRef((function(e,t){return r.a.createElement(Ln,Cn({svgRef:t},e))}));n.p;function An(){return(An=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Tn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Pn=r.a.createElement("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),Dn=r.a.createElement("line",{x1:8,y1:2,x2:8,y2:18}),Mn=r.a.createElement("line",{x1:16,y1:6,x2:16,y2:22}),Wn=function(e){var t=e.svgRef,n=e.title,a=Tn(e,["svgRef","title"]);return r.a.createElement("svg",An({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-map",ref:t},a),n?r.a.createElement("title",null,n):null,Pn,Dn,Mn)},Fn=r.a.forwardRef((function(e,t){return r.a.createElement(Wn,An({svgRef:t},e))}));n.p;function Gn(){return(Gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Hn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Bn=r.a.createElement("rect",{x:1,y:4,width:22,height:16,rx:2,ry:2}),Un=r.a.createElement("line",{x1:1,y1:10,x2:23,y2:10}),Yn=function(e){var t=e.svgRef,n=e.title,a=Hn(e,["svgRef","title"]);return r.a.createElement("svg",Gn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-credit-card",ref:t},a),n?r.a.createElement("title",null,n):null,Bn,Un)},Vn=r.a.forwardRef((function(e,t){return r.a.createElement(Yn,Gn({svgRef:t},e))}));n.p;function zn(){return(zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function qn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Jn=r.a.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),Kn=r.a.createElement("polyline",{points:"14 2 14 8 20 8"}),Qn=r.a.createElement("line",{x1:16,y1:13,x2:8,y2:13}),Xn=r.a.createElement("line",{x1:16,y1:17,x2:8,y2:17}),Zn=r.a.createElement("polyline",{points:"10 9 9 9 8 9"}),$n=function(e){var t=e.svgRef,n=e.title,a=qn(e,["svgRef","title"]);return r.a.createElement("svg",zn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-file-text",ref:t},a),n?r.a.createElement("title",null,n):null,Jn,Kn,Qn,Xn,Zn)},_n=r.a.forwardRef((function(e,t){return r.a.createElement($n,zn({svgRef:t},e))}));n.p;function ea(){return(ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ta(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var na=r.a.createElement("path",{d:"M4 11a9 9 0 0 1 9 9"}),aa=r.a.createElement("path",{d:"M4 4a16 16 0 0 1 16 16"}),ra=r.a.createElement("circle",{cx:5,cy:19,r:1}),oa=function(e){var t=e.svgRef,n=e.title,a=ta(e,["svgRef","title"]);return r.a.createElement("svg",ea({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-rss",ref:t},a),n?r.a.createElement("title",null,n):null,na,aa,ra)},ca=r.a.forwardRef((function(e,t){return r.a.createElement(oa,ea({svgRef:t},e))}));n.p;function ia(){return(ia=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function la(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ua=r.a.createElement("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),sa=r.a.createElement("polyline",{points:"2 17 12 22 22 17"}),da=r.a.createElement("polyline",{points:"2 12 12 17 22 12"}),ma=function(e){var t=e.svgRef,n=e.title,a=la(e,["svgRef","title"]);return r.a.createElement("svg",ia({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-layers",ref:t},a),n?r.a.createElement("title",null,n):null,ua,sa,da)},fa=r.a.forwardRef((function(e,t){return r.a.createElement(ma,ia({svgRef:t},e))})),pa=(n.p,function(e){return e.windowOrder}),ha=(n(46),r.a.memo((function(){var e=Object(c.d)(pa),t=Object(c.d)(an),n=[],o=Object(a.useCallback)((function(e){var t=e.id,n=e.value;return fe.dispatch(In({windows:[{id:t,value:n}]}))}),[]);return e.forEach((function(e,t){[le.CHAT,le.NEWS,le.DOCFILE,le.WORLDMAP,le.WALLET].includes(t)||n.push(r.a.createElement(fn,{key:t},r.a.createElement(x,{stopPropagation:!0,onClick:function(){return o({id:t,value:e})}},t)))})),r.a.createElement(Le,{className:"OpenApps"},r.a.createElement(fn,{key:"chat"},r.a.createElement(x,{stopPropagation:!0,key:"chat",className:"".concat(e.get(le.CHAT)&&e.get(le.CHAT).index===e.size?"active":""),onClick:function(){return o({id:le.CHAT,value:{type:le.CHAT}})}},r.a.createElement(Rn,null))),r.a.createElement(fn,{key:"news"},r.a.createElement(x,{stopPropagation:!0,key:"news",className:"".concat(e.get(le.NEWS)&&e.get(le.NEWS).index===e.size?"active":""),onClick:function(){return o({id:le.NEWS,value:{type:le.NEWS}})}},r.a.createElement(ca,null))),r.a.createElement(fn,{key:"docFile"},r.a.createElement(x,{stopPropagation:!0,key:"docFile",className:"".concat(e.get(le.DOCFILE)&&e.get(le.DOCFILE).index===e.size?"active":""),onClick:function(){return o({id:le.DOCFILE,value:{type:le.DOCFILE}})}},r.a.createElement(_n,null))),r.a.createElement(fn,{key:"worldMap"},r.a.createElement(x,{stopPropagation:!0,key:"worldMap",className:"".concat(e.get(le.WORLDMAP)&&e.get(le.WORLDMAP).index===e.size?"active":""),onClick:function(){return o({id:le.WORLDMAP,value:{type:le.WORLDMAP}})}},r.a.createElement(Fn,null))),t>=re&&r.a.createElement(fn,{key:"wallet"},r.a.createElement(x,{stopPropagation:!0,key:"wallet",className:"".concat(e.get(le.WALLET)&&e.get(le.WALLET).index===e.size?"active":""),onClick:function(){return o({id:le.WALLET,value:{type:le.WALLET}})}},r.a.createElement(Vn,null))),n.length>0&&r.a.createElement(Le,{dropdown:!0,className:"otherWindows",title:r.a.createElement(fa,null)},n))})));function va(){return(va=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ga(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ya=r.a.createElement("circle",{cx:12,cy:12,r:10}),ba=r.a.createElement("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),Ea=r.a.createElement("line",{x1:12,y1:17,x2:12.01,y2:17}),Oa=function(e){var t=e.svgRef,n=e.title,a=ga(e,["svgRef","title"]);return r.a.createElement("svg",va({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-help-circle",ref:t},a),n?r.a.createElement("title",null,n):null,ya,ba,Ea)},wa=r.a.forwardRef((function(e,t){return r.a.createElement(Oa,va({svgRef:t},e))}));n.p;function ja(){return(ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ia(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ka=r.a.createElement("polyline",{points:"15 18 9 12 15 6"}),xa=function(e){var t=e.svgRef,n=e.title,a=Ia(e,["svgRef","title"]);return r.a.createElement("svg",ja({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-chevron-left",ref:t},a),n?r.a.createElement("title",null,n):null,ka)},Ca=r.a.forwardRef((function(e,t){return r.a.createElement(xa,ja({svgRef:t},e))}));n.p;function Na(){return(Na=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Sa(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var La=r.a.createElement("polyline",{points:"9 18 15 12 9 6"}),Ra=function(e){var t=e.svgRef,n=e.title,a=Sa(e,["svgRef","title"]);return r.a.createElement("svg",Na({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-chevron-right",ref:t},a),n?r.a.createElement("title",null,n):null,La)},Aa=r.a.forwardRef((function(e,t){return r.a.createElement(Ra,Na({svgRef:t},e))})),Ta=(n.p,n(47),r.a.memo((function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],o=t[1],i=Object(c.d)(nn),u=i.accessLevel,s=i.systemConfig,d=void 0===s?{}:s,m=Object(c.d)(On),f=[],p=[];Object(c.d)(Je)||p.push("warning"),Object(a.useEffect)((function(){d.hideMenuBar?o(!0):o(!1)}),[d.hideMenuBar]);var h=Object(a.useCallback)((function(){return fe.dispatch(wn({mode:se,target:"MenuBar"}))}),[]);return r.a.createElement(r.a.Fragment,null,n?r.a.createElement("div",{className:"miniMenu"},r.a.createElement(x,{type:"button",onClick:function(){return o(!n)}},r.a.createElement(Ca,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{key:"MenuBar",onClick:function(){m.mode===se&&fe.dispatch(jn({target:"MenuBar"}))},className:"".concat("MenuBar"," ").concat(p.join(" ")),id:"MenuBar"},r.a.createElement(xn,{key:"mainList"}),r.a.createElement(ha,{key:"openApps"}),f,r.a.createElement("div",{className:"rightAligned"},!d.hideHelp&&r.a.createElement(x,{type:"button",className:"helpButton ".concat(m.mode===se&&"MenuBar"===m.target?"active":""),onClick:h},r.a.createElement(wa,null)),r.a.createElement(pe,null)),m.mode===se&&"MenuBar"===m.target&&r.a.createElement("div",{className:"helpOverlay"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",null,"Overview of the app, that has everything from chat and news feed to digital currency and map."),r.a.createElement("p",null,"Don't be afraid to experiment! You won't break the system."),r.a.createElement("p",null,"There is a ",r.a.createElement(wa,null)," button in each app. The scroll is usually hidden, but you can still scroll (like in this pop-up!). Apps and menu:")),r.a.createElement("li",null,r.a.createElement(Rn,null),r.a.createElement("span",null,"CHAT APP Read and send messages. You have access to read Public without logging in.")),r.a.createElement("li",null,r.a.createElement(ca,null),r.a.createElement("span",null,"NEWS APP Read the latest news. You need access to be able to create news.")),r.a.createElement("li",null,r.a.createElement(_n,null),r.a.createElement("span",null,"FILES APP Read and create documents. You have access to read documents without logging in.")),r.a.createElement("li",null,r.a.createElement(Fn,null),r.a.createElement("span",null,"MAP APP See the local, world map, track users and add new locations.")),r.a.createElement("li",null,r.a.createElement(Vn,null),r.a.createElement("span",null,"WALLET APP Send and receive currency. You need to login to access your wallet.")),r.a.createElement("li",null,r.a.createElement(En,null),r.a.createElement("span",null,"MENU You can create a user, login, check your info, change settings and more here.")),r.a.createElement("li",null,r.a.createElement(fa,null),r.a.createElement("span",null,"WINDOWS Other windows you have open (like dialog windows) will be listed here.")),r.a.createElement("li",null,r.a.createElement(j,null),r.a.createElement("span",null,"TIME Click it to reveal the current time."))))),u>=re&&r.a.createElement("div",{className:"miniMenu minimize"},r.a.createElement(x,{type:"button",onClick:function(){return o(!n)}},r.a.createElement(Aa,null)))))}))),Pa=n(9),Da=function(){var e=Object(c.c)(),t=Object(c.d)(Xe);return Object(a.useEffect)((function(){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.reset;[{type:U,event:Wt.USERS},{type:S,event:Wt.ALIASES},{type:W,event:Wt.MESSAGES},{type:F,event:Wt.ROOMS},{type:M,event:Wt.INVITATIONS},{type:R,event:Wt.DOCFILES},{type:A,event:Wt.FORUMS},{type:T,event:Wt.FORUMPOSTS},{type:P,event:Wt.FORUMTHREADS},{type:D,event:Wt.GAMECODES},{type:G,event:Wt.SIMPLEMSGS},{type:H,event:Wt.TEAMS},{type:B,event:Wt.TRANSACTIONS},{type:Y,event:Wt.WALLETS},{type:L,event:Wt.DEVICES}].forEach(function(){var t=Object(Te.a)(Ae.a.mark((function t(a){var r,o;return Ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.event,o=a.type,Vt(r,{}).then((function(t){e({type:o,payload:Object(Pa.a)({reset:n,changeType:J},o,t[o])})})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}({reset:!0})}),[t]),r.a.createElement(r.a.Fragment,null)},Ma=n(30);function Wa(){return(Wa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Fa(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Ga=r.a.createElement("polyline",{points:"15 3 21 3 21 9"}),Ha=r.a.createElement("polyline",{points:"9 21 3 21 3 15"}),Ba=r.a.createElement("line",{x1:21,y1:3,x2:14,y2:10}),Ua=r.a.createElement("line",{x1:3,y1:21,x2:10,y2:14}),Ya=function(e){var t=e.svgRef,n=e.title,a=Fa(e,["svgRef","title"]);return r.a.createElement("svg",Wa({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-maximize-2",ref:t},a),n?r.a.createElement("title",null,n):null,Ga,Ha,Ba,Ua)},Va=r.a.forwardRef((function(e,t){return r.a.createElement(Ya,Wa({svgRef:t},e))}));n.p;function za(){return(za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function qa(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Ja=r.a.createElement("line",{x1:18,y1:6,x2:6,y2:18}),Ka=r.a.createElement("line",{x1:6,y1:6,x2:18,y2:18}),Qa=function(e){var t=e.svgRef,n=e.title,a=qa(e,["svgRef","title"]);return r.a.createElement("svg",za({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-x",ref:t},a),n?r.a.createElement("title",null,n):null,Ja,Ka)},Xa=r.a.forwardRef((function(e,t){return r.a.createElement(Qa,za({svgRef:t},e))}));n.p;function Za(){return(Za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function $a(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _a=r.a.createElement("circle",{cx:12,cy:12,r:3}),er=r.a.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}),tr=function(e){var t=e.svgRef,n=e.title,a=$a(e,["svgRef","title"]);return r.a.createElement("svg",Za({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-settings",ref:t},a),n?r.a.createElement("title",null,n):null,_a,er)},nr=r.a.forwardRef((function(e,t){return r.a.createElement(tr,Za({svgRef:t},e))})),ar=(n.p,n(52),r.a.memo((function(e){var t=e.onDoubleClick,n=e.title,o=e.done,i=e.id,l=Object(c.d)(nn),u=Object(c.d)(On),s=l.systemConfig,d=void 0===s?{}:s,m=Object(a.useCallback)((function(){u.mode===se&&u.target!==i?fe.dispatch(jn({target:i})):fe.dispatch(wn({mode:se,target:i}))}),[u,i]),f=Object(a.useCallback)((function(){}),[]);return r.a.createElement("div",{onDoubleClick:t,className:"TopBar"},r.a.createElement("div",{className:"TopBarHandle"},r.a.createElement("span",{className:"title"},n)),r.a.createElement("div",{className:"buttons"},!d.hideHelp&&r.a.createElement(x,{stopPropagation:!0,key:"help",className:"help ".concat(u.mode===se&&u.target===i?"active":""),type:"button",onClick:m},r.a.createElement(wa,null)),l.accessLevel>=re&&r.a.createElement(x,{key:"settings",className:"settings",stopPropagation:!0,type:"button",onClick:f},r.a.createElement(nr,null)),!d.alwaysMaximized&&r.a.createElement(x,{type:"button",onClick:t},r.a.createElement(Va,null)),r.a.createElement(x,{className:"close",stopPropagation:!0,type:"button",onClick:o},r.a.createElement(Xa,null))))}))),rr=(n(53),function(e){var t=e.onClick,n=e.children,o=e.menu,i=e.done,u=e.index,s=e.id,d=(e.type,e.title),m=void 0===d?"app":d,f=e.className,p=void 0===f?"":f,h=Object(c.d)(nn).systemConfig,v=void 0===h?{}:h,g={width:640,height:480},y=Object(a.useState)(g),b=Object(l.a)(y,2),E=b[0],O=b[1],w=Object(a.useState)({x:0,y:0}),j=Object(l.a)(w,2),I=j[0],k=j[1],x={zIndex:u},C=Object(a.useCallback)((function(){k({x:0,y:0}),O({width:"100%",height:"100%"})}),[]),N=Object(a.useCallback)((function(){"100%"===E.width&&"100%"===E.height?O(g):C()}),[E,I]);return Object(a.useEffect)((function(){(v.hideTopBar||v.alwaysMaximized)&&C()}),[v]),r.a.createElement(Ma.a,{style:x,onClick:t,position:I,className:"rnd",size:E,minWidth:300,minHeight:200,maxHeight:"100%",maxWidth:"100%",bounds:"parent",dragHandleClassName:"TopBarHandle",enableResizing:{top:!0,topRight:!0,topLeft:!0,right:!0,bottom:!0,left:!0,bottomRight:!0,bottomLeft:!0},resizeHandleStyles:{top:{top:"0",width:"5px"},left:{left:"0",width:"5px"},right:{right:"0",width:"5px"},bottom:{bottom:"0",height:"5px"},bottomLeft:{bottom:"0",left:"0",width:"10px",height:"10px"},bottomRight:{bottom:"0",right:"0",width:"10px",height:"10px"},topRight:{right:"0",top:"0",width:"10px",height:"10px"},topLeft:{left:"0",top:"0",width:"10px",height:"10px"}},onDragStart:t,onDragStop:function(e,t){var n=t.node,a=t.x,r=t.y;I&&a===I.x&&r===I.y||(0===a&&"100%"!==E.width?(O({width:"50%",height:"100%"}),k({x:0,y:0})):a+n.offsetWidth>=window.innerWidth&&"100%"!==E.width?(O({width:"50%",height:"100%"}),k({x:window.innerWidth/2,y:0})):k({x:a,y:r}))},onResizeStart:t,onResizeStop:function(e,t,n,a,r){n.offsetWidth===E.width&&n.offsetHeight===E.height||(O({width:n.offsetWidth,height:n.offsetHeight}),k(r))}},r.a.createElement("div",{className:"Window ".concat(p)},v.hideTopBar?r.a.createElement("div",null):r.a.createElement(ar,{id:s,done:i,title:m,onDoubleClick:N}),r.a.createElement("div",{className:"windowBox"},o&&r.a.createElement("div",{className:"menu"},o),r.a.createElement("div",{className:"content"},n))))}),or=r.a.memo(rr);rr.defaultProps={done:void 0,className:void 0,title:"app",menu:void 0,type:"window"};var cr=Qt()([function(e){return e.transactions},function(e,t){return t.ids}],(function(e,t){return Object(z.a)(e.values()).filter((function(e){var n=e.fromWalletId,a=e.toWalletId;return t.includes(n)||t.includes(a)})).map((function(e){return e.objectId})).reverse()}))((function(e,t){var n=t.ids;return"transaction-ids-".concat(n.join(" "))})),ir=(n(54),r.a.memo((function(e){var t=e.transactionId,n=Object(c.d)((function(e){return function(e,t){var n=t.id;return e.transactions.get(n)}(e,{id:t})})),a=Object(c.d)((function(e){return un(e,{id:n.fromWalletId})})),o=Object(c.d)((function(e){return un(e,{id:n.toWalletId})}))||fe.getState().config.get("systemUser");return r.a.createElement(fn,{className:"TransactionItem"},r.a.createElement("p",null,g(fe.getState(),{date:new Date(n.customTimeCreated||n.timeCreated)}).fullStamp),r.a.createElement("p",null,"".concat(a.teamName||a.aliasName||a.username," -> ").concat(o.teamName||o.aliasName||o.username)),r.a.createElement("p",null,"Amount: ".concat(n.amount)),n.note&&r.a.createElement("p",null,n.note))}))),lr=r.a.memo((function(e){var t=e.walletIds,n=Object(c.d)((function(e){return cr(e,{ids:t})}));return r.a.createElement(Le,null,n.map((function(e){return r.a.createElement(ir,{key:e,transactionId:e})})))})),ur=function(e){return e.wallets},sr=function(e,t){var n=t.id;return e.wallets.get(n)},dr=Qt()([ur],(function(e){return Object(z.a)(e.values()).map((function(e){return e.objectId}))}))((function(){return"wallet-ids"})),mr=Qt()([ur,nn],(function(e,t){return Object(z.a)(e.values()).filter((function(e){return e.ownerId===t.objectId||t.aliases.includes(e.ownerAliasId)})).map((function(e){return e.objectId}))}))((function(){return"wallet-ids-current-user"})),fr=n(7),pr=r.a.memo((function(e){var t=e.identityId,n=Object(c.d)((function(e){return ln(e,{id:t})})),o=Object(a.useCallback)((function(){fe.dispatch(In({windows:[{id:"".concat(le.DIALOGIDENTITY,"-").concat(n.objectId),value:{identityId:n.objectId,type:le.DIALOGIDENTITY}}]}))}),[n.objectId]);return r.a.createElement(fn,{stopPropagation:!0,key:n.objectId,onClick:o},n.username||n.aliasName)})),hr=(n(55),function(e){var t=e.onChange,n=e.name,o=e.shouldEqual,c=e.maxLength,i=e.minLength,u=e.checked,s=e.type,d=void 0===s?"text":s,m=e.required,f=void 0!==m&&m,p=e.placeholder,h=void 0===p?"":p,v=Object(fr.c)(),g=v.register,y=v.getValues,b=Object(a.useState)(!1),E=Object(l.a)(b,2),O=E[0],w=E[1],j=Object(a.useState)(!1),I=Object(l.a)(j,2),k=I[0],x=I[1];return r.a.createElement("input",{defaultChecked:u,minLength:i,maxLength:c,required:f,name:n,ref:g({maxLength:c,minLength:i,validate:function(e){return!o||e===y(o)||"Must match ".concat(o)}}),type:d,defaultValue:"",className:"Input ".concat(k?"empty":""),onFocus:function(){O?k&&x(!1):w(!0)},onBlur:function(e){O&&f&&x(!e.target.value||""===e.target.value)},onChange:function(e){t&&t(e.target.value)},placeholder:h})}),vr=r.a.memo(hr);hr.defaultProps={placeholder:"",required:!1,type:"text",onChange:void 0,shouldEqual:void 0,maxLength:void 0,minLength:void 0,checked:void 0};n(56);var gr=function(e){var t=e.partialSearch,n=void 0===t||t,o=Object(fr.b)(),i=Object(fr.d)({control:o.control,name:"partialName"}),l=Object(c.d)(sn),u=i&&i.length>1?l.filter((function(e){var t=e.name;return n?t.toLowerCase().includes(i.toLowerCase()):t.toLowerCase()===i.toLowerCase()})).map((function(e){var t=e.objectId;return r.a.createElement(pr,{key:t,identityId:t})})):l.map((function(e){var t=e.objectId;return r.a.createElement(pr,{key:t,identityId:t})})),s=Object(a.useCallback)((function(){return o.reset()}),[]);return r.a.createElement(Le,{dropdown:!0,checkWidth:!0,className:"IdentityList",title:"Users"},r.a.createElement(fn,{className:"userSearch"},r.a.createElement(fr.a,o,r.a.createElement("form",{onSubmit:o.handleSubmit((function(){0===u.length?o.reset():1===u.length&&(fe.dispatch(In({windows:[{id:"".concat(le.DIALOGIDENTITY,"-").concat(u[0].key),value:{identityId:u[0].key,type:le.DIALOGIDENTITY}}]})),o.reset())}))},r.a.createElement(vr,{name:"partialName",placeholder:"Find user"}),r.a.createElement(x,{stopPropagation:!0,onClick:s},r.a.createElement(Xa,null))))),i&&0===u.length?[r.a.createElement(fn,{key:"noMatch"},"No match found")]:u)},yr=r.a.memo(gr);gr.defaultProps={partialSearch:!0};var br=function(e){var t=e.walletId,n=e.onChange,a=e.className,o=void 0===a?"":a,i=Object(c.d)((function(e){return sr(e,{id:t})})),l=Object(c.d)((function(e){return un(e,{id:t})}));return r.a.createElement(fn,{className:"WalletItem ".concat(o),onClick:function(){return n(t)}},l?"".concat(l.teamName||l.aliasName||l.username,": ").concat(i.amount):"Show all")},Er=r.a.memo(br);br.defaultProps={className:""};var Or=r.a.memo((function(e){var t=e.onChange,n=e.walletId,a=Object(c.d)(mr);return r.a.createElement(Le,{dropdown:!0,checkWidth:!0,title:"Wallets",className:"WalletList"},r.a.createElement(Er,{className:"showAll"===n?"selected":"",key:"showAll",onChange:t,walletId:"showAll"}),a.map((function(e){return r.a.createElement(Er,{key:e,walletId:e,onChange:t,className:n===e?"selected":""})})))})),wr=r.a.memo((function(e){var t=e.onChange,n=e.walletId,a=Object(c.d)(dr);return r.a.createElement(Le,{dropdown:!0,checkWidth:!0,title:"[ADMIN]",className:"WalletList"},a.map((function(e){return r.a.createElement(Er,{key:e,walletId:e,onChange:t,className:n===e?"selected":""})})))})),jr=(n(57),r.a.memo((function(e){var t=e.id,n=e.index,o=Object(a.useState)("showAll"),i=Object(l.a)(o,2),u=i[0],s=i[1],d=Object(c.d)(mr),m=Object(c.d)((function(e){return un(e,{id:u})})),f=Object(c.d)(an),p=Object(a.useCallback)((function(){fe.dispatch(In({windows:[{id:t,value:{type:le.WALLET}}]}))}),[]),h=Object(a.useCallback)((function(){return fe.dispatch(kn({id:t}))}),[t]),v=Object(a.useCallback)((function(e){return s(e)}),[]),g=Object(a.useMemo)((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Or,{key:"walletList",onChange:v,walletId:u}),r.a.createElement(yr,{key:"identityList"}),f>=oe&&r.a.createElement(wr,{key:"adminWalletList",onChange:v,walletId:u}))}),[v,u]);return r.a.createElement(or,{id:t,className:"Wallet",index:n,done:h,title:"Wallet".concat(m?": ".concat(m.teamName||m.aliasName||m.username):""),onClick:p,menu:g},r.a.createElement(lr,{key:"transactionList",walletIds:"showAll"!==u?[u]:d}))}))),Ir=(n(58),function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=(t[0],t[1]),o=Object(a.useRef)();return Object(a.useEffect)((function(){!function e(){if("undefined"!==typeof window.google&&"undefined"!==typeof window.MarkerClusterer&&"undefined"!==typeof window.MapLabel){var t=new window.google.maps.Map(o.current,{disableDefaultUI:!0,fullscreenControl:!1,keyboardShortcuts:!1,mapTypeControl:!1,noClear:!0,zoomControl:!1,panControl:!1,overviewMapControl:!1,rotateControl:!1,scaleControl:!1,streetViewControl:!1,center:{lat:-34.397,lng:150.644},zoom:8,styles:[{elementType:"geometry",stylers:[{color:"#13002d"}]},{elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"administrative",stylers:[{color:"#370087"}]},{featureType:"landscape.natural.terrain",stylers:[{color:"#44003a"}]},{featureType:"road",stylers:[{color:"#6e6c6d"},{weight:.5}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{color:"#7d006c"}]}]});n(t)}else setTimeout(e,1e3)}()}),[]),r.a.createElement("div",{ref:o,className:"MapView"})}),kr=function(e){return e.positions},xr=function(e){return Object(Jt.createSelector)([kr],(function(t){return Object(z.a)(t.values()).filter((function(t){var n=t.positionType;return e===n})).map((function(e){return{positionName:e.positionName,objectId:e.objectId}}))}))},Cr=function(e){var t=e.title,n=e.positionType,o=Object(a.useMemo)(xr,[]),i=Object(c.d)((function(e){return o(e,n)}));return r.a.createElement("div",{key:"positionsList",className:"PositionsList"},r.a.createElement(Le,{title:t},i.map((function(e){return r.a.createElement(fn,{key:e.objectId,onClick:function(){console.log(e.objectId)}},e.positionName)}))))},Nr=r.a.memo(Cr);Cr.defaultProps={title:void 0};var Sr=function(e){var t=e.positionTypes,n=void 0===t?[]:t;return r.a.createElement("div",{className:"lists Positions"},n.map((function(e){return r.a.createElement(Nr,{title:e,positionType:e})})))},Lr=(n(59),r.a.memo((function(e){var t=e.id,n=e.index,o=Object(a.useCallback)((function(){fe.dispatch(In({windows:[{id:t,value:{type:le.WORLDMAP}}]}))}),[]);return r.a.createElement(or,{id:t,index:n,done:function(){return fe.dispatch(kn({id:t}))},className:"WorldMap",title:"map",onClick:o,menu:r.a.createElement(r.a.Fragment,null,r.a.createElement(Sr,null))},r.a.createElement(Ir,null))}))),Rr=function(e){return e.rooms},Ar=function(e,t){var n=t.id;return e.rooms.get(n)},Tr=Qt()([Rr],(function(e){return Object(z.a)(e.values()).filter((function(e){return!e.isWhisper&&!e.isUser}))}))((function(){return"normalRooms"})),Pr=Qt()([Rr],(function(e){return Object(z.a)(e.values()).filter((function(e){return e.isWhisper})).map((function(e){return{objectId:e.objectId,participantIds:e.participantIds}}))}))((function(){return"whisperRooms"})),Dr=Qt()([Tr,nn],(function(e,t){return e.filter((function(e){return!t.followingRooms.includes(e.objectId)})).map((function(e){return{roomName:e.roomName,objectId:e.objectId}})).sort((function(e,t){var n=e.roomName.toLowerCase(),a=t.roomName.toLowerCase();return n>a||a<n?1:0})).map((function(e){return e.objectId}))}))((function(){return"unfollowedRooms"})),Mr=Qt()([Tr,nn],(function(e,t){return e.filter((function(e){return t.followingRooms.includes(e.objectId)})).map((function(e){return e.objectId}))}))((function(){return"followedRooms"})),Wr=Qt()([Pr,function(e,t){return{identityId:t.identityId,currentIdentityId:t.currentIdentityId}},function(e,t){var n=t.identityId;return Ar(e,{id:n})}],(function(e,t,n){var a=t.currentIdentityId,r=t.identityId;return e.find((function(e){return e.participantIds.includes(a)&&e.participantIds.includes(r)}))||n}))((function(e,t){var n=t.currentIdentityId,a=t.identityId;return"whisper-".concat(n,"-").concat(a)})),Fr=Qt()([on,dn,function(e,t){return t.ids}],(function(e,t,n){var a=e.get(n[0]),r=e.get(n[1]);return t.find((function(e){var t=e.objectId;return a.objectId===t||a.ownerId===t||a.userIds.includes(t)}))?"".concat(a.username||a.aliasName," > ").concat(r.username||a.aliasName):"".concat(r.username||a.aliasName," > ").concat(a.username||a.aliasName)}))((function(e,t){var n=t.ids;return"w-name-".concat(n.join(" "))}));function Gr(){return(Gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Hr(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Br=r.a.createElement("rect",{x:3,y:11,width:18,height:11,rx:2,ry:2}),Ur=r.a.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}),Yr=function(e){var t=e.svgRef,n=e.title,a=Hr(e,["svgRef","title"]);return r.a.createElement("svg",Gr({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-lock",ref:t},a),n?r.a.createElement("title",null,n):null,Br,Ur)},Vr=r.a.forwardRef((function(e,t){return r.a.createElement(Yr,Gr({svgRef:t},e))})),zr=(n.p,n(60),r.a.memo((function(e){var t=e.roomId,n=Object(c.d)((function(e){return Ar(e,{id:t})})),o=Object(a.useCallback)((function(){fe.dispatch(In({windows:[{id:"".concat(le.DIALOGJOINROOM,"-").concat(t),value:{type:le.DIALOGJOINROOM,roomId:t}}]}))}),[t]);return r.a.createElement(fn,{className:"RoomItem",key:t,onClick:o},n.roomName,n.isLocked&&r.a.createElement("div",{className:"lock"},r.a.createElement(Vr,null)))}))),qr=r.a.memo((function(e){var t=e.onChange,n=Object(c.d)(Dr);return r.a.createElement(Le,{dropdown:!0,checkWidth:!0,key:"roomList",className:"RoomList",title:"Rooms"},n.map((function(e){return r.a.createElement(zr,{key:e,roomId:e,onChange:t})})))})),Jr=function(e){var t=e.room,n=e.onChange,o=e.className,i=Object(c.d)((function(e){return Fr(e,{ids:t.participantIds})})),l=Object(a.useCallback)((function(){n({roomId:t.objectId,roomName:i})}),[t]);return r.a.createElement(fn,{className:o,key:t.objectId,onClick:l},i)},Kr=r.a.memo(Jr);Jr.defaultProps={className:void 0};var Qr=function(e){var t=e.onChange,n=e.roomId,a=Object(c.d)(Pr);return r.a.createElement(Le,{dropdown:!0,checkWidth:!0,key:"whisperList",className:"WhisperList",title:"PM"},a.map((function(e){return r.a.createElement(Kr,{key:e.objectId,room:e,onChange:t,className:"".concat(e.objectId===n?"selected":"")})})))},Xr=r.a.memo(Qr);Qr.defaultProps={roomId:void 0};var Zr=function(e){var t=e.roomId,n=e.onChange,o=e.className,i=void 0===o?"":o,l=Object(c.d)((function(e){return Ar(e,{id:t})})),u=Object(a.useCallback)((function(){return n({roomId:t})}),[t]);return r.a.createElement(fn,{className:"FollowingItem ".concat(i),key:t,onClick:u},l.roomName)},$r=r.a.memo(Zr);Zr.defaultProps={className:""};var _r=r.a.memo((function(e){var t=e.onChange,n=e.roomId,a=Object(c.d)(Mr);return r.a.createElement(Le,{dropdown:!0,checkWidth:!0,key:"followingList",className:"FollowingList",title:"Joined"},a.map((function(e){return r.a.createElement($r,{className:"".concat(e===n?"selected":""),key:e,roomId:e,onChange:t})})))})),eo=r.a.memo((function(e){var t=e.onChange,n=e.roomId,a=Object(c.d)(an);return r.a.createElement(r.a.Fragment,null,r.a.createElement(_r,{roomId:n,key:"following",onChange:t}),a>=re&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Xr,{roomId:n,key:"whisper",onChange:t}),r.a.createElement(qr,{key:"room",onChange:t})),r.a.createElement(yr,{onDone:t,key:"user"}))}));function to(){return(to=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function no(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ao=r.a.createElement("polyline",{points:"4 14 10 14 10 20"}),ro=r.a.createElement("polyline",{points:"20 10 14 10 14 4"}),oo=r.a.createElement("line",{x1:14,y1:10,x2:21,y2:3}),co=r.a.createElement("line",{x1:3,y1:21,x2:10,y2:14}),io=function(e){var t=e.svgRef,n=e.title,a=no(e,["svgRef","title"]);return r.a.createElement("svg",to({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-minimize-2",ref:t},a),n?r.a.createElement("title",null,n):null,ao,ro,oo,co)},lo=r.a.forwardRef((function(e,t){return r.a.createElement(io,to({svgRef:t},e))})),uo=(n.p,n(61),r.a.forwardRef((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,n=e.onRemove,o=e.width,c=e.height,i=e.scrollTo,u=void 0!==i&&i,s=e.className,d=void 0===s?"":s,m=e.altText,f=void 0===m?"":m,p=e.fullImage,h=e.fullWidth,v=e.fullHeight,g=arguments.length>1?arguments[1]:void 0,y=Object(a.useRef)(null),b=Object(a.useState)(!1),E=Object(l.a)(b,2),O=E[0],w=E[1];Object(a.useEffect)((function(){u&&!O&&y.current&&y.current.scrollIntoView({block:"nearest"})}),[O]);var j=function(e){p&&(w(!O),e.stopPropagation())};return r.a.createElement("div",{role:"complementary",ref:y,className:"Image ".concat(O?"full":""," ").concat(d),onClick:j},n&&r.a.createElement("div",{className:"remove clickable",role:"complementary",onClick:function(e){n(),e.stopPropagation()}},"X"),p&&r.a.createElement("div",{onClick:j,className:"zoom clickable",role:"complementary"},O?r.a.createElement(lo,null):r.a.createElement(Va,null)),r.a.createElement("img",{className:p?"clickable":"",onClick:j,width:O?h:o,height:O?v:c,ref:g,src:O?p:t,alt:f}))}))),so=uo;function mo(){return(mo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function fo(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}uo.defaultProps={altText:"",className:"",onRemove:void 0,width:void 0,height:void 0,fullImage:void 0,fullWidth:void 0,fullHeight:void 0,scrollTo:!1};var po=r.a.createElement("rect",{x:3,y:3,width:18,height:18,rx:2,ry:2}),ho=r.a.createElement("circle",{cx:8.5,cy:8.5,r:1.5}),vo=r.a.createElement("polyline",{points:"21 15 16 10 5 21"}),go=function(e){var t=e.svgRef,n=e.title,a=fo(e,["svgRef","title"]);return r.a.createElement("svg",mo({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-image",ref:t},a),n?r.a.createElement("title",null,n):null,po,ho,vo)},yo=r.a.forwardRef((function(e,t){return r.a.createElement(go,mo({svgRef:t},e))})),bo=(n.p,n(62),r.a.memo((function(e){var t=e.useIcon,n=void 0!==t&&t,o=Object(fr.c)(),c=o.register,i=o.setValue,u=Object(a.useRef)(null),s=Object(a.useState)(),d=Object(l.a)(s,2),m=d[0],f=d[1],p=Object(fr.d)({name:"image"});Object(a.useEffect)((function(){c("image")}),[]),Object(a.useEffect)((function(){i("image",m||void 0)}),[m]),Object(a.useEffect)((function(){p||f()}),[p]);return r.a.createElement("div",{className:"ImageUpload"},r.a.createElement("input",{key:"uploadInput",className:"hide",ref:u,type:"file",accept:"image/png, image/jpeg, image/pjpeg",onChange:function(e){var t=(e.target.files||[])[0];if(t){var n=new FileReader;n.addEventListener("load",(function(){if(n.result){var e={imageName:t.name,source:n.result};f(e)}})),n.readAsDataURL(t)}}}),r.a.createElement(so,{onRemove:function(){return f()},className:"previewImage ".concat(m?"":"hide"),image:m?m.source:"",altText:"Image preview"}),r.a.createElement(x,{type:"button",onClick:function(){u.current.click()}},r.a.createElement(yo,null),!n&&r.a.createElement("span",null,"Upload image")))}))),Eo=function(){var e=Object(Te.a)(Ae.a.mark((function e(t){var n,a,r,o,c,i,l;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,a=t.roomId,r=t.image,o=Ar(fe.getState(),{id:a}),c=o.isWhisper?o.participantIds:[],i={roomId:a,ownerAliasId:Qe(fe.getState())||void 0,text:n.split("\n")},o.isUser?(i.messageType=$,c.push(Ze(fe.getState())),c.push(a)):o.isWhisper?i.messageType=$:i.messageType=Z,e.next=7,Vt(St,{message:i,image:r,participantIds:c});case 7:return l=e.sent,fe.dispatch(nt({messages:[l.message]})),e.abrupt("return",{message:l.message,switchRoom:!0});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oo=function(){var e=Object(Te.a)(Ae.a.mark((function e(t){var n,a,r,o,c;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,a=t.text,r=t.image,o={messageType:_,text:[n].concat(a.split("\n")),roomId:h(fe.getState()),ownerAliasId:Qe(fe.getState())||void 0},e.next=4,Vt(St,{message:o,image:r});case 4:return c=e.sent,fe.dispatch(at(c)),e.abrupt("return",{message:c.message});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wo=function(){var e=Object(Te.a)(Ae.a.mark((function e(t){var n,a;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,e.next=3,Vt(Pt,{roomId:n});case 3:return a=e.sent,fe.dispatch(nt({messages:a.messages})),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function jo(){return(jo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Io(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ko=r.a.createElement("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),xo=r.a.createElement("circle",{cx:12,cy:7,r:4}),Co=function(e){var t=e.svgRef,n=e.title,a=Io(e,["svgRef","title"]);return r.a.createElement("svg",jo({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-user",ref:t},a),n?r.a.createElement("title",null,n):null,ko,xo)},No=r.a.forwardRef((function(e,t){return r.a.createElement(Co,jo({svgRef:t},e))})),So=(n.p,n(63),function(e){var t=e.useIcon,n=void 0!==t&&t,a=Object(c.d)(dn),o=Object(c.d)(Ze),i=a.find((function(e){return e.objectId===o})),l=i?i.aliasName||i.username:"---";return r.a.createElement(Le,{dropdown:!0,className:"IdentityPicker",title:n?r.a.createElement(No,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(No,null),r.a.createElement("span",null,l))},(n?a:a.filter((function(e){return e.objectId!==o}))).map((function(e){return r.a.createElement(fn,{className:e.objectId===o?"selected":"",key:e.objectId,onClick:function(){return fe.dispatch(yt({aliasId:e.aliasName?e.objectId:void 0}))}},e.aliasName||e.username)})))}),Lo=r.a.memo(So);function Ro(){return(Ro=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ao(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}So.defaultProps={useIcon:void 0};var To=r.a.createElement("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),Po=r.a.createElement("circle",{cx:12,cy:10,r:3}),Do=function(e){var t=e.svgRef,n=e.title,a=Ao(e,["svgRef","title"]);return r.a.createElement("svg",Ro({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-map-pin",ref:t},a),n?r.a.createElement("title",null,n):null,To,Po)},Mo=r.a.forwardRef((function(e,t){return r.a.createElement(Do,Ro({svgRef:t},e))}));n.p;function Wo(){return(Wo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Fo(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Go=r.a.createElement("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),Ho=r.a.createElement("line",{x1:7,y1:7,x2:7.01,y2:7}),Bo=function(e){var t=e.svgRef,n=e.title,a=Fo(e,["svgRef","title"]);return r.a.createElement("svg",Wo({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-tag",ref:t},a),n?r.a.createElement("title",null,n):null,Go,Ho)},Uo=r.a.forwardRef((function(e,t){return r.a.createElement(Bo,Wo({svgRef:t},e))}));n.p;function Yo(){return(Yo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Vo(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var zo=r.a.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),qo=r.a.createElement("polyline",{points:"14 2 14 8 20 8"}),Jo=r.a.createElement("line",{x1:12,y1:18,x2:12,y2:12}),Ko=r.a.createElement("line",{x1:9,y1:15,x2:15,y2:15}),Qo=function(e){var t=e.svgRef,n=e.title,a=Vo(e,["svgRef","title"]);return r.a.createElement("svg",Yo({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-file-plus",ref:t},a),n?r.a.createElement("title",null,n):null,zo,qo,Jo,Ko)},Xo=r.a.forwardRef((function(e,t){return r.a.createElement(Qo,Yo({svgRef:t},e))}));n.p;function Zo(){return(Zo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function $o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _o=r.a.createElement("path",{d:"M22.61 16.95A5 5 0 0 0 18 10h-1.26a8 8 0 0 0-7.05-6M5 5a8 8 0 0 0 4 15h9a5 5 0 0 0 1.7-.3"}),ec=r.a.createElement("line",{x1:1,y1:1,x2:23,y2:23}),tc=function(e){var t=e.svgRef,n=e.title,a=$o(e,["svgRef","title"]);return r.a.createElement("svg",Zo({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-cloud-off",ref:t},a),n?r.a.createElement("title",null,n):null,_o,ec)},nc=r.a.forwardRef((function(e,t){return r.a.createElement(tc,Zo({svgRef:t},e))})),ac=(n.p,n(64),function(e){var t=e.roomId,n=e.onSend,o=e.minAccessLevel,i=void 0===o?re:o,u=Object(a.useState)(!1),s=Object(l.a)(u,2),d=s[0],p=s[1],h=Object(fr.b)(),v=Object(a.useRef)(null),g=Object(a.useRef)(null),y=Object(c.d)(Je),b=Object(c.d)(an),E=Object(c.d)(m),O=Object(c.d)(f),w=function(){if(v.current){var e=v.current;e.style.height&&e.scrollHeight.toString()===e.style.height.split("px")[0]||(e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px"),v.current.scrollIntoView())}};return r.a.createElement("div",{className:"InputArea"},r.a.createElement(fr.a,h,r.a.createElement("form",{onSubmit:h.handleSubmit((function(e){var a=e.text,r=e.image;p(!0),Eo({roomId:t,image:r,text:a}).then((function(e){var t=e.message,a=e.switchRoom;h.setValue("text",""),h.setValue("image",void 0),w(),a&&n({roomId:t.roomId}),p(!1)})).catch((function(e){console.log("error",e),p(!1)}))}))},b>=i&&r.a.createElement("div",{key:"buttonBox",className:"buttonBox"},E.CHAT&&r.a.createElement(bo,{useIcon:!0}),r.a.createElement(x,{onClick:function(){}},r.a.createElement(Uo,null)),r.a.createElement(x,{onClick:function(){}},r.a.createElement(Xo,null)),O&&r.a.createElement(x,{onClick:function(){}},r.a.createElement(Mo,null)),r.a.createElement(Lo,null)),r.a.createElement("div",{className:"input"},r.a.createElement("textarea",{maxLength:600,name:"text",key:"input",rows:1,ref:function(e){h.register(e),v.current=e},onKeyDown:function(e){var t=e.key;e.altKey&&"Enter"===t&&g.current&&g.current.click()},placeholder:y?"Alt+Enter to send message":"Offline. Reconnecting to server...",onChange:function(e){return w(e.target)}}),r.a.createElement(x,{ref:g,disabled:!y||d,key:"send",type:"submit",className:"sendButton",onClick:function(){}},y?r.a.createElement("span",null,"Send"):r.a.createElement(nc,null))))))}),rc=r.a.memo(ac);ac.defaultProps={minAccessLevel:re};var oc=function(e,t){var n=t.id;return e.messages.get(n)},cc=function(e){return e.messages},ic=Qt()([cc,function(e,t){return t.roomId}],(function(e,t){return Object(z.a)(e.values()).filter((function(e){return e.roomId===t}))}))((function(e,t){return t.roomId})),lc=Qt()([cc],(function(e){return Object(z.a)(e.values()).filter((function(e){return e.messageType===_})).reverse()}))((function(){return"news"})),uc=Qt()([lc],(function(e){return e.map((function(e){return{objectId:e.objectId,points:e.points}}))}))((function(){return"news-ids"})),sc=Qt()([ic],(function(e){return e.map((function(e){return e.objectId}))}))((function(e,t){var n=t.roomId;return"id-".concat(n)})),dc=(n(65),r.a.memo((function(e){var t=e.identityId,n=e.timeCreated,a=Object(c.d)((function(e){return ln(e,{id:t})})),o=Object(c.d)((function(e){return g(e,{date:n})}));return r.a.createElement("p",{className:"MessageInfo"},r.a.createElement("span",{role:"button",tabIndex:0,className:"clickable username",onClick:function(e){a&&fe.dispatch(In({windows:[{id:"".concat(le.DIALOGIDENTITY,"-").concat(a.objectId),value:{identityId:a.objectId,type:le.DIALOGIDENTITY}}]})),e.stopPropagation()}},a?a.username||a.aliasName:"-"),r.a.createElement("span",{className:"time"},o.fullStamp))}))),mc=(n(66),function(e){var t=e.previousMessageId,n=e.messageId,o=e.isLatest,i=void 0!==o&&o,l=e.selected,u=void 0!==l&&l,s=Object(a.useRef)(),d=Object(c.d)((function(e){return oc(e,{id:t})})),m=Object(c.d)((function(e){return oc(e,{id:n})})),f=ce({objectToAccess:m,toAuth:nn(fe.getState())}).hasFullAccess;return r.a.createElement(fn,{scrollTo:u||i,ref:s,className:"MessageItem ".concat(f?"clickable":""),key:n},!(!!d&&!(new Date(m.lastUpdated).getTime()-9e5>new Date(d.lastUpdated).getTime())&&(!(!d.ownerAliasId||!m.ownerAliasId||d.ownerAliasId!==m.ownerAliasId)||!d.ownerAliasId&&!m.ownerAliasId&&d.ownerId===m.ownerId))&&r.a.createElement(dc,{key:"msgInfo",identityId:m.ownerAliasId||m.ownerId,timeCreated:m.customTimeCreated||m.timeCreated}),r.a.createElement("div",{className:"text"},m.text.map((function(e,t){return r.a.createElement("p",{key:t},e)})),m.image&&m.image.thumbFileName&&r.a.createElement(so,{scrollTo:!0,key:m.image.thumbFileName,image:"/upload/images/".concat(m.image.thumbFileName),altText:"pic",width:m.image.thumbWidth,height:m.image.thumbHeight,fullImage:"/upload/images/".concat(m.image.fileName),fullWidth:m.image.width,fullHeight:m.image.height})))}),fc=r.a.memo(mc);mc.defaultProps={previousMessageId:void 0,selected:!1,isLatest:!1};n(67);var pc=function(e){var t=e.roomId,n=e.messageId,o=Object(c.d)((function(e){return sc(e,{roomId:t})})),i=Object(a.useRef)("");o[o.length-1]!==i&&(i.current=o[o.length-1]);return r.a.createElement(Le,{observe:"lower",key:"messageList",className:"MessageList"},o.map((function(e,t,a){return r.a.createElement(fc,{isLatest:e===i.current,selected:n&&n===e,key:e,previousMessageId:a[t-1],messageId:e})})))},hc=r.a.memo(pc);pc.defaultProps={roomId:void 0,messageId:void 0};n(68);var vc=function(e){var t=e.roomId,n=e.onSend,a=Object(c.d)(an);return r.a.createElement("div",{className:"Messages"},r.a.createElement("div",{className:"spacer"}),r.a.createElement(hc,{key:"messagesList",roomId:t}),a>=re&&r.a.createElement(rc,{onSend:n,roomId:t,key:"inputArea"}))},gc=r.a.memo(vc);vc.defaultProps={roomId:void 0};var yc=r.a.memo((function(e){var t=e.id,n=e.children,a=Object(c.d)(nn).systemConfig,o=void 0===a?{}:a;return r.a.createElement(Le,{dropdown:!0,checkWidth:!0,className:"FileMenu",title:"File"},n,!o.hideTopRow&&r.a.createElement(r.a.Fragment,null,r.a.createElement(fn,{stopPropagation:!0,key:"settings",onClick:function(){}},"Settings"),r.a.createElement(fn,{stopPropagation:!0,key:"quit",onClick:function(){return fe.dispatch(kn({id:t}))}},"Quit")))})),bc=(n(69),function(e){var t=e.id,n=e.roomId,o=e.index,i=Object(c.d)(On),u=Object(a.useState)(n||d(fe.getState())),s=Object(l.a)(u,2),m=s[0],f=s[1],p=Object(c.d)((function(e){return Ar(e,{id:m})})),h=Object(c.d)(nn);Object(a.useEffect)((function(){h&&!h.isAnonymous&&p||m===d(fe.getState())||f(d(fe.getState()))}),[p,h]),Object(a.useEffect)((function(){n&&m!==n&&f(n)}),[n]);var v=function(){if(!p)return"Chat";if(p.isUser){var e=ln(fe.getState(),{id:m});return"PM: ".concat(e.aliasName||e.username)}return p.isWhisper?"PM: ".concat(Fr(fe.getState(),{ids:p.participantIds})):"Chat: ".concat(p.roomName)}(),g=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.roomId;f(t)}),[]),y=Object(a.useCallback)((function(){fe.dispatch(In({windows:[{id:t,value:{type:le.CHAT}}]}))}),[]),b=Object(a.useCallback)((function(){return fe.dispatch(kn({id:t}))}),[t]),E=Object(a.useCallback)((function(){return fe.dispatch(In({windows:[{id:le.DIALOGCREATEROOM,value:{type:le.DIALOGCREATEROOM}}]}))}),[]),O=ce({objectToAccess:p,toAuth:h}).hasFullAccess;return r.a.createElement(or,{id:t,index:o,done:b,className:"Chat",title:v,onClick:y,menu:r.a.createElement(r.a.Fragment,null,!h.isAnonymous&&r.a.createElement(yc,{key:"fileMenu",id:t},r.a.createElement(fn,{stopPropagation:!0,key:"createRoom",onClick:E},"New room"),O&&r.a.createElement(fn,{stopPropagation:!0,key:"configRoom",onClick:function(){}},"Config room"),O&&!p.isWhisper&&!p.isUser&&!p.isSystemRoom&&!p.isTeam&&r.a.createElement(fn,{stopPropagation:!0,key:"removeRoom",onClick:function(){return fe.dispatch(In({windows:[{id:le.DIALOGREMOVEROOM,value:{type:le.DIALOGREMOVEROOM,roomId:m}}]}))}},"Delete room")),r.a.createElement(eo,{roomId:m,key:"rooms",onChange:g}))},r.a.createElement(gc,{key:"messages",roomId:m,onSend:g}),i.mode===se&&i.target===t&&r.a.createElement("div",{className:"helpOverlay"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement(Rn,null),r.a.createElement("span",null,"CHAT APP Read and send messages, to users or rooms.")),r.a.createElement("p",null,"You can only read the Public chat without logging in."),r.a.createElement("p",null,"Menus are on the left (or top in smaller windows). Messages from the current room are to the right (or below)."),r.a.createElement("p",null,"Your current room is shown in the title (CHAT: public) and in JOINED.")),r.a.createElement("li",null,r.a.createElement("p",null,"SEND The message input is shown on the bottom when you are logged in. You can send the message with either alt+Enter or clicking Send."),r.a.createElement("p",null,r.a.createElement(yo,null),r.a.createElement("span",null,"IMAGE Attach an image. You can send a message with just an image.")),r.a.createElement("p",null,r.a.createElement(No,null),r.a.createElement("span",null,"YOU Your name. Click it to switch identities."))),r.a.createElement("li",null,r.a.createElement("p",null,"FILE You can create a room, change settings (like changing password or name) or remove the room you are in."),r.a.createElement("p",null,"JOINED Shows you the rooms you joined. Click one to switch to it."),r.a.createElement("p",null,"PM All private conversations are shown here. It always shows your name on the left."),r.a.createElement("p",null,r.a.createElement("span",null,"ROOMS All available rooms that you haven't joined yet."),r.a.createElement(Vr,null),r.a.createElement("span",null," means that the room is password-protected.")),r.a.createElement("p",null,r.a.createElement("span",null,"USERS All users. Send a private message to a user by clicking them and choosing "),r.a.createElement(Rn,null),r.a.createElement("span",null," in the pop-up."))),r.a.createElement("li",null,r.a.createElement(nr,null),r.a.createElement("span",null,"APP SETTINGS Change settings for this app. You have to be logged in to access it.")),r.a.createElement("li",null,r.a.createElement(Va,null),r.a.createElement("span",null,"MAXIMIZE Make the window expand and take up all available space. Clicking it again will shrink the window.")),r.a.createElement("li",null,r.a.createElement(Xa,null),r.a.createElement("span",null,"CLOSE Close the window")))))}),Ec=r.a.memo(bc);bc.defaultProps={roomId:void 0};n(70);var Oc=function(e){var t=e.children,n=e.title,a=e.error,o=e.text,c=e.done,i=e.onClick,l=e.index,u=e.id,s=e.buttons,d=e.className,m=void 0===d?"":d;return r.a.createElement(or,{id:u,index:l,type:"dialog",done:c,title:n,className:"Dialog ".concat(m),onClick:i},a&&r.a.createElement("div",{className:"error"},r.a.createElement("span",null,a.message)),o&&r.a.createElement("div",null,o),t,s.length>0&&r.a.createElement("div",{className:"buttons"},r.a.createElement(x,{stopPropagation:!0,type:"button",onClick:function(){return fe.dispatch(kn({id:u}))}},"Cancel"),s))},wc=r.a.memo(Oc);Oc.defaultProps={children:void 0,error:void 0,title:void 0,text:void 0,className:"",buttons:void 0};var jc=r.a.memo((function(e){var t=e.id,n=e.identityId,o=e.index,i=Object(c.d)((function(e){return ln(e,{id:n})})),l=Object(c.d)(Ze),u=Object(c.d)((function(e){return _t(e,{ids:i.partOfTeams})})),s=Object(a.useCallback)((function(){fe.dispatch(In({windows:[{id:t,value:{type:le.DIALOGIDENTITY,identityId:n}}]}))}),[t,n]),d=Object(a.useCallback)((function(){return fe.dispatch(kn({id:t}))}),[t]),m=Object(a.useCallback)((function(){return Object(c.b)((function(){fe.dispatch(In({windows:[{id:"".concat(le.DIALOGCREATETRANSACTION,"-").concat(n),value:{type:le.DIALOGCREATETRANSACTION,toWalletId:n}}]})),fe.dispatch(kn({id:t}))}))}),[n,t]),f=Object(a.useCallback)((function(){var e=Wr(fe.getState(),{identityId:n,currentIdentityId:l});Object(c.b)((function(){fe.dispatch(In({windows:[{id:le.CHAT,value:{type:le.CHAT,roomId:e.objectId}}]})),fe.dispatch(kn({id:t}))}))}),[n,l,t]);return r.a.createElement(wc,{id:t,index:o,title:"User: ".concat(i.aliasName||i.username),onClick:s,done:d,buttons:"-1"!==l&&[r.a.createElement(x,{stopPropagation:!0,key:"transfer",type:"button",onClick:m},r.a.createElement(Vn,null)),r.a.createElement(x,{stopPropagation:!0,key:"whisper",type:"button",onClick:f},r.a.createElement(Rn,null)),r.a.createElement(x,{stopPropagation:!0,key:"gps",type:"button",onClick:function(){}},r.a.createElement(Mo,null))]},i.image&&r.a.createElement(so,{scrollTo:!0,image:"/upload/images/".concat(i.image.thumbFileName),altText:"pic",width:i.image.thumbWidth,height:i.image.thumbHeight,fullImage:"/upload/images/".concat(i.image.fileName),fullWidth:i.image.width,fullHeight:i.image.height}),r.a.createElement("p",null,"Name: ".concat(i.aliasName||i.username)),u.size>0&&r.a.createElement("p",null,"Affiliations: ".concat(Object(z.a)(u.values()).map((function(e){return e.teamName})).join(", "))))})),Ic=function(){var e=Object(Te.a)(Ae.a.mark((function e(t){var n,a,r;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.room,a=Object(V.a)(Object(V.a)({},n),{},{ownerAliasId:Qe(fe.getState())||void 0}),e.next=4,Vt(Lt,{room:a});case 4:return r=e.sent,e.next=7,fe.dispatch(pt({room:r.room,user:r.user}));case 7:return e.abrupt("return",{room:r.room});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kc=function(){var e=Object(Te.a)(Ae.a.mark((function e(t){var n,a,r,o;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,a=t.password,r={roomId:n,password:a,aliasId:Qe(fe.getState())||void 0},e.next=4,Vt(Tt,r);case 4:return o=e.sent,e.next=7,wo({roomId:n});case 7:return e.next=9,fe.dispatch(pt({room:o.room,user:o.user}));case 9:return e.abrupt("return",{room:o.room,user:o.user});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xc=function(){var e=Object(Te.a)(Ae.a.mark((function e(t){var n,a;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,e.next=3,Vt(Dt,{roomId:n});case 3:return a=e.sent,e.next=6,fe.dispatch(ft({rooms:[{objectId:n}]}));case 6:return e.abrupt("return",{room:a.room});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Cc=r.a.memo((function(e){var t=e.id,n=e.index,a=Object(fr.b)(),o=function(e){var n=e.roomName,a=e.password,r=e.topic;Ic({room:{roomName:n,password:a,topic:r}}).then((function(e){var n=e.room;Object(c.b)((function(){fe.dispatch(In({windows:[{id:le.CHAT,value:{type:le.CHAT,roomId:n.objectId}}]})),fe.dispatch(kn({id:t}))}))})).catch((function(e){return console.log(e)}))};return a.errors.repeatPassword&&a.setValue("repeatPassword",""),r.a.createElement(wc,{id:t,index:n,className:"CreateRoomDialog",onClick:function(){fe.dispatch(In({windows:[{id:t,value:{type:le.DIALOGCREATEROOM}}]}))},done:function(){return fe.dispatch(kn({id:t}))},title:"New room",buttons:[r.a.createElement(x,{type:"submit",onClick:function(){return a.handleSubmit(o)()}},"Create")]},r.a.createElement(fr.a,a,r.a.createElement("form",{onSubmit:a.handleSubmit(o)},r.a.createElement("div",{className:"identity"},r.a.createElement("span",null,"You are: "),r.a.createElement(Lo,null)),r.a.createElement(vr,{required:!0,maxLength:20,name:"roomName",placeholder:"Name of the room"}),r.a.createElement(vr,{maxLength:300,name:"topic",placeholder:"(opt) Topic (shown when joining the room)"}),r.a.createElement(vr,{minLength:4,maxLength:100,name:"password",type:"password",placeholder:"(opt) Password"}),r.a.createElement(vr,{minLength:4,maxLength:100,shouldEqual:"password",name:"repeatPassword",type:"password",placeholder:"".concat(a.errors.repeatPassword?"Error. Passwords must match!":"(opt) Repeat password")}))))})),Nc=r.a.memo((function(e){var t=e.id,n=e.roomId,o=e.index,i=Object(a.useState)(),u=Object(l.a)(i,2),s=u[0],d=u[1],m=Object(c.d)((function(e){return Ar(e,{id:n})}));return r.a.createElement(wc,{id:t,index:o,className:"RemoveRoomDialog",error:s,onClick:function(){fe.dispatch(In({windows:[{id:t,value:{type:le.DIALOGREMOVEROOM,roomId:n}}]}))},done:function(){return fe.dispatch(kn({id:t}))},title:"Delete room ".concat(m?m.roomName:""),text:"Are you sure you want to delete ".concat(m?m.roomName:"","?"),buttons:[r.a.createElement(x,{type:"submit",onClick:function(){xc({roomId:n}).then((function(){Object(c.b)((function(){fe.dispatch(In({windows:[{id:le.CHAT,value:{type:le.CHAT}}]})),fe.dispatch(kn({id:t}))}))})).catch((function(e){return d(e)}))}},"Yes")]})})),Sc=r.a.memo((function(e){var t=e.id,n=e.index,o=Object(fr.b)(),c=Object(a.useState)(),i=Object(l.a)(c,2),u=i[0],s=i[1],d=function(){var e=Object(Te.a)(Ae.a.mark((function e(n){var a,r;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.username,r=n.password,zt(a,r).then((function(){fe.dispatch(kn({id:t}))})).catch((function(e){s(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=Object(a.useCallback)((function(){fe.dispatch(In({windows:[{id:t,value:{type:le.DIALOGLOGIN}}]}))}),[t]),f=Object(a.useCallback)((function(){return o.handleSubmit(d)()}),[]),p=Object(a.useCallback)((function(){return fe.dispatch(kn({id:t}))}),[t]);return r.a.createElement(wc,{id:t,index:n,className:"LoginDialog",onClick:m,done:p,error:u,title:"Login",buttons:[r.a.createElement(x,{key:"submit",type:"submit",onClick:f},"Login")]},r.a.createElement(fr.a,o,r.a.createElement("form",{onSubmit:o.handleSubmit(d)},r.a.createElement(vr,{name:"username",placeholder:"Username"}),r.a.createElement(vr,{name:"password",placeholder:"Password",type:"password"}))))})),Lc=function(e){var t=e.onChange,n=e.children,o=e.name,c=e.defaultValue,i=e.required,u=void 0!==i&&i,s=e.placeholder,d=void 0===s?"":s,m=e.multiple,f=void 0!==m&&m,p=Object(fr.c)().register,h=Object(a.useState)(!1),v=Object(l.a)(h,2),g=v[0],y=v[1],b=Object(a.useState)(!1),E=Object(l.a)(b,2),O=E[0],w=E[1],j=function(e){var t=Array.from(e.target.selectedOptions).filter((function(e){return""!==e.value}));g&&u&&w(0===t.length)};return r.a.createElement("select",{defaultValue:c,required:u,name:o,ref:p,className:"Select ".concat(O?"empty":""),onFocus:function(){return y(!0)},onBlur:j,onChange:function(e){j(e),t&&t(Array.from(e.target.selectedOptions).map((function(e){return e.value})).filter((function(e){return""!==e})))},placeholder:d,multiple:f},n)},Rc=Lc;Lc.defaultProps={multiple:!1,children:void 0,placeholder:"",required:!1,onChange:void 0,defaultValue:void 0};var Ac=function(e){var t=e.onChange,n=e.name,o=e.maxLength,c=e.required,i=void 0!==c&&c,u=e.placeholder,s=void 0===u?"":u,d=Object(fr.c)().register,m=Object(a.useState)(!1),f=Object(l.a)(m,2),p=f[0],h=f[1],v=Object(a.useState)(!1),g=Object(l.a)(v,2),y=g[0],b=g[1];return r.a.createElement("textarea",{maxLength:o,required:i,name:n,ref:d({maxLength:o}),defaultValue:"",className:y?"empty":"",onFocus:function(){return h(!0)},onBlur:function(e){var t=e.target.value.trim();p&&i&&b(""!==t)},onChange:function(e){t&&t(e.target.value)},placeholder:s})},Tc=Ac;Ac.defaultProps={placeholder:"",required:!1,onChange:void 0,maxLength:void 0};var Pc=function(){var e=Object(Te.a)(Ae.a.mark((function e(t){var n,a;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t).user.registerDevice=Ye(),e.next=4,Vt(Nt,n);case 4:return a=e.sent,e.next=7,fe.dispatch(st(a));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dc=function(){var e=Object(Te.a)(Ae.a.mark((function e(t){var n,a,r;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,a=t.user,e.next=3,Vt(Mt,{userId:n,user:a});case 3:return r=e.sent,e.next=6,fe.dispatch(lt({users:[r.user]}));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mc=r.a.memo((function(e){var t=e.id,n=e.index,o=Object(fr.b)(),i=Object(a.useState)(),u=Object(l.a)(i,2),d=u[0],m=(u[1],Object(a.useState)()),f=Object(l.a)(m,2),p=f[0],h=f[1],v=Object(c.d)(s),g=function(){var e=Object(Te.a)(Ae.a.mark((function e(n){var a,r,o,c,i,l,u;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.offName,r=n.username,o=n.password,c=n.repeatPassword,i=n.pronouns,l=n.description,(!v||a)&&r&&o&&c&&i){e.next=3;break}return e.abrupt("return");case 3:if(o===c){e.next=5;break}return e.abrupt("return");case 5:return u={image:d,user:{offName:a,username:r,password:o,pronouns:i,description:l?l.split("\n"):void 0}},e.prev=6,e.next=9,Pc(u);case 9:return e.next=11,zt(r,o);case 11:fe.dispatch(kn({id:t})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),h(e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),y=Object(a.useCallback)((function(){fe.dispatch(In({windows:[{id:t,value:{type:le.DIALOGREGISTER}}]}))}),[t]),b=Object(a.useCallback)((function(){return fe.dispatch(kn({id:t}))}),[t]),E=Object(a.useCallback)((function(){return o.handleSubmit(g)()}),[]);return r.a.createElement(wc,{id:t,index:n,error:p,onClick:y,done:b,title:"Register user",buttons:[r.a.createElement(x,{type:"submit",onClick:E},"Register")]},r.a.createElement(fr.a,o,r.a.createElement("form",{onSubmit:o.handleSubmit(g)},v&&r.a.createElement(vr,{required:!0,name:"offName",placeholder:"Out-of-game name"}),r.a.createElement(vr,{required:!0,name:"username",placeholder:"Username"}),r.a.createElement(Rc,{multiple:!0,required:!0,name:"pronouns"},r.a.createElement("option",{value:""},"---Choose pronouns---"),r.a.createElement("option",{value:"they"},"They/Them"),r.a.createElement("option",{value:"she"},"She/Her"),r.a.createElement("option",{value:"he"},"He/Him"),r.a.createElement("option",{value:"it"},"It")),r.a.createElement(vr,{required:!0,name:"password",placeholder:"Password",type:"password"}),r.a.createElement(vr,{required:!0,shouldEqual:"password",name:"repeatPassword",placeholder:"Repeat password",type:"password"}),r.a.createElement(Tc,{name:"description",placeholder:"Description"}))))})),Wc=function(){var e=Object(Te.a)(Ae.a.mark((function e(t){var n;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vt(Ct,t);case 2:return n=e.sent,e.next=5,fe.dispatch(Et(n));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fc=r.a.memo((function(e){var t=e.id,n=e.index,o=Object(fr.b)(),c=Object(a.useState)(),i=Object(l.a)(c,2),u=i[0],s=(i[1],function(){var e=Object(Te.a)(Ae.a.mark((function e(n){var a,r,o;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.aliasName,r=n.pronouns,o=n.description,Wc({image:u,alias:{aliasName:a,pronouns:r,description:o}}).then((function(){return fe.dispatch(kn({id:t}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d=Object(a.useCallback)((function(){fe.dispatch(In({windows:[{id:t,value:{type:le.DIALOGCREATEALIAS}}]}))}),[t]),m=Object(a.useCallback)((function(){return fe.dispatch(kn({id:t}))}),[t]),f=Object(a.useCallback)((function(){return o.handleSubmit(s)()}),[]);return r.a.createElement(wc,{id:t,index:n,title:"New alias",onClick:d,done:m,buttons:[r.a.createElement(x,{stopPropagation:!0,type:"submit",onClick:f},"Create")]},r.a.createElement(fr.a,o,r.a.createElement("form",{onSubmit:o.handleSubmit(s)},r.a.createElement(vr,{required:!0,name:"aliasName",placeholder:"Alias name"}),r.a.createElement(Rc,{multiple:!0,required:!0,name:"pronouns"},r.a.createElement("option",{value:""},"---Choose pronouns---"),r.a.createElement("option",{value:"they"},"They/Them"),r.a.createElement("option",{value:"she"},"She/Her"),r.a.createElement("option",{value:"he"},"He/Him"),r.a.createElement("option",{value:"it"},"It")),r.a.createElement(Tc,{name:"description",placeholder:"Description"}))))})),Gc=function(){var e=Object(Te.a)(Ae.a.mark((function e(t){var n,a,r;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction,a=Object(V.a)(Object(V.a)({},n),{},{ownerAliasId:Qe(fe.getState())||void 0}),e.next=4,Vt(At,{transaction:a});case 4:return r=e.sent,e.next=7,fe.dispatch(tt(r));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Hc=r.a.memo((function(e){var t=e.id,n=e.toWalletId,o=e.index,i=Object(fr.b)(),l=Object(c.d)(Ze),u=Object(c.d)(mr),s=Object(c.d)((function(e){return cn(e,{ids:u})})),d=Object(c.d)((function(e){return un(e,{id:n})})),m=[],f=function(){var e=Object(Te.a)(Ae.a.mark((function e(a){var r,o,c;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.note,o=a.amount,c=a.fromWalletId,Gc({transaction:{note:r,amount:o,fromWalletId:c,toWalletId:n}}).then((function(){return fe.dispatch(kn({id:t}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();s.forEach((function(e){m.push(r.a.createElement("option",{key:e.objectId,value:e.objectId},e.teamName||e.aliasName||e.username))}));var p=Object(a.useCallback)((function(){fe.dispatch(In({windows:[{id:t,value:{type:le.DIALOGCREATETRANSACTION,toWalletId:n}}]}))}),[t,n]),h=Object(a.useCallback)((function(){return fe.dispatch(kn({id:t}))}),[t]),v=Object(a.useCallback)((function(){return i.handleSubmit(f)()}),[]);return r.a.createElement(wc,{id:t,index:o,title:"Transfer to ".concat(d.teamName||d.aliasName||d.username),onClick:p,done:h,buttons:[r.a.createElement(x,{stopPropagation:!0,key:"submit",type:"submit",onClick:v},"Transfer")]},r.a.createElement(fr.a,i,r.a.createElement("form",{onSubmit:i.handleSubmit(f)},r.a.createElement("p",null,"You are making a transfer to ".concat(d.teamName||d.aliasName||d.username)),r.a.createElement("div",null,r.a.createElement("span",null,"From your wallet: "),r.a.createElement(Rc,{required:!0,defaultValue:l,name:"fromWalletId"},r.a.createElement("option",{value:""},"---Choose wallet---"),r.a.createElement(r.a.Fragment,null,m))),r.a.createElement(vr,{required:!0,name:"amount",placeholder:"Amount"}),r.a.createElement(vr,{name:"note",placeholder:"Note"}))))})),Bc=(n(71),function(e,t){var n=t.id;return e.docFiles.get(n)}),Uc=Qt()([function(e){return e.docFiles}],(function(e){return Object(z.a)(e.values()).map((function(e){return{objectId:e.objectId,title:e.title}}))}))((function(){return"docFile-ids-names"})),Yc=(n(72),r.a.memo((function(e){var t=e.docFileId,n=e.onChange,a=Object(c.d)((function(e){return Bc(e,{id:t})}));return r.a.createElement(fn,{stopPropagation:!0,className:"DocFileItem",key:a.objectId,onClick:function(){a.isLocked?console.log("locked"):n(t)}},a.title,a.isLocked&&r.a.createElement("div",{className:"lock"},r.a.createElement(Vr,null)))}))),Vc=r.a.memo((function(e){var t=e.onChange,n=Object(c.d)(Uc);return r.a.createElement(Le,{dropdown:!0,checkWidth:!0,title:"Documents"},n.sort((function(e,t){var n=e.title.toLowerCase(),a=t.title.toLowerCase();return n>a?1:n<a?-1:0})).map((function(e){var n=e.objectId;return r.a.createElement(Yc,{key:n,docFileId:n,onChange:t})})))})),zc=(n(73),r.a.memo((function(e){var t=e.docFileId,n=Object(c.d)((function(e){return Bc(e,{id:t})})),a=Object(c.d)((function(e){return un(e,{id:n.ownerAliasId||n.ownerId})}));return r.a.createElement("div",{className:"DocFileViewer"},r.a.createElement("h1",{className:"title"},n.title),r.a.createElement("div",{className:"info"},r.a.createElement("p",{className:"author"},"Author: ".concat(a.teamName||a.aliasName||a.username)),r.a.createElement("p",{className:"code"},"Code: ".concat(n.code)),r.a.createElement("p",{className:"public"},"Public: ".concat(n.isPublic?"Yes":"No"))),r.a.createElement("div",{className:"text"},n.text.join("\n")))}))),qc=function(e){var t=e.id,n=e.docFileId,o=e.index,i=Object(a.useState)(),u=Object(l.a)(i,2),s=u[0],d=u[1],m=Object(c.d)((function(e){return Bc(e,{id:n})}));Object(a.useEffect)((function(){n&&s!==n&&d(n)}),[n]);var f=Object(a.useCallback)((function(){fe.dispatch(In({windows:[{id:t,value:{type:le.DOCFILE}}]}))}),[]),p=Object(a.useCallback)((function(){return fe.dispatch(kn({id:t}))}),[t]),h=Object(a.useCallback)((function(e){return d(e)}),[]),v=Object(a.useCallback)((function(){return fe.dispatch(In({windows:[{id:le.DIALOGCREATEDOCFILE,value:{type:le.DIALOGCREATEDOCFILE}}]}))}));return r.a.createElement(or,{id:t,index:o,done:p,className:"DocFile",title:"".concat(m?"Document: ".concat(m.title):"Documents"),onClick:f,menu:r.a.createElement(r.a.Fragment,null,r.a.createElement(yc,{id:t},r.a.createElement(fn,{stopPropagation:!0,onClick:v,key:"createDocFile"},"New document")),r.a.createElement(Vc,{onChange:h}))},!s&&r.a.createElement("div",null),s&&r.a.createElement(zc,{key:"viewer",docFileId:s}))},Jc=r.a.memo(qc);qc.defaultProps={docFileId:void 0};var Kc=function(){var e=Object(Te.a)(Ae.a.mark((function e(t){var n,a,r,o;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.docFile,a=t.images,r=Object(V.a)(Object(V.a)({},n),{},{code:""!==n.code?n.code:void 0,ownerAliasId:Qe(fe.getState())||void 0,text:n.text.split("\n")}),e.next=4,Vt(Rt,{docFile:r,images:a});case 4:return o=e.sent,e.next=7,fe.dispatch(It({docFiles:[o.docFile]}));case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qc=(n(74),r.a.memo((function(e){var t=e.id,n=e.index,o=Object(fr.b)(),c=Object(a.useState)(),i=Object(l.a)(c,2),u=i[0],s=(i[1],function(){var e=Object(Te.a)(Ae.a.mark((function e(n){var a,r,o,c;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.title,r=n.text,o=n.code,c=n.isPublic,Kc({images:u?[u]:void 0,docFile:{title:a,text:r,code:o,isPublic:c}}).then((function(){return fe.dispatch(kn({id:t}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return r.a.createElement(wc,{id:t,index:n,className:"CreateDocFileDialog",title:"New document",onClick:function(){fe.dispatch(In({windows:[{id:t,value:{type:le.DIALOGCREATEDOCFILE}}]}))},done:function(){return fe.dispatch(kn({id:t}))},buttons:[r.a.createElement(x,{stopPropagation:!0,type:"submit",onClick:function(){return o.handleSubmit(s)()}},"Create")]},r.a.createElement(fr.a,o,r.a.createElement("form",{onSubmit:o.handleSubmit(s)},r.a.createElement("div",{className:"identity"},r.a.createElement("span",null,"You are:"),r.a.createElement(Lo,null)),r.a.createElement("div",{className:"public"},r.a.createElement(vr,{type:"checkbox",name:"isPublic"}),r.a.createElement("span",null,"Do you want it to be available to the public? (A user with the right code can always access the document)")),r.a.createElement(vr,{required:!0,maxLength:40,name:"title",placeholder:"Title"}),r.a.createElement(vr,{name:"code",placeholder:"Code"}),r.a.createElement(Tc,{required:!0,maxLength:3500,name:"text",placeholder:"Text"}))))})));n(75);function Xc(){return(Xc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Zc(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var $c=r.a.createElement("line",{x1:5,y1:12,x2:19,y2:12}),_c=r.a.createElement("polyline",{points:"12 5 19 12 12 19"}),ei=function(e){var t=e.svgRef,n=e.title,a=Zc(e,["svgRef","title"]);return r.a.createElement("svg",Xc({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-right",ref:t},a),n?r.a.createElement("title",null,n):null,$c,_c)},ti=r.a.forwardRef((function(e,t){return r.a.createElement(ei,Xc({svgRef:t},e))})),ni=(n.p,n(76),r.a.memo((function(e){var t=e.message;return r.a.createElement(fn,{className:"DashNewsItem",key:t.objectId,onClick:function(){return fe.dispatch(In({windows:[{id:le.NEWS,value:{type:le.NEWS,messageId:t.objectId}}]}))}},r.a.createElement("p",null,t.text[0],r.a.createElement(ti,null)))}))),ai=r.a.memo((function(){var e=Object(c.d)(nn),t=Object(c.d)((function(t){return sr(t,{id:e.objectId})})),n=Object(c.d)(lc),a=function(){return n&&0!==n.length?Object(z.a)(n).sort((function(e,t){var n=e.points,a=t.points;return n>a?-1:n<a?1:0})).slice(0,5).map((function(e){return r.a.createElement(ni,{key:e.objectId,message:e})})):[r.a.createElement(fn,{key:"noNews"},"There are no news.")]};return r.a.createElement("div",{className:"Dashboard"},e.isAnonymous&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Welcome!"),r.a.createElement("p",null,g(fe.getState(),{date:new Date}).fullDate),r.a.createElement(Le,{alwaysExpanded:!0,title:"Top News",className:"news"},a())),!e.isAnonymous&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Welcome, ".concat(e.username,"!")),r.a.createElement("p",null,"Today's date is ".concat(g(fe.getState(),{date:new Date}).fullDate)),t&&r.a.createElement("p",null,"You have ".concat(t.amount," in your wallet.")),r.a.createElement(Le,{alwaysExpanded:!0,title:"News",className:"news"},a())))}));function ri(){return(ri=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function oi(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ci=r.a.createElement("polyline",{points:"6 9 12 15 18 9"}),ii=function(e){var t=e.svgRef,n=e.title,a=oi(e,["svgRef","title"]);return r.a.createElement("svg",ri({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-chevron-down",ref:t},a),n?r.a.createElement("title",null,n):null,ci)},li=r.a.forwardRef((function(e,t){return r.a.createElement(ii,ri({svgRef:t},e))}));n.p;function ui(){return(ui=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function si(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var di=r.a.createElement("polyline",{points:"18 15 12 9 6 15"}),mi=function(e){var t=e.svgRef,n=e.title,a=si(e,["svgRef","title"]);return r.a.createElement("svg",ui({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-chevron-up",ref:t},a),n?r.a.createElement("title",null,n):null,di)},fi=r.a.forwardRef((function(e,t){return r.a.createElement(mi,ui({svgRef:t},e))})),pi=(n.p,n(77),function(e){var t=e.messageId,n=e.expand,o=void 0!==n&&n,i=e.className,u=void 0===i?"":i,s=Object(a.useRef)(),d=Object(a.useState)(!1),m=Object(l.a)(d,2),f=m[0],p=m[1],h=Object(c.d)((function(e){return oc(e,{id:t})})),v=Object(c.d)((function(e){return un(e,{id:h.teamId||h.ownerAliasId||h.ownerId})}));return Object(a.useEffect)((function(){p(o)}),[o]),r.a.createElement(fn,{scrollTo:f,ref:s,elementId:"news-".concat(t),onClick:function(){return p(!f)},className:"NewsItem ".concat(f?"expanded":""," ").concat(u)},r.a.createElement("div",{className:"title"},r.a.createElement("p",null,h.text[0]),r.a.createElement("p",{className:"info"},r.a.createElement("span",null,"".concat(g(fe.getState(),{date:h.customTimeCreated||h.timeCreated}).halfDate," "),g(fe.getState(),{date:h.customTimeCreated||h.timeCreated}).halfTime),r.a.createElement("span",null," By: ".concat(v.teamName||v.aliasName||v.username)),!f&&r.a.createElement(li,null),f&&r.a.createElement(fi,null))),f&&r.a.createElement("div",{className:"newsContent"},h.image&&h.image.thumbFileName&&r.a.createElement(so,{image:"/upload/images/".concat(h.image.thumbFileName),fullImage:"/upload/images/".concat(h.image.fileName),altText:"pic",width:h.image.thumbWidth,height:h.image.thumbHeight,fullWidth:h.image.width,fullHeight:h.image.height}),r.a.createElement("div",{className:"text"},h.text.slice(1).map((function(e,t){return r.a.createElement("p",{key:t},e)})))))}),hi=r.a.memo(pi);pi.defaultProps={className:"",expand:!1};n(78);var vi=function(e){var t=e.messageId,n=Object(a.useRef)(null),o=Object(c.d)(uc);return r.a.createElement(Le,{observe:"upper",ref:n,className:"NewsList"},0===o.length&&[r.a.createElement(fn,{key:"noNews"},r.a.createElement("p",null,"There are no news"))],Object(z.a)(o).filter((function(e){return e.points&&e.points>0})).sort((function(e,t){var n=e.points,a=t.points;return n>a?-1:n<a?1:0})).slice(0,3).map((function(e){return r.a.createElement(hi,{key:"top-".concat(e.objectId),messageId:e.objectId,className:"topNews"})})).concat(Object(z.a)(o).map((function(e){return r.a.createElement(hi,{expand:e.objectId===t,key:e.objectId,messageId:e.objectId})}))))},gi=r.a.memo(vi);vi.defaultProps={messageId:void 0};n(79);var yi=function(e){var t=e.id,n=e.messageId,o=e.index,i=Object(c.d)((function(e){return Ar(e,{id:h(e)})})),l=Object(a.useCallback)((function(){fe.dispatch(In({windows:[{id:t,value:{type:le.NEWS,messageId:n}}]}))}),[n]),u=Object(a.useCallback)((function(){return fe.dispatch(kn({id:t}))}),[t]),s=Object(a.useCallback)((function(){return fe.dispatch(In({windows:[{id:le.DIALOGCREATENEWS,value:{type:le.DIALOGCREATENEWS}}]}))}),[]);return r.a.createElement(or,{id:t,index:o,done:u,className:"News",title:"News",onClick:l,menu:r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(yc,{id:t},r.a.createElement(fn,{stopPropagation:!0,key:"createNews",onClick:s},"New article")))},r.a.createElement(gi,{messageId:n}))},bi=r.a.memo(yi);yi.defaultProps={messageId:void 0};var Ei=r.a.memo((function(e){var t=e.id,n=e.index,o=Object(c.d)(v),i=Object(c.d)(Ze),u=Object(c.d)((function(e){return sr(e,{id:i})})),s=Object(fr.b)(),d=Object(a.useState)(),m=Object(l.a)(d,2),f=m[0],p=(m[1],function(e){var n=e.title,a=e.text,r=e.image;Oo({title:n,text:a,image:r}).then((function(e){var n=e.message;Object(c.b)((function(){fe.dispatch(In({windows:[{id:le.NEWS,value:{type:le.NEWS,messageId:n.objectId}}]})),fe.dispatch(kn({id:t}))}))})).catch((function(e){return console.log(e)}))});return r.a.createElement(wc,{id:t,index:n,className:"CreateNewsDialog",onClick:function(){fe.dispatch(In({windows:[{id:t,value:{type:le.DIALOGCREATENEWS}}]}))},done:function(){return fe.dispatch(kn({id:t}))},error:f,title:"New article",buttons:[r.a.createElement(x,{key:"submit",type:"submit",onClick:function(){return s.handleSubmit(p)()}},"Create")]},r.a.createElement(fr.a,s,r.a.createElement("form",{onSubmit:s.handleSubmit(p)},r.a.createElement("div",{className:"identity"},r.a.createElement("span",null,"You are:"),r.a.createElement(Lo,null)),r.a.createElement("div",null,r.a.createElement("p",null,"The article fee is: ".concat(o)),r.a.createElement("p",null,"You have ".concat(u.amount," in your wallet"))),r.a.createElement(vr,{required:!0,maxLength:200,name:"title",placeholder:"Title"}),r.a.createElement(bo,null),r.a.createElement(Tc,{required:!0,maxLength:800,name:"text",placeholder:"Text"}))))}));function Oi(){return(Oi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function wi(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ji=r.a.createElement("rect",{x:3,y:11,width:18,height:11,rx:2,ry:2}),Ii=r.a.createElement("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"}),ki=function(e){var t=e.svgRef,n=e.title,a=wi(e,["svgRef","title"]);return r.a.createElement("svg",Oi({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-unlock",ref:t},a),n?r.a.createElement("title",null,n):null,ji,Ii)},xi=r.a.forwardRef((function(e,t){return r.a.createElement(ki,Oi({svgRef:t},e))})),Ci=(n.p,r.a.memo((function(e){var t=e.roomId,n=e.id,o=e.index,i=Object(a.useState)(),u=Object(l.a)(i,2),s=u[0],d=u[1],m=Object(c.d)((function(e){return Ar(e,{id:t})})),f=Object(c.d)(nn),p=Object(fr.b)(),h=ce({objectToAccess:m,toAuth:f}).hasAccess,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.password;kc({roomId:t,password:a}).then((function(){Object(c.b)((function(){fe.dispatch(In({windows:[{id:le.CHAT,value:{type:le.CHAT,roomId:t}}]})),fe.dispatch(kn({id:n}))}))})).catch((function(e){var t=Object(V.a)({},e);console.log(e),"not allowed"===e.type&&(t.message="Incorrect password"),d(t)}))};return r.a.createElement(wc,{id:n,error:s,index:o,className:"JoinRoomDialog",onClick:function(){fe.dispatch(In({windows:[{id:n,value:{type:le.DIALOGJOINROOM,roomId:t}}]}))},done:function(){return fe.dispatch(kn({id:n}))},title:h?"Join room ".concat(m.roomName):"Unlock room ".concat(m.roomName),buttons:[r.a.createElement(x,{stopPropagation:!0,type:"submit",onClick:function(){return p.handleSubmit(v)()}},!h&&r.a.createElement(xi,null),r.a.createElement("span",null,h?"Join":"Unlock"))]},r.a.createElement(fr.a,p,r.a.createElement("form",{onSubmit:p.handleSubmit(v)},r.a.createElement("div",{className:"identity"},r.a.createElement("span",null,"You are: "),r.a.createElement(Lo,null)),r.a.createElement("div",null,h&&r.a.createElement("p",null,"Do you want to join room ".concat(m.roomName,"?")),h&&m.topic&&r.a.createElement("p",null,"Topic: ".concat(m.topic)),!h&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"The room is locked."),r.a.createElement("p",null,"Enter the password to continue:"))),!h&&r.a.createElement(vr,{required:!h,minLength:4,maxLength:100,name:"password",type:"password",placeholder:"Password"}))))}))),Ni=(n(80),r.a.memo((function(e){var t=e.id,n=e.index,o=Object(fr.b)(),i=Object(c.d)(nn),l=i.systemConfig,u=void 0===l?{}:l,s=function(e){var n=e.hideHelp,a=e.hideTopBar,r=e.alwaysMaximized,o=e.hideMenuBar,c=e.openApp;Dc({userId:i.objectId,user:{systemConfig:Object(V.a)(Object(V.a)({},u),{},{hideHelp:n,hideTopBar:a,alwaysMaximized:r,hideMenuBar:o,openApp:c})}}).then((function(){return fe.dispatch(kn({id:t}))})).catch((function(e){return console.log(e)}))},d=Object(a.useCallback)((function(){fe.dispatch(In({windows:[{id:t,value:{type:le.DIALOGCONFIGSYSTEM}}]}))}),[t]),m=Object(a.useCallback)((function(){return fe.dispatch(kn({id:t}))}),[t]),f=Object(a.useCallback)((function(){return o.handleSubmit(s)()}),[]);return r.a.createElement(wc,{className:"ConfigSystemDialog",id:t,index:n,title:"System config: ".concat(i.username),onClick:d,done:m,buttons:[r.a.createElement(x,{stopPropagation:!0,key:"submit",onClick:f,type:"submit"},"Update")]},r.a.createElement(fr.a,o,r.a.createElement("form",{onSubmit:o.handleSubmit(s)},r.a.createElement("div",null,r.a.createElement("span",null,"Auto-open app?"),r.a.createElement(Rc,{defaultValue:u.openApp,name:"openApp"},r.a.createElement("option",{value:""},"---No app---"),r.a.createElement("option",{value:le.CHAT},"Chat"),r.a.createElement("option",{value:le.WALLET},"Wallet"),r.a.createElement("option",{value:le.WORLDMAP},"Map"),r.a.createElement("option",{value:le.DOCFILE},"Files"),r.a.createElement("option",{value:le.NEWS},"News"))),r.a.createElement("div",null,r.a.createElement("span",null,"Hide help buttons?"),r.a.createElement(vr,{type:"checkbox",name:"hideHelp",checked:u.hideHelp})),r.a.createElement("div",null,r.a.createElement("span",null,"Hide top row in windows? (Windows will be auto-maximized. You can close and change settings on a window under File)?"),r.a.createElement(vr,{type:"checkbox",name:"hideTopBar",checked:u.hideTopBar})),r.a.createElement("div",null,r.a.createElement("span",null,"Automatically maximize windows?"),r.a.createElement(vr,{type:"checkbox",name:"alwaysMaximized",checked:u.alwaysMaximized})),r.a.createElement("div",null,r.a.createElement("span",null,"Minimize main menu?"),r.a.createElement(vr,{type:"checkbox",name:"hideMenuBar",checked:u.hideMenuBar})))))}))),Si=(n(81),r.a.memo((function(){var e=Object(c.d)(nn).systemConfig,t=void 0===e?{}:e,n=Object(c.d)(pa),o=[];return Object(a.useEffect)((function(){t.openApp&&fe.dispatch(In({windows:[{id:t.openApp,value:{type:t.openApp}}]}))}),[t.openApp]),n.forEach((function(e,t){var n=e.type;n===le.CHAT?o.push(r.a.createElement(Ec,{key:t,id:t,roomId:e.roomId,index:e.index})):n===le.WALLET?o.push(r.a.createElement(jr,{key:t,id:t,index:e.index})):n===le.WORLDMAP?o.push(r.a.createElement(Lr,{key:t,id:t,index:e.index})):n===le.DOCFILE?o.push(r.a.createElement(Jc,{key:t,id:t,docFileId:e.docFileId,index:e.index})):n===le.NEWS?o.push(r.a.createElement(bi,{key:t,id:t,messageId:e.messageId,index:e.index})):n===le.DIALOGIDENTITY?o.push(r.a.createElement(jc,{key:t,id:t,identityId:e.identityId,index:e.index})):n===le.DIALOGCREATEROOM?o.push(r.a.createElement(Cc,{key:t,id:t,index:e.index})):n===le.DIALOGLOGIN?o.push(r.a.createElement(Sc,{key:t,id:t,index:e.index})):n===le.DIALOGREGISTER?o.push(r.a.createElement(Mc,{key:t,id:t,index:e.index})):n===le.DIALOGREMOVEROOM?o.push(r.a.createElement(Nc,{key:t,id:t,roomId:e.roomId,index:e.index})):n===le.DIALOGCREATEALIAS?o.push(r.a.createElement(Fc,{key:t,id:t,index:e.index})):n===le.DIALOGCREATETRANSACTION?o.push(r.a.createElement(Hc,{key:t,id:t,toWalletId:e.toWalletId,index:e.index})):n===le.DIALOGCREATEDOCFILE?o.push(r.a.createElement(Qc,{key:t,id:t,index:e.index})):n===le.DIALOGCREATENEWS?o.push(r.a.createElement(Ei,{key:t,id:t,index:e.index})):n===le.DIALOGJOINROOM?o.push(r.a.createElement(Ci,{key:t,id:t,roomId:e.roomId,index:e.index})):n===le.DIALOGCONFIGSYSTEM&&o.push(r.a.createElement(Ni,{key:t,id:t,index:e.index}))})),r.a.createElement("div",{key:"mainWindow",id:"MainWindow"},r.a.createElement(ai,null),o)})));var Li=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(Da,null),r.a.createElement(Ta,null),r.a.createElement(Si,null)))},Ri=(n(82),n(83));Object(i.a)(),Ri.ElementQueries.listen(),Object(o.render)(r.a.createElement(c.a,{store:fe},r.a.createElement(Li,null)),document.getElementById("root"))}]),[[31,1,2]]]);
//# sourceMappingURL=main.3b187fff.chunk.js.map