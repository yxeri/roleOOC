(this.webpackJsonproleterminal=this.webpackJsonproleterminal||[]).push([[0],Array(31).concat([function(e,t,n){e.exports=n(82)},,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(14),c=n(1),i=n(29),l=n(3),s=function(e){return e>9?"".concat(e):"0".concat(e)},u=function(e){return e.config.get("requireOffName")},d=function(e){return e.config.get("publicRoomId")},m=function(e){return e.config.get("allowedImages")},f=function(e){return e.config.get("gpsTracking")},p=function(e){return e.config.get("permissions")},h=function(e){return e.config.get("newsRoomId")},v=function(e,t){var n=t.date,r=t.offset,a=t.lockDate,o=new Date(n),c={},i=e.config,l=i.yearModification,u=i.dayModification;return r&&o.setHours(o.getHours()+r),a||Number.isNaN(l)||(l&&!Number.isNaN(l)&&o.setFullYear(o.getFullYear()+parseInt(l,10)),u&&!Number.isNaN(u)&&o.setDate(o.getDate()+parseInt(u,10))),c.mins=s(o.getMinutes()),c.hours=s(o.getHours()),c.seconds=s(o.getSeconds()),c.month=s(o.getMonth()+1),c.day=s(o.getDate()),c.year=o.getFullYear(),c.halfTime="".concat(c.hours,":").concat(c.mins),c.fullTime="".concat(c.halfTime,":").concat(c.seconds),c.halfDate="".concat(c.day,"/").concat(c.month),c.fullDate="".concat(c.halfDate,"/").concat(c.year),c.fullStamp="".concat(c.halfTime," ").concat(c.fullDate),c};function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var b=a.a.createElement("circle",{cx:12,cy:12,r:10}),E=a.a.createElement("polyline",{points:"12 6 12 12 16 14"}),O=function(e){var t=e.svgRef,n=e.title,r=y(e,["svgRef","title"]);return a.a.createElement("svg",g({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-clock",ref:t},r),n?a.a.createElement("title",null,n):null,b,E)},w=a.a.forwardRef((function(e,t){return a.a.createElement(O,g({svgRef:t},e))})),j=(n.p,n(10)),I=(n(41),a.a.forwardRef((function(e,t){var n=e.onClick,r=e.children,o=e.disabled,c=e.stopPropagation,i=e.classNames,l=void 0===i?[""]:i,s=e.type,u=void 0===s?"button":s;return a.a.createElement("button",{ref:t,className:"".concat(["Button"].concat(l).join(" ")),disabled:o,type:u,onClick:function(e){console.log("click"),n(e),c&&e.stopPropagation()}},r)}))),k=a.a.memo(I);I.propTypes={onClick:j.func.isRequired,children:j.node.isRequired,type:Object(j.oneOf)(["button","submit"]),disabled:j.bool,classNames:Object(j.arrayOf)(j.string),stopPropagation:j.bool},I.defaultProps={type:"button",disabled:void 0,classNames:[],stopPropagation:void 0};var x=n(12),N=n(27),C="aliases",R="devices",L="docFiles",S="forums",T="forumPosts",A="forumThreads",P="gameCodes",D="invitations",M="messages",W="rooms",F="simpleMsgs",G="teams",H="transactions",B="users",V="wallets",U=n(6),q=n(4),z="update",Y="create",J="remove",K=function(e,t){var n=new Map(Object(q.a)(e)),r=t.type,a=t.payload,o=a.changeType,c=a[r];switch(o){case Y:return n.set(c.objectId,c),n;case z:var i=n.get(c.objectId)||{},l=Object(U.a)(Object(U.a)({},i),c);return i===l?e:(n.set(c.objectId,l),n);case J:return n.has(c.objectId)?(n.delete(c.objectId),n):e;default:return e}},Q=function(e,t){var n=t.type,r=t.payload,a=r.reset,o=r.changeType,c=a?new Map:new Map(Object(q.a)(e)),i=r[n];switch(o){case Y:return i.forEach((function(e){return c.set(e.objectId,e)})),c;case z:return i.forEach((function(e){var t=c.get(e.objectId)||{},n=Object(U.a)(Object(U.a)({},t),e);t!==n&&c.set(e.objectId,n)})),c;case J:return i.forEach((function(e){return c.delete(e.objectId)})),c;default:return e}};var X="chat",Z="whisper",$="news";var _="online",ee="offline",te="reconnecting";var ne=0,re=1,ae=4,oe=function(e){var t=e.objectToAccess,n=e.toAuth;if(!t||!n)return{canSee:!1,hasFullAccess:!1,hasAccess:!1};var r=t.ownerId,a=t.ownerAliasId,o=t.teamId,c=t.isPublic,i=t.visibility,l=t.teamIds,s=void 0===l?[]:l,u=t.userIds,d=void 0===u?[]:u,m=t.userAdminIds,f=void 0===m?[]:m,p=t.teamAdminIds,h=void 0===p?[]:p,v=n.hasFullAccess,g=n.partOfTeams,y=void 0===g?[]:g,b=n.accessLevel,E=void 0===b?ne:b,O=n.objectId,w=n.teamIds,j=void 0===w?[]:w,I=n.aliases,k=void 0===I?[]:I,x=a&&k.includes(a),N=o&&y.includes(o),C=d.concat([r]).includes(O),R=N||s.find((function(e){return j.includes(e)})),L=x||k.find((function(e){return d.includes(e)})),S=f.includes(O),T=x||k.find((function(e){return f.includes(e)})),A=N||h.find((function(e){return j.includes(e)})),P=r===O||v||E>=ae;return{canSee:P||c||C||R||L||E>=i,hasAccess:P||c||C||R||L,hasFullAccess:P||S||A||T}},ce=new Map;ce.set("broadcastId","111111111111111111111116"),ce.set("publicRoomId","111111111111111111111110"),ce.set("newsRoomId","111111111111111111111114"),ce.set("defaultForum","111111111111111111111120"),ce.set("defaultLanguage","en"),ce.set("centerCoordinates",{longitude:0,latitude:0}),ce.set("cornerOneCoordinates",{longitude:0,latitude:0}),ce.set("cornerTwoCoordinates",{longitude:0,latitude:0}),ce.set("defaultZoomLevel",15),ce.set("yearModification",0),ce.set("dayModification",0),ce.set("requireOffName",!1),ce.set("activateTermination",!1),ce.set("allowedImages",{CHAT:!1,PROFILE:!1,DOCFILE:!1}),ce.set("permissions",{CreateAlias:{name:"CreateAlias",accessLevel:re},CreateUser:{name:"CreateUser",accessLevel:ne}}),ce.set("anonymousUser",{accessLevel:ne,followingRooms:[],objectId:"-1",isAnonymous:!0});var ie={WALLET:"wallet",CHAT:"chat",WORLDMAP:"worldMap",DOCFILE:"docFile",NEWS:"news",DIALOGIDENTITY:"dialogIdentity",DIALOGCREATEROOM:"dialogCreateRoom",DIALOGREMOVEROOM:"dialogRemoveRoom",DIALOGREGISTER:"dialogRegister",DIALOGLOGIN:"dialogLogin",DIALOGCREATEALIAS:"dialogCreateAlias",DIALOGCREATETRANSACTION:"dialogCreateTransaction",DIALOGCREATEDOCFILE:"dialogCreateDocFile",DIALOGCREATENEWS:"dialogCreateNews",DIALOGJOINROOM:"dialogJoinRoom"},le=new Map;var se=Object(x.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"user"===t.type?K(e,t):t.type===B?Q(e,t):e},aliases:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"alias"===t.type?K(e,t):t.type===C?Q(e,t):e},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"message"===t.type?K(e,t):t.type===M?Q(e,t):e},online:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;if("online"===t.type){var n=t.payload,r=n.online;return r}return e},rooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"room"===t.type?K(e,t):t.type===W?Q(e,t):e},userId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1",t=arguments.length>1?arguments[1]:void 0;if("userId"===t.type){var n=t.payload,r=n.reset,a=n.userId;return r?"-1":a}return e},positions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"position"===t.type?K(e,t):"positions"===t.type?Q(e,t):e},transactions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"transaction"===t.type?K(e,t):t.type===H?Q(e,t):e},wallets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"wallet"===t.type?K(e,t):t.type===V?Q(e,t):e},config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;if("config"===t.type){var n=t.payload,r=n.entries,a=new Map(Object(q.a)(e));return r.forEach((function(e){return a.set(e[0],e[1])})),a}return e},aliasId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;if("aliasId"===t.type){var n=t.payload,r=n.reset,a=n.aliasId;return r?null:a}return e},windowOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;if("windowOrder"===t.type){var n=t.payload,r=n.id,a=n.value,o=n.changeType,c=new Map(Object(q.a)(e));if(o===z){if(c.size>0&&c.get(r)&&c.get(r).index===c.size){var i=c.get(r);if(Object.keys(a).length===Object.keys(i).length&&Object.keys(a).every((function(e){return i[e]===a[e]})))return e}var s=Object(U.a)({},a);if(c.get(r)){var u=Object(q.a)(c.entries()).sort((function(e,t){var n=e[1].index,r=t[1].index;return n>r?1:n<r?-1:0})),d=u.splice(u.findIndex((function(e){return Object(l.a)(e,1)[0]===r})),1),m=Object(l.a)(d,1),f=m[0];f[1]=Object(U.a)({},s),u.push(f),console.log(u),u.forEach((function(e,t){var n=Object(l.a)(e,2),r=n[0],a=n[1],o=Object(U.a)(Object(U.a)({},a),{},{index:t+1});c.set(r,o)}))}else s.index=c.size+1,c.set(r,s);return c}return o===J?(c.delete(r),c):e}if("windowOrders"===t.type){var p=t.payload,h=p.windows,v=new Map(Object(q.a)(e));return h.forEach((function(e){var t=e.id,n=e.value;return v.set(t,n)})),v}return e},teams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"team"===t.type?K(e,t):t.type===G?Q(e,t):e},docFiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"docFile"===t.type?K(e,t):t.type===L?Q(e,t):e}}),ue=Object(x.d)(se,Object(x.a)(N.a)),de=a.a.memo((function(){var e=Object(r.useState)(new Date),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(!1),i=Object(l.a)(c,2),s=i[0],u=i[1],d=v(ue.getState(),{date:n});Object(r.useEffect)((function(){!function e(){setTimeout((function(){o(new Date),e()}),1e3)}()}),[]);var m=Object(r.useCallback)((function(){return u(!s)}),[s]);return a.a.createElement("div",{key:"clock",className:"Clock"},a.a.createElement(k,{onClick:m,classNames:["".concat(s?"hide":"")]},a.a.createElement(w,null)),a.a.createElement(k,{onClick:m,classNames:["".concat(s?"":"hide")]},d.halfTime))}));function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var pe=a.a.createElement("circle",{cx:12,cy:12,r:10}),he=a.a.createElement("polyline",{points:"16 12 12 8 8 12"}),ve=a.a.createElement("line",{x1:12,y1:16,x2:12,y2:8}),ge=function(e){var t=e.svgRef,n=e.title,r=fe(e,["svgRef","title"]);return a.a.createElement("svg",me({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-up-circle",ref:t},r),n?a.a.createElement("title",null,n):null,pe,he,ve)},ye=a.a.forwardRef((function(e,t){return a.a.createElement(ge,me({svgRef:t},e))}));n.p;function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ee(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Oe=a.a.createElement("circle",{cx:12,cy:12,r:10}),we=a.a.createElement("polyline",{points:"8 12 12 16 16 12"}),je=a.a.createElement("line",{x1:12,y1:8,x2:12,y2:16}),Ie=function(e){var t=e.svgRef,n=e.title,r=Ee(e,["svgRef","title"]);return a.a.createElement("svg",be({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-down-circle",ref:t},r),n?a.a.createElement("title",null,n):null,Oe,we,je)},ke=a.a.forwardRef((function(e,t){return a.a.createElement(Ie,be({svgRef:t},e))})),xe=(n.p,n(42),a.a.forwardRef((function(e,t){var n=e.children,o=e.title,c=e.observe,i=e.alwaysExpanded,s=void 0!==i&&i,u=e.checkWidth,d=void 0!==u&&u,m=e.dropdown,f=void 0!==m&&m,p=e.classNames,h=void 0===p?[]:p,v=Object(r.useRef)(),g=Object(r.useRef)(),y=Object(r.useRef)(null),b=Object(r.useRef)(null),E=Object(r.useState)(!s&&"undefined"!==typeof o),O=Object(l.a)(E,2),w=O[0],j=O[1],I=[],x=["List"].concat(h),N=function(e){f&&y.current&&(!d||!b.current||b.current.offsetWidth<600)&&(e.target!==y.current&&y.current.parentElement.contains(e.target)||j(!0))},C=function(e){var t=e.direction;"bottom"===t&&y.current.lastElementChild?(console.log("should scroll to bottom"),y.current.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"})):"top"===t&&y.current.firstElementChild&&(y.current.firstElementChild.scrollIntoView({behavior:"smooth",block:"start"}),console.log("should scroll to top"))};return Object(r.useEffect)((function(){return y.current&&c&&(v.current=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?g.current.classList.add("hide"):g.current.classList.remove("hide")}))}),{root:y.current,rootMargin:"50px",threshold:1}),"upper"===c&&y.current.firstElementChild&&v.current.observe(y.current.firstElementChild),"lower"===c&&y.current.lastElementChild&&v.current.observe(y.current.lastElementChild)),function(){v.current&&v.current.disconnect()}}),[]),Object(r.useEffect)((function(){v.current&&(v.current.disconnect(),"upper"===c&&y.current.firstElementChild&&v.current.observe(y.current.firstElementChild),"lower"===c&&y.current.lastElementChild&&v.current.observe(y.current.lastElementChild))}),[n]),Object(r.useEffect)((function(){f&&(w?document.removeEventListener("mousedown",N,!1):document.addEventListener("mousedown",N,!1))}),[w]),w?I.push("hide"):x.push("expanded"),f&&I.push("dropdown"),a.a.createElement("div",{key:"List",className:x.join(" ")},o&&a.a.createElement("header",{role:"button",tabIndex:0,key:"listHeader",className:"toggle ".concat(s?"":"clickable"),onClick:function(){s||j(!w)}},o),c&&"upper"===c&&a.a.createElement(k,{key:"upper",classNames:["upper","hide"],ref:g,onClick:function(){return C({direction:"top"})}},a.a.createElement(ye,null)),a.a.createElement("ul",{ref:function(e){y.current=e,t&&(t.current=e),e&&(b.current=e.closest(".Window"))},key:"listElem",className:"".concat(I.join(" ")),onClick:function(e){f&&(N(e),e.stopPropagation())}},n),c&&"lower"===c&&a.a.createElement(k,{key:"lower",classNames:["lower","hide"],ref:g,onClick:function(){return C({direction:"bottom"})}},a.a.createElement(ke,null)))}))),Ne=a.a.memo(xe);xe.defaultProps={classNames:[],children:void 0,title:void 0,dropdown:!1,scrollTo:void 0,checkWidth:!1,alwaysExpanded:!1,observe:void 0};var Ce=n(2),Re=n.n(Ce),Le=n(5),Se="deviceId",Te="token",Ae="userId",Pe="aliasId",De=function(e,t){"string"===typeof t?localStorage.setItem(e,t):localStorage.setItem(e,function(e){return JSON.stringify(e)}(t))},Me=function(e){return localStorage.getItem(e)},We=function(e){return localStorage.removeItem(e)},Fe=function(){return We(Pe)},Ge=function(){We(Te),We(Ae),Fe()},He=function(){return Me(Se)},Be=function(){return Me(Te)},Ve=function(e){var t=e.userId,n=e.token;return De(Te,n),function(e){De(Ae,e)}(t),{type:"userId",payload:{userId:t}}},Ue=function(){return Ge(),function(e){Object(c.b)((function(){e({type:"userId",payload:{reset:!0}}),e({type:"aliasId",payload:{reset:!0}})}))}},qe=function(e){return e.online===_},ze=function(){return{type:"online",payload:{online:_}}},Ye=function(e){return e.aliasId},Je=function(e){return e.userId},Ke=function(e){return Ye(e)||Je(e)},Qe=function(e){var t=e.messages;return 1===t.length?{type:"message",payload:{changeType:Y,message:t[0]}}:{type:M,payload:{messages:t,changeType:Y}}},Xe="chatMsg",Ze="whisper",$e=function(e){var t=e.wallets;return 1===t.length?{type:"wallet",payload:{wallet:t[0],changeType:z}}:{type:V,payload:{wallets:t,changeType:z}}},_e=function(e){var t=e.wallets;return 1===t.length?{type:"wallet",payload:{wallet:t[0],changeType:Y}}:{type:V,payload:{wallets:t,changeType:Y}}},et=function(e){var t=e.forums;return 1===t.length?{type:"forum",payload:{forum:t[0],changeType:Y}}:{type:S,payload:{forums:t,changeType:Y}}},tt=function(e){var t=e.gameCodes;return 1===t.length?{type:"gameCode",payload:{gameCode:t[0],changeType:Y}}:{type:P,payload:{gameCodes:t,changeType:Y}}},nt=function(e){var t=e.users;return 1===t.length?{type:"user",payload:{user:t[0],changeType:z}}:{type:B,payload:{users:t,changeType:z}}},rt=function(e){var t=e.users;return 1===t.length?{type:"user",payload:{user:t[0],changeType:Y}}:{type:B,payload:{users:t,changeType:Y}}},at=function(e){var t=e.user,n=e.wallet,r=e.room,a=e.forum,o=e.gameCode;return function(){var e=Object(Le.a)(Re.a.mark((function e(i){return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){i(rt({users:[t]})),i(ot({rooms:[r]})),i(_e({wallets:[n]})),i(et({forums:[a]})),i(tt({gameCodes:[o]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ot=function(e){var t=e.rooms;return 1===t.length?{type:"room",payload:{changeType:Y,room:t[0]}}:{type:W,payload:{rooms:t,changeType:Y}}},ct=function(e){var t=e.rooms;return 1===t.length?{type:"room",payload:{changeType:z,room:t[0]}}:{type:W,payload:{rooms:t,changeType:Y}}},it=function(e){var t=e.rooms;return 1===t.length?{type:"room",payload:{changeType:J,room:t[0]}}:{type:W,payload:{rooms:t,changeType:J}}},lt=function(e){var t=e.room,n=e.user;return function(e){Object(c.b)((function(){e(ct({rooms:[t]})),e(nt({users:[n]}))}))}},st="room",ut="followRoom",dt="user",mt=function(e){var t=e.aliasId;return t?(De(Pe,t),{type:"aliasId",payload:{aliasId:t}}):(Fe(),{type:"aliasId",payload:{reset:!0}})},ft=function(e){var t=e.aliases;return 1===t.length?{type:"alias",payload:{alias:t[0],changeType:Y}}:{type:C,payload:{aliases:t,changeType:Y}}},pt=function(e){var t=e.alias,n=e.wallet,r=e.room;return function(){var e=Object(Le.a)(Re.a.mark((function e(a){return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){a(ft({aliases:[t]})),a(ot({rooms:[r]})),a(_e({wallets:[n]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ht="alias",vt="wallet",gt=function(e){var t=e.transaction,n=e.wallet;return function(e){Object(c.b)((function(){e(function(e){var t=e.transactions;return 1===t.length?{type:"transaction",payload:{transaction:t[0],changeType:Y}}:{type:H,payload:{transactions:t,changeType:Y}}}({transactions:[t]})),e($e({wallets:[n]}))}))}},yt="transaction",bt=function(e){var t=e.docFiles;return 1===t.length?{type:"docFile",payload:{docFile:t[0],changeType:Y}}:{type:L,payload:{docFiles:t,changeType:Y}}},Et="docFile",Ot=function(){var e="undefined"!==typeof ioUri?ioUri:"/";return window.io(e,{forceNew:!0})}(),wt="createAlias",jt="createUser",It="sendMessage",kt="createRoom",xt="createDocFile",Nt="createTransaction",Ct="followRoom",Rt="getMessagesByRoom",Lt="removeRoom",St={ALIASES:"getAliases",USERS:"getUsers",MESSAGES:"getMessages",ROOMS:"getRooms",INVITATIONS:"getInvitations",DOCFILES:"getDocFiles",FORUMS:"getForums",FORUMPOSTS:"getForumPosts",FORUMTHREADS:"getForumThreads",GAMECODES:"getGameCodes",SIMPLEMSGS:"getSimpleMsgs",TEAMS:"getTeams",TRANSACTIONS:"getTransactions",WALLETS:"getWallets",DEVICES:"getDevices"},Tt="login",At="reconnect",Pt="startup",Dt="disconnect",Mt=function(){var e=Object(Le.a)(Re.a.mark((function e(t){var n,r;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.event,r=t.callback,Ot.on(n,(function(e){console.log(n,e),r(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wt=function(){ue.getState().online!==te&&(Ot.disconnect(),Ot.connect())},Ft=function(){var e=Object(Le.a)(Re.a.mark((function e(t){var n,r=arguments;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",new Promise((function(e,r){var a=n;a.token=Be(),qe(ue.getState())||Wt(),Ot.emit(t,a,(function(t){var n=t.error,a=t.data;n?r(n):e(a)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Mt({event:At,callback:function(){Je(ue.getState)&&Ft("updateId",{}).then((function(){ue.dispatch(ze())})).catch((function(e){console.log(e),ue.dispatch(Ue())}))}}),Mt({event:Pt,callback:function(e){var t,n=e.data,r=Me(Ae),a=Be(),o=Me(Pe);r&&a&&ue.dispatch(Ve({userId:r,token:a})),o&&ue.dispatch(mt({aliasId:o})),He()||De(Se,"1234567890123456"),ue.dispatch((t=n,function(e){Object(c.b)((function(){e({type:"config",payload:{entries:Object.entries(t)}}),e(ze())}))})),(r||a)&&Ft("updateId",{}).then((function(){ue.dispatch(ze())})).catch((function(e){console.log(e),ue.dispatch(Ue())}))}}),Mt({event:Dt,callback:function(){ue.dispatch({type:"online",payload:{online:ee}}),Wt()}}),Mt({event:Xe,callback:function(e){var t=e.data,n=e.error;if(t&&t.message){var r=t.message;t.changeType===Y&&ue.dispatch(Qe({messages:[r]}))}else console.log(Xe,n,t)}}),Mt({event:Ze,callback:function(e){var t=e.data,n=e.error;if(t&&t.message){var r=t.message;t.changeType===Y&&ue.dispatch(Qe({messages:[r]}))}else console.log(Ze,n,t)}}),Mt({event:st,callback:function(e){var t=e.error,n=e.data;if(n&&n.room){var r=n.room,a=n.changeType;a===Y?ue.dispatch(ot({rooms:[r]})):a===z?ue.dispatch(ct({rooms:[r]})):a===J&&ue.dispatch(it({rooms:[r]}))}else console.log(st,t,n)}}),Mt({event:ut,callback:function(e){var t=e.error,n=e.data;n&&n.room&&n.user?ue.dispatch(function(){var e=Object(Le.a)(Re.a.mark((function e(t){return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){t(ct({rooms:[n.room]})),t(nt({users:[n.user]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):console.log(ut,t,n)}}),Mt({event:dt,callback:function(e){var t=e.error,n=e.data;if(n&&n.user){var r=n.user,a=n.changeType;a===Y?ue.dispatch(rt({users:[r]})):a===z&&ue.dispatch(nt({users:[r]}))}else console.log(dt,t,n)}}),Mt({event:ht,callback:function(e){var t=e.error,n=e.data;if(n&&n.alias){var r=n.alias,a=n.changeType;a===Y?ue.dispatch(ft({aliases:[r]})):a===z&&ue.dispatch(function(e){var t=e.aliases;return 1===t.length?{type:"alias",payload:{alias:t[0],changeType:z}}:{type:C,payload:{aliases:t,changeType:z}}}({aliases:[r]}))}else console.log(ht,t,n)}}),Mt({event:vt,callback:function(e){var t=e.error,n=e.data;if(n&&n.wallet){var r=n.wallet,a=n.changeType;a===Y?ue.dispatch(_e({wallets:[r]})):a===z&&ue.dispatch($e({wallets:[r]}))}else console.log(vt,t,n)}}),Mt({event:yt,callback:function(e){var t=e.error,n=e.data;if(n&&n.transaction&&(n.changeType===z||n.wallet)){var r=n.transaction,a=n.changeType;a===Y?ue.dispatch(gt(n)):a===z&&ue.dispatch(function(e){var t=e.transactions;return 1===t.length?{type:"transaction",payload:{transaction:t[0],changeType:z}}:{type:H,payload:{transactions:t,changeType:z}}}({transactions:[r]}))}else console.log(yt,t,n)}}),Mt({event:Et,callback:function(e){var t=e.error,n=e.data;if(n&&n.docFile){var r=n.docFile,a=n.changeType;a===Y?ue.dispatch(bt({docFiles:[r]})):a===z&&ue.dispatch(function(e){var t=e.docFiles;return 1===t.length?{type:"docFile",payload:{docFile:t[0],changeType:z}}:{type:L,payload:{docFiles:t,changeType:z}}}({docFiles:[r]}))}else console.log(Et,t,n)}});var Gt=function(){var e=Object(Le.a)(Re.a.mark((function e(t,n){var r,a,o;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(Tt,{user:{username:t,password:n}});case 2:return r=e.sent,a=r.user,o=r.token,ue.dispatch(Ve({userId:a.objectId,token:o})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ht=function(){var e=Object(Le.a)(Re.a.mark((function e(){return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ue.dispatch(Ue());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Bt=n(13),Vt=n(8),Ut=n.n(Vt),qt=function(e){return e.aliases},zt=function(e,t){var n=t.id;return e.aliases.get(n)},Yt=function(e){return e.users},Jt=function(e,t){var n=t.id;return e.users.get(n)},Kt=function(e){return e.users.get(Je(e))||function(e){return e.config.get("anonymousUser")}(e)},Qt=Object(Bt.createSelector)([Kt],(function(e){return e.accessLevel})),Xt=Ut()([Yt,qt],(function(e,t){return[].concat(Object(q.a)(e.values()),Object(q.a)(t.values()))}))((function(){return"identities"})),Zt=Ut()([Yt,qt,function(e,t){return t.ids}],(function(e,t,n){var r=new Map;return n.forEach((function(n){return r.set(n,e.get(n)||t.get(n))})),r}))((function(e,t){var n=t.ids;return"identities-".concat(n.join(" "))})),$t=Ut()([Yt,qt,function(e){return e.teams},function(e,t){return t.ids}],(function(e,t,n,r){var a=new Map;return r.forEach((function(r){return a.set(r,n.get(r)||e.get(r)||t.get(r))})),a}))((function(e,t){var n=t.ids;return"identities-teams-".concat(n.join(" "))})),_t=Object(Bt.createSelector)([Jt,zt],(function(e,t){return e||t})),en=Object(Bt.createSelector)([Jt,zt,function(e,t){var n=t.id;return e.teams.get(n)}],(function(e,t,n){return n||t||e})),tn=Ut()([Xt,Je],(function(e,t){return e.filter((function(e){return e.objectId!==t&&e.ownerId!==t&&!e.userIds.includes(t)})).map((function(e){return{objectId:e.objectId,name:e.aliasName||e.username}}))}))((function(){return"other-identity-ids"})),nn=Ut()([Xt,Je],(function(e,t){return e.filter((function(e){return e.objectId===t||e.ownerId===t||e.userIds.includes(t)}))}))((function(){return"current-identities"})),rn=(n(44),a.a.forwardRef((function(e,t){var n=e.children,o=e.onClick,c=e.elementId,i=e.scrollTo,l=e.stopPropagation,s=void 0!==l&&l,u=e.classNames,d=void 0===u?[]:u,m=Object(r.useRef)(null);return Object(r.useLayoutEffect)((function(){i&&m.current&&(m.current.scrollIntoView({behavior:"smooth",block:"nearest"}),setTimeout((function(){return m.current.scrollIntoView({behavior:"smooth",block:"nearest"})}),300))}),[i]),a.a.createElement("li",{ref:function(e){t&&(t.current=e),m.current=e},id:c,className:["ListItem","".concat(o?"clickable":"")].concat(d).join(" "),onClick:function(e){o&&o(e),"UL"===e.target.parentElement.tagName&&e.target.parentElement.click(),s&&e.stopPropagation()}},n)}))),an=a.a.memo(rn);function on(){return(on=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}rn.defaultProps={onClick:void 0,classNames:[],stopPropagation:!1,elementId:void 0,children:void 0,scrollTo:!1};var ln=a.a.createElement("line",{x1:3,y1:12,x2:21,y2:12}),sn=a.a.createElement("line",{x1:3,y1:6,x2:21,y2:6}),un=a.a.createElement("line",{x1:3,y1:18,x2:21,y2:18}),dn=function(e){var t=e.svgRef,n=e.title,r=cn(e,["svgRef","title"]);return a.a.createElement("svg",on({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-menu",ref:t},r),n?a.a.createElement("title",null,n):null,ln,sn,un)},mn=a.a.forwardRef((function(e,t){return a.a.createElement(dn,on({svgRef:t},e))})),fn=(n.p,function(e){var t=e.windows;if(1===t.length){var n=Object(l.a)(t,1)[0],r=n.value;return{type:"windowOrder",payload:{id:n.id,value:r,changeType:z}}}return{type:"windowOrders",payload:{windows:t,changeType:z}}}),pn=function(e){return{type:"windowOrder",payload:{id:e.id,changeType:J}}},hn=a.a.memo((function(){var e=Object(c.d)(Qt),t=Object(c.d)(p),n=[];return e===t.CreateUser.accessLevel&&n.push(a.a.createElement(an,{stopPropagation:!0,key:"register",onClick:function(){return ue.dispatch(fn({windows:[{id:ie.DIALOGREGISTER,value:{type:ie.DIALOGREGISTER}}]}))}},"Create user")),e===ne&&n.push(a.a.createElement(an,{stopPropagation:!0,key:"login",onClick:function(){return ue.dispatch(fn({windows:[{id:ie.DIALOGLOGIN,value:{type:ie.DIALOGLOGIN}}]}))}},"Login")),e>=t.CreateAlias.accessLevel&&n.push(a.a.createElement(an,{stopPropagation:!0,key:"alias",onClick:function(){return ue.dispatch(fn({windows:[{id:ie.DIALOGCREATEALIAS,value:{type:ie.DIALOGCREATEALIAS}}]}))}},"Create alias")),e>=re&&n.push(a.a.createElement(an,{stopPropagation:!0,key:"logout",onClick:function(){Ht()}},"Logout")),a.a.createElement(Ne,{dropdown:!0,title:a.a.createElement(mn,null)},n)}));n(45);function vn(){return(vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function gn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var yn=a.a.createElement("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),bn=function(e){var t=e.svgRef,n=e.title,r=gn(e,["svgRef","title"]);return a.a.createElement("svg",vn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-message-square",ref:t},r),n?a.a.createElement("title",null,n):null,yn)},En=a.a.forwardRef((function(e,t){return a.a.createElement(bn,vn({svgRef:t},e))}));n.p;function On(){return(On=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var jn=a.a.createElement("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),In=a.a.createElement("line",{x1:8,y1:2,x2:8,y2:18}),kn=a.a.createElement("line",{x1:16,y1:6,x2:16,y2:22}),xn=function(e){var t=e.svgRef,n=e.title,r=wn(e,["svgRef","title"]);return a.a.createElement("svg",On({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-map",ref:t},r),n?a.a.createElement("title",null,n):null,jn,In,kn)},Nn=a.a.forwardRef((function(e,t){return a.a.createElement(xn,On({svgRef:t},e))}));n.p;function Cn(){return(Cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ln=a.a.createElement("rect",{x:1,y:4,width:22,height:16,rx:2,ry:2}),Sn=a.a.createElement("line",{x1:1,y1:10,x2:23,y2:10}),Tn=function(e){var t=e.svgRef,n=e.title,r=Rn(e,["svgRef","title"]);return a.a.createElement("svg",Cn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-credit-card",ref:t},r),n?a.a.createElement("title",null,n):null,Ln,Sn)},An=a.a.forwardRef((function(e,t){return a.a.createElement(Tn,Cn({svgRef:t},e))}));n.p;function Pn(){return(Pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Mn=a.a.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),Wn=a.a.createElement("polyline",{points:"14 2 14 8 20 8"}),Fn=a.a.createElement("line",{x1:16,y1:13,x2:8,y2:13}),Gn=a.a.createElement("line",{x1:16,y1:17,x2:8,y2:17}),Hn=a.a.createElement("polyline",{points:"10 9 9 9 8 9"}),Bn=function(e){var t=e.svgRef,n=e.title,r=Dn(e,["svgRef","title"]);return a.a.createElement("svg",Pn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-file-text",ref:t},r),n?a.a.createElement("title",null,n):null,Mn,Wn,Fn,Gn,Hn)},Vn=a.a.forwardRef((function(e,t){return a.a.createElement(Bn,Pn({svgRef:t},e))}));n.p;function Un(){return(Un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var zn=a.a.createElement("path",{d:"M4 11a9 9 0 0 1 9 9"}),Yn=a.a.createElement("path",{d:"M4 4a16 16 0 0 1 16 16"}),Jn=a.a.createElement("circle",{cx:5,cy:19,r:1}),Kn=function(e){var t=e.svgRef,n=e.title,r=qn(e,["svgRef","title"]);return a.a.createElement("svg",Un({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-rss",ref:t},r),n?a.a.createElement("title",null,n):null,zn,Yn,Jn)},Qn=a.a.forwardRef((function(e,t){return a.a.createElement(Kn,Un({svgRef:t},e))}));n.p;function Xn(){return(Xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Zn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $n=a.a.createElement("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),_n=a.a.createElement("polyline",{points:"2 17 12 22 22 17"}),er=a.a.createElement("polyline",{points:"2 12 12 17 22 12"}),tr=function(e){var t=e.svgRef,n=e.title,r=Zn(e,["svgRef","title"]);return a.a.createElement("svg",Xn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-layers",ref:t},r),n?a.a.createElement("title",null,n):null,$n,_n,er)},nr=a.a.forwardRef((function(e,t){return a.a.createElement(tr,Xn({svgRef:t},e))})),rr=(n.p,function(e){return e.windowOrder}),ar=(n(46),a.a.memo((function(){var e=Object(c.d)(rr),t=Object(c.d)(Qt),n=[],r=function(e){var t=e.id,n=e.value;return ue.dispatch(fn({windows:[{id:t,value:n}]}))};return e.forEach((function(e,t){[ie.CHAT,ie.NEWS,ie.DOCFILE,ie.WORLDMAP,ie.WALLET].includes(t)||n.push(a.a.createElement(an,{key:t},a.a.createElement(k,{onClick:function(){return r({id:t,value:e})}},t)))})),a.a.createElement(Ne,{classNames:["OpenApps"]},a.a.createElement(an,{key:"chat"},a.a.createElement(k,{onClick:function(){return r({id:ie.CHAT,value:{type:ie.CHAT}})}},a.a.createElement(En,null))),a.a.createElement(an,{key:"news"},a.a.createElement(k,{onClick:function(){return r({id:ie.NEWS,value:{type:ie.NEWS}})}},a.a.createElement(Qn,null))),a.a.createElement(an,{key:"docFile"},a.a.createElement(k,{onClick:function(){return r({id:ie.DOCFILE,value:{type:ie.DOCFILE}})}},a.a.createElement(Vn,null))),a.a.createElement(an,{key:"map"},a.a.createElement(k,{onClick:function(){return r({id:ie.WORLDMAP,value:{type:ie.WORLDMAP}})}},a.a.createElement(Nn,null))),t>=re&&a.a.createElement(an,{key:"wallet"},a.a.createElement(k,{onClick:function(){return r({id:ie.WALLET,value:{type:ie.WALLET}})}},a.a.createElement(An,null))),n.length>0&&a.a.createElement(Ne,{dropdown:!0,classNames:["otherWindows"],title:a.a.createElement(nr,null)},n))}))),or=a.a.memo((function(){var e=[],t=[];return Object(c.d)(qe)||t.push("warning"),a.a.createElement("div",{className:"".concat(t.join(" ")),id:"MenuBar"},a.a.createElement(hn,null),a.a.createElement(ar,null),e,a.a.createElement("div",{className:"rightAligned"},a.a.createElement(de,null)))})),cr=n(9),ir=function(){var e=Object(c.c)(),t=Object(c.d)(Je);return Object(r.useEffect)((function(){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.reset;[{type:B,event:St.USERS},{type:C,event:St.ALIASES},{type:M,event:St.MESSAGES},{type:W,event:St.ROOMS},{type:D,event:St.INVITATIONS},{type:L,event:St.DOCFILES},{type:S,event:St.FORUMS},{type:T,event:St.FORUMPOSTS},{type:A,event:St.FORUMTHREADS},{type:P,event:St.GAMECODES},{type:F,event:St.SIMPLEMSGS},{type:G,event:St.TEAMS},{type:H,event:St.TRANSACTIONS},{type:V,event:St.WALLETS},{type:R,event:St.DEVICES}].forEach(function(){var t=Object(Le.a)(Re.a.mark((function t(r){var a,o;return Re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r.event,o=r.type,Ft(a,{}).then((function(t){e({type:o,payload:Object(cr.a)({reset:n,changeType:Y},o,t[o])})})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}({reset:!0})}),[t]),a.a.createElement(a.a.Fragment,null)},lr=n(30);n(51);function sr(){return(sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ur(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var dr=a.a.createElement("polyline",{points:"15 3 21 3 21 9"}),mr=a.a.createElement("polyline",{points:"9 21 3 21 3 15"}),fr=a.a.createElement("line",{x1:21,y1:3,x2:14,y2:10}),pr=a.a.createElement("line",{x1:3,y1:21,x2:10,y2:14}),hr=function(e){var t=e.svgRef,n=e.title,r=ur(e,["svgRef","title"]);return a.a.createElement("svg",sr({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-maximize-2",ref:t},r),n?a.a.createElement("title",null,n):null,dr,mr,fr,pr)},vr=a.a.forwardRef((function(e,t){return a.a.createElement(hr,sr({svgRef:t},e))}));n.p;function gr(){return(gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var br=a.a.createElement("line",{x1:18,y1:6,x2:6,y2:18}),Er=a.a.createElement("line",{x1:6,y1:6,x2:18,y2:18}),Or=function(e){var t=e.svgRef,n=e.title,r=yr(e,["svgRef","title"]);return a.a.createElement("svg",gr({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-x",ref:t},r),n?a.a.createElement("title",null,n):null,br,Er)},wr=a.a.forwardRef((function(e,t){return a.a.createElement(Or,gr({svgRef:t},e))}));n.p;function jr(){return(jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ir(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var kr=a.a.createElement("circle",{cx:12,cy:12,r:3}),xr=a.a.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}),Nr=function(e){var t=e.svgRef,n=e.title,r=Ir(e,["svgRef","title"]);return a.a.createElement("svg",jr({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-settings",ref:t},r),n?a.a.createElement("title",null,n):null,kr,xr)},Cr=a.a.forwardRef((function(e,t){return a.a.createElement(Nr,jr({svgRef:t},e))})),Rr=(n.p,n(52),a.a.memo((function(e){var t=e.onDoubleClick,n=e.title,r=e.done;return a.a.createElement("div",{onDoubleClick:t,className:"TopBar"},a.a.createElement("div",{className:"TopBarHandle"},a.a.createElement("span",{className:"title"},n)),a.a.createElement("div",{className:"buttons"},a.a.createElement(k,{classNames:["settings"],stopPropagation:!0,type:"button",onClick:function(){}},a.a.createElement(Cr,null)),a.a.createElement(k,{type:"button",onClick:t},a.a.createElement(vr,null)),a.a.createElement(k,{stopPropagation:!0,type:"button",onClick:r},a.a.createElement(wr,null))))}))),Lr=function(e){var t=e.onClick,n=e.children,o=e.menu,c=e.done,i=e.index,s=(e.type,e.title),u=void 0===s?"app":s,d=e.classNames,m=void 0===d?[]:d,f={width:640,height:480},p=Object(r.useState)(f),h=Object(l.a)(p,2),v=h[0],g=h[1],y=Object(r.useState)({x:0,y:0}),b=Object(l.a)(y,2),E=b[0],O=b[1],w=["Window"].concat(m),j=Object(r.useCallback)((function(){"100%"===v.width&&"100%"===v.height?g(f):(O({x:0,y:0}),g({width:"100%",height:"100%"}))}),[v,E]);return a.a.createElement(lr.a,{style:{zIndex:i},onClick:t,position:E,className:"rnd",size:v,minWidth:300,minHeight:200,maxHeight:"100%",maxWidth:"100%",bounds:"parent",dragHandleClassName:"TopBarHandle",enableResizing:{top:!0,topRight:!0,topLeft:!0,right:!0,bottom:!0,left:!0,bottomRight:!0,bottomLeft:!0},resizeHandleStyles:{top:{top:"0",width:"5px"},left:{left:"0",width:"5px"},right:{right:"0",width:"5px"},bottom:{bottom:"0",height:"5px"},bottomLeft:{bottom:"0",left:"0",width:"10px",height:"10px"},bottomRight:{bottom:"0",right:"0",width:"10px",height:"10px"},topRight:{right:"0",top:"0",width:"10px",height:"10px"},topLeft:{left:"0",top:"0",width:"10px",height:"10px"}},onDragStart:t,onDragStop:function(e,t){var n=t.node,r=t.x,a=t.y;E&&r===E.x&&a===E.y||(0===r&&"100%"!==v.width?(g({width:"50%",height:"100%"}),O({x:0,y:0})):r+n.offsetWidth>=window.innerWidth&&"100%"!==v.width?(g({width:"50%",height:"100%"}),O({x:window.innerWidth/2,y:0})):O({x:r,y:a}))},onResizeStart:t,onResizeStop:function(e,t,n,r,a){n.offsetWidth===v.width&&n.offsetHeight===v.height||(g({width:n.offsetWidth,height:n.offsetHeight}),O(a))}},a.a.createElement("div",{className:"".concat(w.join(" "))},a.a.createElement(Rr,{done:c,title:u,onDoubleClick:j}),a.a.createElement("div",{className:"windowBox"},o&&a.a.createElement("div",{className:"menu"},o),a.a.createElement("div",{className:"content"},n))))},Sr=a.a.memo(Lr);Lr.defaultProps={done:void 0,classNames:[],title:"app",menu:void 0,type:"window"};var Tr=Ut()([function(e){return e.transactions},function(e,t){return t.ids}],(function(e,t){return Object(q.a)(e.values()).filter((function(e){var n=e.fromWalletId,r=e.toWalletId;return t.includes(n)||t.includes(r)})).map((function(e){return e.objectId})).reverse()}))((function(e,t){var n=t.ids;return"transaction-ids-".concat(n.join(" "))})),Ar=(n(53),a.a.memo((function(e){var t=e.transactionId,n=Object(c.d)((function(e){return function(e,t){var n=t.id;return e.transactions.get(n)}(e,{id:t})})),r=Object(c.d)((function(e){return en(e,{id:n.fromWalletId})})),o=Object(c.d)((function(e){return en(e,{id:n.toWalletId})}));return a.a.createElement(an,{classNames:["TransactionItem"]},a.a.createElement("p",null,v(ue.getState(),{date:new Date(n.customTimeCreated||n.timeCreated)}).fullStamp),a.a.createElement("p",null,"".concat(r.teamName||r.aliasName||r.username," -> ").concat(o.teamName||o.aliasName||o.username)),a.a.createElement("p",null,"Amount: ".concat(n.amount)),n.note&&a.a.createElement("p",null,n.note))}))),Pr=a.a.memo((function(e){var t=e.walletIds,n=Object(c.d)((function(e){return Tr(e,{ids:t})}));return a.a.createElement(Ne,{scrollTo:{buffer:!0,direction:"top"}},n.map((function(e){return a.a.createElement(Ar,{key:e,transactionId:e})})))})),Dr=function(e){return e.wallets},Mr=function(e,t){var n=t.id;return e.wallets.get(n)},Wr=Ut()([Dr,Kt],(function(e,t){return Object(q.a)(e.values()).filter((function(e){return e.ownerId===t.objectId||t.aliases.includes(e.ownerAliasId)})).map((function(e){return e.objectId}))}))((function(){return"wallet-ids-current-user"})),Fr=n(7),Gr=a.a.memo((function(e){var t=e.identityId,n=Object(c.d)((function(e){return _t(e,{id:t})}));return a.a.createElement(an,{stopPropagation:!0,key:n.objectId,onClick:function(){ue.dispatch(fn({windows:[{id:"".concat(ie.DIALOGIDENTITY,"-").concat(n.objectId),value:{identityId:n.objectId,type:ie.DIALOGIDENTITY}}]}))}},n.username||n.aliasName)})),Hr=(n(54),function(e){var t=e.onChange,n=e.name,o=e.shouldEqual,c=e.maxLength,i=e.minLength,s=e.type,u=void 0===s?"text":s,d=e.required,m=void 0!==d&&d,f=e.placeholder,p=void 0===f?"":f,h=Object(Fr.c)(),v=h.register,g=h.getValues,y=Object(r.useState)(!1),b=Object(l.a)(y,2),E=b[0],O=b[1],w=Object(r.useState)(!1),j=Object(l.a)(w,2),I=j[0],k=j[1];return a.a.createElement("input",{minLength:i,maxLength:c,required:m,name:n,ref:v({maxLength:c,minLength:i,validate:function(e){return!o||e===g(o)||"Must match ".concat(o)}}),type:u,defaultValue:"",className:"Input ".concat(I?"empty":""),onFocus:function(){E?I&&k(!1):O(!0)},onBlur:function(e){E&&m&&k(!e.target.value||""===e.target.value)},onChange:function(e){t&&t(e.target.value)},placeholder:p})}),Br=a.a.memo(Hr);Hr.defaultProps={placeholder:"",required:!1,type:"text",onChange:void 0,shouldEqual:void 0,maxLength:void 0,minLength:void 0};n(55);var Vr=function(e){var t=e.partialSearch,n=void 0===t||t,r=Object(Fr.b)(),o=Object(Fr.d)({control:r.control,name:"partialName"}),i=Object(c.d)(tn),l=o&&o.length>1?i.filter((function(e){var t=e.name;return n?t.toLowerCase().includes(o.toLowerCase()):t.toLowerCase()===o.toLowerCase()})).map((function(e){var t=e.objectId;return a.a.createElement(Gr,{key:t,identityId:t})})):i.map((function(e){var t=e.objectId;return a.a.createElement(Gr,{key:t,identityId:t})}));return a.a.createElement(Ne,{dropdown:!0,checkWidth:!0,classNames:["IdentityList"],title:"Users"},a.a.createElement(an,{classNames:["userSearch"]},a.a.createElement(Fr.a,r,a.a.createElement("form",{onSubmit:r.handleSubmit((function(){0===l.length?r.reset():1===l.length&&(ue.dispatch(fn({windows:[{id:"".concat(ie.DIALOGIDENTITY,"-").concat(l[0].key),value:{identityId:l[0].key,type:ie.DIALOGIDENTITY}}]})),r.reset())}))},a.a.createElement(Br,{name:"partialName",placeholder:"Find user"}),a.a.createElement(k,{stopPropagation:!0,onClick:function(){return r.reset()}},a.a.createElement(wr,null))))),o&&0===l.length?[a.a.createElement(an,{key:"noMatch"},"No match found")]:l)},Ur=a.a.memo(Vr);Vr.defaultProps={partialSearch:!0};var qr=function(e){var t=e.walletId,n=e.onChange,r=e.classNames,o=void 0===r?[]:r,i=Object(c.d)((function(e){return Mr(e,{id:t})})),l=Object(c.d)((function(e){return en(e,{id:t})}));return a.a.createElement(an,{classNames:["WalletItem"].concat(o),onClick:function(){return n(t)}},l?"".concat(l.teamName||l.aliasName||l.username,": ").concat(i.amount):"Show all")},zr=a.a.memo(qr);qr.defaultProps={classNames:[]};var Yr=a.a.memo((function(e){var t=e.onChange,n=e.walletId,r=Object(c.d)(Wr);return a.a.createElement(Ne,{dropdown:!0,checkWidth:!0,title:"Wallets",classNames:["WalletList"]},a.a.createElement(zr,{classNames:["showAll"===n?"selected":""],key:"showAll",onChange:t,walletId:"showAll"}),r.map((function(e){return a.a.createElement(zr,{key:e,walletId:e,onChange:t,classNames:[n===e?"selected":""]})})))})),Jr=a.a.memo((function(e){var t=e.onChange,n=e.walletId,r=Object(c.d)(Dr);return a.a.createElement(Ne,{dropdown:!0,checkWidth:!0,title:"[ADMIN]",classNames:["WalletList"]},Object(q.a)(r.values()).map((function(e){var r=e.objectId;return a.a.createElement(zr,{key:r,walletId:r,onChange:t,classNames:[n===r?"selected":""]})})))})),Kr=(n(56),a.a.memo((function(e){var t=e.id,n=e.index,o=Object(r.useState)("showAll"),i=Object(l.a)(o,2),s=i[0],u=i[1],d=Object(c.d)(Wr),m=Object(c.d)((function(e){return en(e,{id:s})})),f=Object(c.d)(Qt),p=Object(r.useCallback)((function(){ue.dispatch(fn({windows:[{id:t,value:{type:ie.WALLET}}]}))}),[]),h=Object(r.useCallback)((function(){return ue.dispatch(pn({id:t}))}),[t]),v=Object(r.useCallback)((function(e){return u(e)}),[]),g=Object(r.useMemo)((function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Yr,{key:"walletList",onChange:v,walletId:s}),a.a.createElement(Ur,{key:"identityList"}),f>=ae&&a.a.createElement(Jr,{key:"adminWalletList",onChange:v,walletId:s}))}),[v,s]);return a.a.createElement(Sr,{classNames:["Wallet"],index:n,done:h,title:"Wallet".concat(m?": ".concat(m.teamName||m.aliasName||m.username):"s"),onClick:p,menu:g},a.a.createElement(Pr,{key:"transactionList",walletIds:"showAll"!==s?[s]:d}))}))),Qr=(n(57),function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),n=(t[0],t[1]),o=Object(r.useRef)();return Object(r.useEffect)((function(){!function e(){if("undefined"!==typeof window.google&&"undefined"!==typeof window.MarkerClusterer&&"undefined"!==typeof window.MapLabel){var t=new window.google.maps.Map(o.current,{disableDefaultUI:!0,fullscreenControl:!1,keyboardShortcuts:!1,mapTypeControl:!1,noClear:!0,zoomControl:!1,panControl:!1,overviewMapControl:!1,rotateControl:!1,scaleControl:!1,streetViewControl:!1,center:{lat:-34.397,lng:150.644},zoom:8,styles:[{elementType:"geometry",stylers:[{color:"#13002d"}]},{elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"administrative",stylers:[{color:"#370087"}]},{featureType:"landscape.natural.terrain",stylers:[{color:"#44003a"}]},{featureType:"road",stylers:[{color:"#6e6c6d"},{weight:.5}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{color:"#7d006c"}]}]});n(t)}else setTimeout(e,1e3)}()}),[]),a.a.createElement("div",{ref:o,className:"MapView"})}),Xr=function(e){return e.positions},Zr=function(e){return Object(Bt.createSelector)([Xr],(function(t){return Object(q.a)(t.values()).filter((function(t){var n=t.positionType;return e===n})).map((function(e){return{positionName:e.positionName,objectId:e.objectId}}))}))},$r=function(e){var t=e.title,n=e.positionType,o=Object(r.useMemo)(Zr,[]),i=Object(c.d)((function(e){return o(e,n)}));return a.a.createElement("div",{key:"positionsList",className:"PositionsList"},a.a.createElement(Ne,{title:t},i.map((function(e){return a.a.createElement(an,{key:e.objectId,onClick:function(){console.log(e.objectId)}},e.positionName)}))))},_r=a.a.memo($r);$r.defaultProps={title:void 0};var ea=function(e){var t=e.positionTypes,n=void 0===t?[]:t;return a.a.createElement("div",{className:"lists Positions"},n.map((function(e){return a.a.createElement(_r,{title:e,positionType:e})})))},ta=(n(58),a.a.memo((function(e){var t=e.id,n=e.index,o=Object(r.useCallback)((function(){ue.dispatch(fn({windows:[{id:t,value:{type:ie.WORLDMAP}}]}))}),[]);return a.a.createElement(Sr,{index:n,done:function(){return ue.dispatch(pn({id:t}))},classNames:["WorldMap"],title:"map",onClick:o,menu:a.a.createElement(a.a.Fragment,null,a.a.createElement(ea,null))},a.a.createElement(Qr,null))}))),na=function(e){return e.rooms},ra=function(e,t){var n=t.id;return e.rooms.get(n)},aa=Ut()([na],(function(e){return Object(q.a)(e.values()).filter((function(e){return!e.isWhisper&&!e.isUser}))}))((function(){return"normalRooms"})),oa=Ut()([na],(function(e){return Object(q.a)(e.values()).filter((function(e){return e.isWhisper})).map((function(e){return{objectId:e.objectId,participantIds:e.participantIds}}))}))((function(){return"whisperRooms"})),ca=Ut()([aa,Kt],(function(e,t){return e.filter((function(e){return!t.followingRooms.includes(e.objectId)})).map((function(e){return{roomName:e.roomName,objectId:e.objectId}})).sort((function(e,t){var n=e.roomName.toLowerCase(),r=t.roomName.toLowerCase();return n>r||r<n?1:0})).map((function(e){return e.objectId}))}))((function(){return"unfollowedRooms"})),ia=Ut()([aa,Kt],(function(e,t){return e.filter((function(e){return t.followingRooms.includes(e.objectId)})).map((function(e){return e.objectId}))}))((function(){return"followedRooms"})),la=Ut()([oa,function(e,t){return{identityId:t.identityId,currentIdentityId:t.currentIdentityId}},function(e,t){var n=t.identityId;return ra(e,{id:n})}],(function(e,t,n){var r=t.currentIdentityId,a=t.identityId;return e.find((function(e){return e.participantIds.includes(r)&&e.participantIds.includes(a)}))||n}))((function(e,t){var n=t.currentIdentityId,r=t.identityId;return"whisper-".concat(n,"-").concat(r)})),sa=Ut()([Zt,nn,function(e,t){return t.ids}],(function(e,t,n){var r=e.get(n[0]),a=e.get(n[1]);return t.find((function(e){var t=e.objectId;return r.objectId===t||r.ownerId===t||r.userIds.includes(t)}))?"".concat(r.username||r.aliasName," > ").concat(a.username||r.aliasName):"".concat(a.username||r.aliasName," > ").concat(r.username||r.aliasName)}))((function(e,t){var n=t.ids;return"w-name-".concat(n.join(" "))}));function ua(){return(ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function da(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ma=a.a.createElement("rect",{x:3,y:11,width:18,height:11,rx:2,ry:2}),fa=a.a.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}),pa=function(e){var t=e.svgRef,n=e.title,r=da(e,["svgRef","title"]);return a.a.createElement("svg",ua({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-lock",ref:t},r),n?a.a.createElement("title",null,n):null,ma,fa)},ha=a.a.forwardRef((function(e,t){return a.a.createElement(pa,ua({svgRef:t},e))})),va=(n.p,n(59),a.a.memo((function(e){var t=e.roomId,n=Object(c.d)((function(e){return ra(e,{id:t})}));return a.a.createElement(an,{classNames:["RoomItem"],key:t,onClick:function(){return ue.dispatch(fn({windows:[{id:"".concat(ie.DIALOGJOINROOM,"-").concat(t),value:{type:ie.DIALOGJOINROOM,roomId:t}}]}))}},n.roomName,n.isLocked&&a.a.createElement("div",{className:"lock"},a.a.createElement(ha,null)))}))),ga=a.a.memo((function(e){var t=e.onChange,n=Object(c.d)(ca);return a.a.createElement(Ne,{dropdown:!0,checkWidth:!0,key:"roomList",classNames:["RoomList"],title:"Rooms"},n.map((function(e){return a.a.createElement(va,{key:e,roomId:e,onChange:t})})))})),ya=a.a.memo((function(e){var t=e.room,n=e.onChange,r=Object(c.d)((function(e){return sa(e,{ids:t.participantIds})}));return a.a.createElement(an,{key:t.objectId,onClick:function(){n({roomId:t.objectId,roomName:r})}},r)})),ba=a.a.memo((function(e){var t=e.onChange,n=Object(c.d)(oa);return a.a.createElement(Ne,{dropdown:!0,checkWidth:!0,key:"whisperList",classNames:["WhisperList"],title:"PM"},n.map((function(e){return a.a.createElement(ya,{key:e.objectId,room:e,onChange:t})})))})),Ea=function(e){var t=e.roomId,n=e.onChange,r=e.classNames,o=void 0===r?[]:r,i=Object(c.d)((function(e){return ra(e,{id:t})}));return a.a.createElement(an,{classNames:["FollowingItem"].concat(o),key:t,onClick:function(){n({roomId:t})}},i.roomName)},Oa=a.a.memo(Ea);Ea.defaultProps={classNames:[]};var wa=a.a.memo((function(e){var t=e.onChange,n=e.roomId,r=Object(c.d)(ia);return a.a.createElement(Ne,{dropdown:!0,checkWidth:!0,key:"followingList",classNames:["FollowingList"],title:"Joined"},r.map((function(e){return a.a.createElement(Oa,{classNames:["".concat(e===n?"selected":"")],key:e,roomId:e,onChange:t})})))})),ja=a.a.memo((function(e){var t=e.onChange,n=e.roomId,r=Object(c.d)(Qt);return a.a.createElement(a.a.Fragment,null,r>=re&&a.a.createElement(a.a.Fragment,null,a.a.createElement(wa,{roomId:n,key:"following",onChange:t}),a.a.createElement(ba,{key:"whisper",onChange:t}),a.a.createElement(ga,{key:"room",onChange:t})),a.a.createElement(Ur,{onDone:t,key:"user"}))}));function Ia(){return(Ia=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ka(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var xa=a.a.createElement("polyline",{points:"4 14 10 14 10 20"}),Na=a.a.createElement("polyline",{points:"20 10 14 10 14 4"}),Ca=a.a.createElement("line",{x1:14,y1:10,x2:21,y2:3}),Ra=a.a.createElement("line",{x1:3,y1:21,x2:10,y2:14}),La=function(e){var t=e.svgRef,n=e.title,r=ka(e,["svgRef","title"]);return a.a.createElement("svg",Ia({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-minimize-2",ref:t},r),n?a.a.createElement("title",null,n):null,xa,Na,Ca,Ra)},Sa=a.a.forwardRef((function(e,t){return a.a.createElement(La,Ia({svgRef:t},e))})),Ta=(n.p,n(60),a.a.forwardRef((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,n=e.onRemove,o=e.width,c=e.height,i=e.scrollTo,s=void 0!==i&&i,u=e.classNames,d=void 0===u?[]:u,m=e.altText,f=void 0===m?"":m,p=e.fullImage,h=e.fullWidth,v=e.fullHeight,g=arguments.length>1?arguments[1]:void 0,y=Object(r.useRef)(null),b=Object(r.useState)(!1),E=Object(l.a)(b,2),O=E[0],w=E[1];Object(r.useEffect)((function(){s&&!O&&y.current&&y.current.scrollIntoView({block:"nearest"})}),[O]);var j=function(e){p&&(w(!O),e.stopPropagation())};return a.a.createElement("div",{role:"complementary",ref:y,className:"".concat(["Image",O?"full":""].concat(d).join(" ")),onClick:j},n&&a.a.createElement("div",{className:"remove clickable",role:"complementary",onClick:function(e){n(),e.stopPropagation()}},"X"),p&&a.a.createElement("div",{onClick:j,className:"zoom clickable",role:"complementary"},O?a.a.createElement(Sa,null):a.a.createElement(vr,null)),a.a.createElement("img",{className:p?"clickable":"",onClick:j,width:O?h:o,height:O?v:c,ref:g,src:O?p:t,alt:f}))}))),Aa=Ta;function Pa(){return(Pa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Da(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}Ta.defaultProps={altText:"",classNames:[],onRemove:void 0,width:void 0,height:void 0,fullImage:void 0,fullWidth:void 0,fullHeight:void 0,scrollTo:!1};var Ma=a.a.createElement("rect",{x:3,y:3,width:18,height:18,rx:2,ry:2}),Wa=a.a.createElement("circle",{cx:8.5,cy:8.5,r:1.5}),Fa=a.a.createElement("polyline",{points:"21 15 16 10 5 21"}),Ga=function(e){var t=e.svgRef,n=e.title,r=Da(e,["svgRef","title"]);return a.a.createElement("svg",Pa({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-image",ref:t},r),n?a.a.createElement("title",null,n):null,Ma,Wa,Fa)},Ha=a.a.forwardRef((function(e,t){return a.a.createElement(Ga,Pa({svgRef:t},e))})),Ba=(n.p,n(61),a.a.memo((function(e){var t=e.useIcon,n=void 0!==t&&t,o=Object(Fr.c)(),c=o.register,i=o.setValue,s=Object(r.useRef)(null),u=Object(r.useState)(),d=Object(l.a)(u,2),m=d[0],f=d[1],p=Object(Fr.d)({name:"image"});Object(r.useEffect)((function(){c("image")}),[]),Object(r.useEffect)((function(){i("image",m||void 0)}),[m]),Object(r.useEffect)((function(){console.log(p),p||f()}),[p]);return a.a.createElement("div",{className:"ImageUpload"},a.a.createElement("input",{key:"uploadInput",className:"hide",ref:s,type:"file",accept:"image/png, image/jpeg, image/pjpeg",onChange:function(e){var t=(e.target.files||[])[0];if(t){var n=new FileReader;n.addEventListener("load",(function(){if(n.result){var e={imageName:t.name,source:n.result};f(e)}})),n.readAsDataURL(t)}}}),a.a.createElement(Aa,{onRemove:function(){return f()},classNames:["previewImage"].concat([m?"":"hide"]),image:m?m.source:"",altText:"Image preview"}),a.a.createElement(k,{type:"button",onClick:function(){s.current.click()}},a.a.createElement(Ha,null),!n&&a.a.createElement("span",null,"Upload image")))}))),Va=function(){var e=Object(Le.a)(Re.a.mark((function e(t){var n,r,a,o,c,i,l;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,r=t.roomId,a=t.image,o=ra(ue.getState(),{id:r}),c=o.isWhisper?o.participantIds:[],i={roomId:r,ownerAliasId:Ye(ue.getState())||void 0,text:n.split("\n")},o.isUser?(i.messageType=Z,c.push(Ke(ue.getState())),c.push(r)):o.isWhisper?i.messageType=Z:i.messageType=X,e.next=7,Ft(It,{message:i,image:a,participantIds:c});case 7:return l=e.sent,ue.dispatch(Qe({messages:[l.message]})),e.abrupt("return",{message:l.message,switchRoom:!0});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ua=function(){var e=Object(Le.a)(Re.a.mark((function e(t){var n,r,a,o,c;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,r=t.text,a=t.image,o={messageType:$,text:[n].concat(r.split("\n")),roomId:h(ue.getState())},e.next=4,Ft(It,{message:o,image:a});case 4:return c=e.sent,ue.dispatch(Qe({messages:[c.message]})),e.abrupt("return",{message:c.message});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qa=function(){var e=Object(Le.a)(Re.a.mark((function e(t){var n,r;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,e.next=3,Ft(Rt,{roomId:n});case 3:return r=e.sent,ue.dispatch(Qe({messages:r.messages})),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function za(){return(za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ya(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ja=a.a.createElement("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),Ka=a.a.createElement("circle",{cx:12,cy:7,r:4}),Qa=function(e){var t=e.svgRef,n=e.title,r=Ya(e,["svgRef","title"]);return a.a.createElement("svg",za({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-user",ref:t},r),n?a.a.createElement("title",null,n):null,Ja,Ka)},Xa=a.a.forwardRef((function(e,t){return a.a.createElement(Qa,za({svgRef:t},e))})),Za=(n.p,n(62),function(e){var t=e.useIcon,n=void 0!==t&&t,r=Object(c.d)(nn),o=Object(c.d)(Ke),i=r.find((function(e){return e.objectId===o})),l=i?i.aliasName||i.username:"---";return a.a.createElement(Ne,{dropdown:!0,classNames:["IdentityPicker"],title:n?a.a.createElement(Xa,null):a.a.createElement(a.a.Fragment,null,a.a.createElement(Xa,null),a.a.createElement("span",null,l))},(n?r:r.filter((function(e){return e.objectId!==o}))).map((function(e){return a.a.createElement(an,{classNames:["".concat(e.objectId===o?"selected":"")],key:e.objectId,onClick:function(){return ue.dispatch(mt({aliasId:e.aliasName?e.objectId:void 0}))}},e.aliasName||e.username)})))}),$a=a.a.memo(Za);function _a(){return(_a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function eo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}Za.defaultProps={useIcon:void 0};var to=a.a.createElement("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),no=a.a.createElement("circle",{cx:12,cy:10,r:3}),ro=function(e){var t=e.svgRef,n=e.title,r=eo(e,["svgRef","title"]);return a.a.createElement("svg",_a({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-map-pin",ref:t},r),n?a.a.createElement("title",null,n):null,to,no)},ao=a.a.forwardRef((function(e,t){return a.a.createElement(ro,_a({svgRef:t},e))}));n.p;function oo(){return(oo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function co(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var io=a.a.createElement("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),lo=a.a.createElement("line",{x1:7,y1:7,x2:7.01,y2:7}),so=function(e){var t=e.svgRef,n=e.title,r=co(e,["svgRef","title"]);return a.a.createElement("svg",oo({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-tag",ref:t},r),n?a.a.createElement("title",null,n):null,io,lo)},uo=a.a.forwardRef((function(e,t){return a.a.createElement(so,oo({svgRef:t},e))}));n.p;function mo(){return(mo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var po=a.a.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),ho=a.a.createElement("polyline",{points:"14 2 14 8 20 8"}),vo=a.a.createElement("line",{x1:12,y1:18,x2:12,y2:12}),go=a.a.createElement("line",{x1:9,y1:15,x2:15,y2:15}),yo=function(e){var t=e.svgRef,n=e.title,r=fo(e,["svgRef","title"]);return a.a.createElement("svg",mo({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-file-plus",ref:t},r),n?a.a.createElement("title",null,n):null,po,ho,vo,go)},bo=a.a.forwardRef((function(e,t){return a.a.createElement(yo,mo({svgRef:t},e))}));n.p;function Eo(){return(Eo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Oo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var wo=a.a.createElement("path",{d:"M22.61 16.95A5 5 0 0 0 18 10h-1.26a8 8 0 0 0-7.05-6M5 5a8 8 0 0 0 4 15h9a5 5 0 0 0 1.7-.3"}),jo=a.a.createElement("line",{x1:1,y1:1,x2:23,y2:23}),Io=function(e){var t=e.svgRef,n=e.title,r=Oo(e,["svgRef","title"]);return a.a.createElement("svg",Eo({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-cloud-off",ref:t},r),n?a.a.createElement("title",null,n):null,wo,jo)},ko=a.a.forwardRef((function(e,t){return a.a.createElement(Io,Eo({svgRef:t},e))})),xo=(n.p,n(63),function(e){var t=e.roomId,n=e.onSend,o=e.minAccessLevel,i=void 0===o?re:o,s=Object(r.useState)(!1),u=Object(l.a)(s,2),d=u[0],p=u[1],h=Object(Fr.b)(),v=Object(r.useRef)(null),g=Object(r.useRef)(null),y=Object(c.d)(qe),b=Object(c.d)(Qt),E=Object(c.d)(m),O=Object(c.d)(f),w=function(){if(v.current){var e=v.current;e.style.height&&e.scrollHeight.toString()===e.style.height.split("px")[0]||(e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px"),v.current.scrollIntoView())}};return a.a.createElement("div",{className:"InputArea"},a.a.createElement(Fr.a,h,a.a.createElement("form",{onSubmit:h.handleSubmit((function(e){var r=e.text,a=e.image;p(!0),Va({roomId:t,image:a,text:r}).then((function(e){var t=e.message,r=e.switchRoom;h.setValue("text",""),h.setValue("image",void 0),w(),r&&n({roomId:t.roomId}),p(!1)})).catch((function(e){console.log("error",e),p(!1)}))}))},b>=i&&a.a.createElement("div",{key:"buttonBox",className:"buttonBox"},E.CHAT&&a.a.createElement(Ba,{useIcon:!0}),a.a.createElement(k,{onClick:function(){}},a.a.createElement(uo,null)),a.a.createElement(k,{onClick:function(){}},a.a.createElement(bo,null)),O&&a.a.createElement(k,{onClick:function(){}},a.a.createElement(ao,null)),a.a.createElement($a,null)),a.a.createElement("div",{className:"input"},a.a.createElement("textarea",{maxLength:600,name:"text",key:"input",rows:1,ref:function(e){h.register(e),v.current=e},onKeyDown:function(e){var t=e.key;e.altKey&&"Enter"===t&&g.current&&g.current.click()},placeholder:y?"Alt+Enter to send message":"Offline. Reconnecting to server...",className:[].join(" "),onChange:function(e){return w(e.target)}}),a.a.createElement(k,{ref:g,disabled:!y||d,key:"send",type:"submit",classNames:["sendButton"],onClick:function(){}},y?a.a.createElement("span",null,"Send"):a.a.createElement(ko,null))))))}),No=a.a.memo(xo);xo.defaultProps={minAccessLevel:re};var Co=function(e,t){var n=t.id;return e.messages.get(n)},Ro=function(e){return e.messages},Lo=Ut()([Ro,function(e,t){return t.roomId}],(function(e,t){return Object(q.a)(e.values()).filter((function(e){return e.roomId===t}))}))((function(e,t){return t.roomId})),So=Ut()([Ro],(function(e){return Object(q.a)(e.values()).filter((function(e){return e.messageType===$})).reverse()}))((function(){return"news"})),To=Ut()([So],(function(e){return e.map((function(e){return{objectId:e.objectId,points:e.points}}))}))((function(){return"news-ids"})),Ao=Ut()([Lo],(function(e){return e.map((function(e){return e.objectId}))}))((function(e,t){var n=t.roomId;return"id-".concat(n)})),Po=(n(64),a.a.memo((function(e){var t=e.identityId,n=e.timeCreated,r=Object(c.d)((function(e){return _t(e,{id:t})})),o=Object(c.d)((function(e){return v(e,{date:n})}));return a.a.createElement("p",{className:"MessageInfo"},a.a.createElement("span",{role:"button",tabIndex:0,className:"clickable username",onClick:function(e){r&&ue.dispatch(fn({windows:[{id:"".concat(ie.DIALOGIDENTITY,"-").concat(r.objectId),value:{identityId:r.objectId,type:ie.DIALOGIDENTITY}}]})),e.stopPropagation()}},r?r.username||r.aliasName:"-"),a.a.createElement("span",{className:"time"},o.fullStamp))}))),Do=(n(65),function(e){var t=e.previousMessageId,n=e.messageId,o=e.isLatest,i=void 0!==o&&o,l=e.selected,s=void 0!==l&&l,u=Object(r.useRef)(),d=Object(c.d)((function(e){return Co(e,{id:t})})),m=Object(c.d)((function(e){return Co(e,{id:n})})),f=oe({objectToAccess:m,toAuth:Kt(ue.getState())}).hasFullAccess;return a.a.createElement(an,{scrollTo:s||i,ref:u,classNames:["MessageItem","".concat(f?"clickable":"")],key:n},!(!!d&&!(new Date(m.lastUpdated).getTime()-9e5>new Date(d.lastUpdated).getTime())&&(!(!d.ownerAliasId||!m.ownerAliasId||d.ownerAliasId!==m.ownerAliasId)||!d.ownerAliasId&&!m.ownerAliasId&&d.ownerId===m.ownerId))&&a.a.createElement(Po,{identityId:m.ownerAliasId||m.ownerId,timeCreated:m.customTimeCreated||m.timeCreated}),a.a.createElement("div",{className:"text"},m.text.map((function(e,t){return a.a.createElement("p",{key:t},e)})),m.image&&m.image.thumbFileName&&a.a.createElement(Aa,{scrollTo:!0,image:"/upload/images/".concat(m.image.thumbFileName),altText:"pic",width:m.image.thumbWidth,height:m.image.thumbHeight,fullImage:"/upload/images/".concat(m.image.fileName),fullWidth:m.image.width,fullHeight:m.image.height})))}),Mo=a.a.memo(Do);Do.defaultProps={previousMessageId:void 0,selected:!1,isLatest:!1};n(66);var Wo=function(e){var t=e.roomId,n=e.messageId,o=Object(c.d)((function(e){return Ao(e,{roomId:t})})),i=Object(r.useRef)("");o[o.length-1]!==i&&(i.current=o[o.length-1]);return a.a.createElement(Ne,{observe:"lower",key:"messageList",scrollTo:{buffer:!0,direction:"bottom",skipFirstRender:"string"===typeof n},classNames:["MessageList"]},o.map((function(e,t,r){return a.a.createElement(Mo,{isLatest:e===i.current,selected:n&&n===e,key:e,previousMessageId:r[t-1],messageId:e})})))},Fo=a.a.memo(Wo);Wo.defaultProps={roomId:void 0,messageId:void 0};n(67);var Go=function(e){var t=e.roomId,n=e.onSend,r=Object(c.d)(Qt);return a.a.createElement("div",{className:"Messages"},a.a.createElement("div",{className:"spacer"}),a.a.createElement(Fo,{key:"messagesList",roomId:t}),r>=re&&a.a.createElement(No,{onSend:n,roomId:t,key:"inputArea"}))},Ho=a.a.memo(Go);Go.defaultProps={roomId:void 0};var Bo=a.a.memo((function(e){var t=e.children;return a.a.createElement(Ne,{dropdown:!0,checkWidth:!0,classNames:["FileMenu"],title:"File"},t)})),Vo=(n(68),function(e){var t=e.id,n=e.roomId,o=e.index,i=Object(r.useState)(n||d(ue.getState())),s=Object(l.a)(i,2),u=s[0],m=s[1],f=Object(c.d)((function(e){return ra(e,{id:u})})),p=Object(c.d)(Kt);Object(r.useEffect)((function(){p&&!p.isAnonymous&&f||u===d(ue.getState())||m(d(ue.getState()))}),[f,p]),Object(r.useEffect)((function(){n&&u!==n&&m(n)}),[n]);var h=function(){if(!f)return"Chat";if(f.isUser){var e=_t(ue.getState(),{id:u});return"PM: ".concat(e.aliasName||e.username)}return f.isWhisper?"PM: ".concat(sa(ue.getState(),{ids:f.participantIds})):"Chat: ".concat(f.roomName)}(),v=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.roomId;m(t)}),[]),g=Object(r.useCallback)((function(){ue.dispatch(fn({windows:[{id:t,value:{type:ie.CHAT}}]}))}),[]),y=Object(r.useCallback)((function(){return ue.dispatch(pn({id:t}))}),[t]),b=Object(r.useCallback)((function(){return ue.dispatch(fn({windows:[{id:ie.DIALOGCREATEROOM,value:{type:ie.DIALOGCREATEROOM}}]}))}),[]),E=oe({objectToAccess:f,toAuth:p}).hasFullAccess;return a.a.createElement(Sr,{index:o,done:y,classNames:["Chat"],title:h,onClick:g,menu:a.a.createElement(a.a.Fragment,null,!p.isAnonymous&&a.a.createElement(Bo,{key:"fileMenu"},a.a.createElement(an,{stopPropagation:!0,key:"createRoom",onClick:b},"New room"),E&&a.a.createElement(an,{stopPropagation:!0,key:"configRoom",onClick:function(){}},"Config room"),E&&!f.isWhisper&&!f.isUser&&!f.isSystemRoom&&!f.isTeam&&a.a.createElement(an,{stopPropagation:!0,key:"removeRoom",onClick:function(){return ue.dispatch(fn({windows:[{id:ie.DIALOGREMOVEROOM,value:{type:ie.DIALOGREMOVEROOM,roomId:u}}]}))}},"Delete room")),a.a.createElement(ja,{roomId:u,key:"rooms",onChange:v}))},a.a.createElement(Ho,{key:"messages",roomId:u,onSend:v}))}),Uo=a.a.memo(Vo);Vo.defaultProps={roomId:void 0};n(69),n(70);var qo=function(e){var t=e.children,n=e.title,r=e.error,o=e.text,c=e.done,i=e.onClick,l=e.index,s=e.classNames,u=void 0===s?[]:s;return a.a.createElement(Sr,{index:l,type:"dialog",done:c,title:n,classNames:["Dialog"].concat(u),onClick:i},r&&a.a.createElement("div",{className:"error"},a.a.createElement("span",null,r.message)),o&&a.a.createElement("div",null,o),t)},zo=a.a.memo(qo);qo.defaultProps={children:void 0,error:void 0,title:void 0,text:void 0,classNames:[]};var Yo=a.a.memo((function(e){var t=e.id,n=e.identityId,r=e.index,o=Object(c.d)((function(e){return _t(e,{id:n})})),i=Object(c.d)(Ke);return a.a.createElement(zo,{index:r,title:"User: ".concat(o.aliasName||o.username),onClick:function(){ue.dispatch(fn({windows:[{id:t,value:{type:ie.DIALOGIDENTITY,identityId:n}}]}))},done:function(){return ue.dispatch(pn({id:t}))}},"-1"!==i&&a.a.createElement("div",{className:"buttons"},a.a.createElement(k,{stopPropagation:!0,type:"button",onClick:function(){return Object(c.b)((function(){ue.dispatch(fn({windows:[{id:"".concat(ie.DIALOGCREATETRANSACTION,"-").concat(n),value:{type:ie.DIALOGCREATETRANSACTION,toWalletId:n}}]})),ue.dispatch(pn({id:t}))}))}},a.a.createElement(An,null)),a.a.createElement(k,{stopPropagation:!0,type:"button",onClick:function(){var e=la(ue.getState(),{identityId:n,currentIdentityId:i});Object(c.b)((function(){ue.dispatch(fn({windows:[{id:ie.CHAT,value:{type:ie.CHAT,roomId:e.objectId}}]})),ue.dispatch(pn({id:t}))}))}},a.a.createElement(En,null))))})),Jo=function(){var e=Object(Le.a)(Re.a.mark((function e(t){var n,r,a;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.room,r=Object(U.a)(Object(U.a)({},n),{},{ownerAliasId:Ye(ue.getState())||void 0}),e.next=4,Ft(kt,{room:r});case 4:return a=e.sent,e.next=7,ue.dispatch(lt({room:a.room,user:a.user}));case 7:return e.abrupt("return",{room:a.room});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ko=function(){var e=Object(Le.a)(Re.a.mark((function e(t){var n,r,a,o;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,r=t.password,a={roomId:n,password:r,aliasId:Ye(ue.getState())||void 0},e.next=4,Ft(Ct,a);case 4:return o=e.sent,e.next=7,qa({roomId:n});case 7:return e.next=9,ue.dispatch(lt({room:o.room,user:o.user}));case 9:return e.abrupt("return",{room:o.room,user:o.user});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qo=function(){var e=Object(Le.a)(Re.a.mark((function e(t){var n,r;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,e.next=3,Ft(Lt,{roomId:n});case 3:return r=e.sent,e.next=6,ue.dispatch(it({rooms:[{objectId:n}]}));case 6:return e.abrupt("return",{room:r.room});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xo=a.a.memo((function(e){var t=e.id,n=e.index,r=Object(Fr.b)();return r.errors.repeatPassword&&r.setValue("repeatPassword",""),a.a.createElement(zo,{index:n,classNames:["CreateRoomDialog"],onClick:function(){ue.dispatch(fn({windows:[{id:t,value:{type:ie.DIALOGCREATEROOM}}]}))},done:function(){return ue.dispatch(pn({id:t}))},title:"New room"},a.a.createElement(Fr.a,r,a.a.createElement("form",{onSubmit:r.handleSubmit((function(e){var n=e.roomName,r=e.password,a=e.topic;Jo({room:{roomName:n,password:r,topic:a}}).then((function(e){var n=e.room;Object(c.b)((function(){ue.dispatch(fn({windows:[{id:ie.CHAT,value:{type:ie.CHAT,roomId:n.objectId}}]})),ue.dispatch(pn({id:t}))}))})).catch((function(e){return console.log(e)}))}))},a.a.createElement("div",{className:"identity"},a.a.createElement("span",null,"You are: "),a.a.createElement($a,null)),a.a.createElement(Br,{required:!0,maxLength:20,name:"roomName",placeholder:"Name of the room"}),a.a.createElement(Br,{maxLength:300,name:"topic",placeholder:"(opt) Topic (shown when joining the room)"}),a.a.createElement(Br,{minLength:4,maxLength:100,name:"password",type:"password",placeholder:"(opt) Password"}),a.a.createElement(Br,{minLength:4,maxLength:100,shouldEqual:"password",name:"repeatPassword",type:"password",placeholder:"".concat(r.errors.repeatPassword?"Error. Passwords must match!":"(opt) Repeat password")}),a.a.createElement("div",{className:"buttons"},a.a.createElement(k,{type:"submit",onClick:function(){}},"Create")))))})),Zo=a.a.memo((function(e){var t=e.id,n=e.roomId,o=e.index,i=Object(r.useState)(),s=Object(l.a)(i,2),u=s[0],d=s[1],m=Object(c.d)((function(e){return ra(e,{id:n})}));return a.a.createElement(zo,{index:o,classNames:["RemoveRoomDialog"],error:u,onClick:function(){ue.dispatch(fn({windows:[{id:t,value:{type:ie.DIALOGREMOVEROOM,roomId:n}}]}))},done:function(){return ue.dispatch(pn({id:t}))},title:"Delete room ".concat(m?m.roomName:""),text:"Are you sure you want to delete ".concat(m?m.roomName:"","?")},a.a.createElement(k,{type:"button",onClick:function(){return ue.dispatch(pn({id:t}))}},"No"),a.a.createElement(k,{type:"submit",onClick:function(){Qo({roomId:n}).then((function(){Object(c.b)((function(){ue.dispatch(fn({windows:[{id:ie.CHAT,value:{type:ie.CHAT}}]})),ue.dispatch(pn({id:t}))}))})).catch((function(e){return d(e)}))}},"Yes"))})),$o=a.a.memo((function(e){var t=e.id,n=e.index,o=Object(Fr.b)(),c=Object(r.useState)(),i=Object(l.a)(c,2),s=i[0],u=i[1],d=function(){var e=Object(Le.a)(Re.a.mark((function e(n){var r,a;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.username,a=n.password,Gt(r,a).then((function(){ue.dispatch(pn({id:t}))})).catch((function(e){u(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(zo,{index:n,classNames:["LoginDialog"],onClick:function(){ue.dispatch(fn({windows:[{id:t,value:{type:ie.DIALOGLOGIN}}]}))},done:function(){return ue.dispatch(pn({id:t}))},error:s,title:"Login"},a.a.createElement(Fr.a,o,a.a.createElement("form",{onSubmit:o.handleSubmit(d)},a.a.createElement(Br,{name:"username",placeholder:"Username"}),a.a.createElement(Br,{name:"password",placeholder:"Password",type:"password"}),a.a.createElement("div",{className:"buttons"},a.a.createElement(k,{type:"submit",onClick:function(){}},"Login")))))})),_o=function(e){var t=e.onChange,n=e.children,o=e.name,c=e.defaultValue,i=e.required,s=void 0!==i&&i,u=e.placeholder,d=void 0===u?"":u,m=e.multiple,f=void 0!==m&&m,p=Object(Fr.c)().register,h=Object(r.useState)(!1),v=Object(l.a)(h,2),g=v[0],y=v[1],b=Object(r.useState)(!1),E=Object(l.a)(b,2),O=E[0],w=E[1],j=function(e){var t=Array.from(e.target.selectedOptions).filter((function(e){return""!==e.value}));g&&s&&w(0===t.length)};return a.a.createElement("select",{defaultValue:c,required:s,name:o,ref:p,className:"Select ".concat(O?"empty":""),onFocus:function(){return y(!0)},onBlur:j,onChange:function(e){j(e),t&&t(Array.from(e.target.selectedOptions).map((function(e){return e.value})).filter((function(e){return""!==e})))},placeholder:d,multiple:f},n)},ec=_o;_o.defaultProps={multiple:!1,children:void 0,placeholder:"",required:!1,onChange:void 0};var tc=function(e){var t=e.onChange,n=e.name,o=e.maxLength,c=e.required,i=void 0!==c&&c,s=e.placeholder,u=void 0===s?"":s,d=Object(Fr.c)().register,m=Object(r.useState)(!1),f=Object(l.a)(m,2),p=f[0],h=f[1],v=Object(r.useState)(!1),g=Object(l.a)(v,2),y=g[0],b=g[1];return a.a.createElement("textarea",{maxLength:o,required:i,name:n,ref:d({maxLength:o}),defaultValue:"",className:y?"empty":"",onFocus:function(){return h(!0)},onBlur:function(e){var t=e.target.value.trim();p&&i&&b(""!==t)},onChange:function(e){t&&t(e.target.value)},placeholder:u})},nc=tc;tc.defaultProps={placeholder:"",required:!1,onChange:void 0,maxLength:void 0};var rc=function(){var e=Object(Le.a)(Re.a.mark((function e(t){var n,r;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t).user.registerDevice=He(),e.next=4,Ft(jt,n);case 4:return r=e.sent,e.next=7,ue.dispatch(at(r));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ac=a.a.memo((function(e){var t=e.id,n=e.index,o=Object(Fr.b)(),i=Object(r.useState)(),s=Object(l.a)(i,2),d=s[0],m=(s[1],Object(r.useState)()),f=Object(l.a)(m,2),p=f[0],h=f[1],v=Object(c.d)(u),g=function(){var e=Object(Le.a)(Re.a.mark((function e(n){var r,a,o,c,i,l,s;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.offName,a=n.username,o=n.password,c=n.repeatPassword,i=n.pronouns,l=n.description,(!v||r)&&a&&o&&c&&i){e.next=3;break}return e.abrupt("return");case 3:if(o===c){e.next=5;break}return e.abrupt("return");case 5:return s={image:d,user:{offName:r,username:a,password:o,pronouns:i,description:l?l.split("\n"):void 0}},e.prev=6,e.next=9,rc(s);case 9:return e.next=11,Gt(a,o);case 11:ue.dispatch(pn({id:t})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),h(e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(zo,{index:n,error:p,onClick:function(){ue.dispatch(fn({windows:[{id:t,value:{type:ie.DIALOGREGISTER}}]}))},done:function(){return ue.dispatch(pn({id:t}))},title:"Register user"},a.a.createElement(Fr.a,o,a.a.createElement("form",{onSubmit:o.handleSubmit(g)},v&&a.a.createElement(Br,{required:!0,name:"offName",placeholder:"Out-of-game name"}),a.a.createElement(Br,{required:!0,name:"username",placeholder:"Username"}),a.a.createElement(ec,{multiple:!0,required:!0,name:"pronouns"},a.a.createElement("option",{value:""},"---Choose pronouns---"),a.a.createElement("option",{value:"they"},"They/Them"),a.a.createElement("option",{value:"she"},"She/Her"),a.a.createElement("option",{value:"he"},"He/Him"),a.a.createElement("option",{value:"it"},"It")),a.a.createElement(Br,{required:!0,name:"password",placeholder:"Password",type:"password"}),a.a.createElement(Br,{required:!0,shouldEqual:"password",name:"repeatPassword",placeholder:"Repeat password",type:"password"}),a.a.createElement(nc,{name:"description",placeholder:"Description"}),a.a.createElement("div",{className:"buttons"},a.a.createElement(k,{type:"submit",onClick:function(){}},"Register")))))})),oc=function(){var e=Object(Le.a)(Re.a.mark((function e(t){var n;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(wt,t);case 2:return n=e.sent,e.next=5,ue.dispatch(pt(n));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cc=a.a.memo((function(e){var t=e.id,n=e.index,o=Object(Fr.b)(),c=Object(r.useState)(),i=Object(l.a)(c,2),s=i[0],u=(i[1],function(){var e=Object(Le.a)(Re.a.mark((function e(n){var r,a,o;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.aliasName,a=n.pronouns,o=n.description,oc({image:s,alias:{aliasName:r,pronouns:a,description:o}}).then((function(){return ue.dispatch(pn({id:t}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return a.a.createElement(zo,{index:n,title:"New alias",onClick:function(){ue.dispatch(fn({windows:[{id:t,value:{type:ie.DIALOGCREATEALIAS}}]}))},done:function(){return ue.dispatch(pn({id:t}))}},a.a.createElement(Fr.a,o,a.a.createElement("form",{onSubmit:o.handleSubmit(u)},a.a.createElement(Br,{required:!0,name:"aliasName",placeholder:"Alias name"}),a.a.createElement(ec,{multiple:!0,required:!0,name:"pronouns"},a.a.createElement("option",{value:""},"---Choose pronouns---"),a.a.createElement("option",{value:"they"},"They/Them"),a.a.createElement("option",{value:"she"},"She/Her"),a.a.createElement("option",{value:"he"},"He/Him"),a.a.createElement("option",{value:"it"},"It")),a.a.createElement(nc,{name:"description",placeholder:"Description"}),a.a.createElement("div",{className:"buttons"},a.a.createElement(k,{stopPropagation:!0,type:"submit",onClick:function(){}},"Create")))))})),ic=function(){var e=Object(Le.a)(Re.a.mark((function e(t){var n,r,a;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction,r=Object(U.a)(Object(U.a)({},n),{},{ownerAliasId:Ye(ue.getState())||void 0}),e.next=4,Ft(Nt,{transaction:r});case 4:return a=e.sent,e.next=7,ue.dispatch(gt(a));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lc=a.a.memo((function(e){var t=e.id,n=e.toWalletId,r=e.index,o=Object(Fr.b)(),i=Object(c.d)(Ke),l=Object(c.d)(Wr),s=Object(c.d)((function(e){return $t(e,{ids:l})})),u=Object(c.d)((function(e){return en(e,{id:n})})),d=[],m=function(){var e=Object(Le.a)(Re.a.mark((function e(r){var a,o,c;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.note,o=r.amount,c=r.fromWalletId,ic({transaction:{note:a,amount:o,fromWalletId:c,toWalletId:n}}).then((function(){return ue.dispatch(pn({id:t}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.forEach((function(e){d.push(a.a.createElement("option",{key:e.objectId,value:e.objectId},e.teamName||e.aliasName||e.username))})),a.a.createElement(zo,{index:r,title:"Transfer to ".concat(u.teamName||u.aliasName||u.username),onClick:function(){ue.dispatch(fn({windows:[{id:t,value:{type:ie.DIALOGCREATETRANSACTION,toWalletId:n}}]}))},done:function(){return ue.dispatch(pn({id:t}))}},a.a.createElement(Fr.a,o,a.a.createElement("form",{onSubmit:o.handleSubmit(m)},a.a.createElement("p",null,"You are making a transfer to ".concat(u.teamName||u.aliasName||u.username)),a.a.createElement("div",null,a.a.createElement("span",null,"From your wallet: "),a.a.createElement(ec,{required:!0,defaultValue:i,name:"fromWalletId"},a.a.createElement("option",{value:""},"---Choose wallet---"),a.a.createElement(a.a.Fragment,null,d))),a.a.createElement(Br,{required:!0,name:"amount",placeholder:"Amount"}),a.a.createElement(Br,{name:"note",placeholder:"Note"}),a.a.createElement("div",{className:"buttons"},a.a.createElement(k,{stopPropagation:!0,type:"submit",onClick:function(){}},"Transfer")))))})),sc=(n(71),function(e,t){var n=t.id;return e.docFiles.get(n)}),uc=Ut()([function(e){return e.docFiles}],(function(e){return Object(q.a)(e.values()).map((function(e){return{objectId:e.objectId,title:e.title}}))}))((function(){return"docFile-ids-names"})),dc=(n(72),a.a.memo((function(e){var t=e.docFileId,n=Object(c.d)((function(e){return sc(e,{id:t})}));return a.a.createElement(an,{stopPropagation:!0,classNames:["DocFileItem"],key:n.objectId,onClick:function(){n.isLocked?console.log("clocked"):ue.dispatch(fn({windows:[{id:ie.DOCFILE,value:{type:ie.DOCFILE,docFileId:t}}]}))}},n.title,n.isLocked&&a.a.createElement("div",{className:"lock"},a.a.createElement(ha,null)))}))),mc=a.a.memo((function(){var e=Object(c.d)(uc);return a.a.createElement(Ne,{dropdown:!0,checkWidth:!0,title:"Documents"},e.sort((function(e,t){var n=e.title.toLowerCase(),r=t.title.toLowerCase();return n>r?1:n<r?-1:0})).map((function(e){var t=e.objectId;return a.a.createElement(dc,{key:t,docFileId:t})})))})),fc=(n(73),a.a.memo((function(e){var t=e.docFileId,n=Object(c.d)((function(e){return sc(e,{id:t})})),r=Object(c.d)((function(e){return en(e,{id:n.ownerAliasId||n.ownerId})}));return a.a.createElement("div",{className:"DocFileViewer"},a.a.createElement("h1",{className:"title"},n.title),a.a.createElement("div",{className:"info"},a.a.createElement("p",{className:"author"},"Author: ".concat(r.teamName||r.aliasName||r.username)),a.a.createElement("p",{className:"code"},"Code: ".concat(n.code)),a.a.createElement("p",{className:"public"},"Public: ".concat(n.isPublic?"Yes":"No"))),a.a.createElement("div",{className:"text"},n.text.join("\n")))}))),pc=function(e){var t=e.id,n=e.docFileId,o=e.index,i=Object(r.useState)(),s=Object(l.a)(i,2),u=s[0],d=s[1],m=Object(c.d)((function(e){return sc(e,{id:n})}));Object(r.useEffect)((function(){n&&u!==n&&d(n)}),[n]);var f=Object(r.useCallback)((function(){ue.dispatch(fn({windows:[{id:t,value:{type:ie.DOCFILE}}]}))}),[]),p=Object(r.useCallback)((function(){return ue.dispatch(pn({id:t}))}),[t]),h=Object(r.useCallback)((function(e){return d(e)}),[]),v=Object(r.useCallback)((function(){return ue.dispatch(fn({windows:[{id:ie.DIALOGCREATEDOCFILE,value:{type:ie.DIALOGCREATEDOCFILE}}]}))}));return a.a.createElement(Sr,{index:o,done:p,classNames:["DocFile"],title:"".concat(m?"Document: ".concat(m.title):"Documents"),onClick:f,menu:a.a.createElement(a.a.Fragment,null,a.a.createElement(Bo,null,a.a.createElement(an,{stopPropagation:!0,onClick:v,key:"createDocFile"},"New document")),a.a.createElement(mc,{onChange:h}))},!u&&a.a.createElement("div",null),u&&a.a.createElement(fc,{key:"viewer",docFileId:u}))},hc=a.a.memo(pc);pc.defaultProps={docFileId:void 0};var vc=function(){var e=Object(Le.a)(Re.a.mark((function e(t){var n,r,a,o;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.docFile,r=t.images,a=Object(U.a)(Object(U.a)({},n),{},{code:""!==n.code?n.code:void 0,ownerAliasId:Ye(ue.getState())||void 0,text:n.text.split("\n")}),e.next=4,Ft(xt,{docFile:a,images:r});case 4:return o=e.sent,e.next=7,ue.dispatch(bt({docFiles:[o.docFile]}));case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gc=(n(74),a.a.memo((function(e){var t=e.id,n=e.index,o=Object(Fr.b)(),c=Object(r.useState)(),i=Object(l.a)(c,2),s=i[0],u=(i[1],function(){var e=Object(Le.a)(Re.a.mark((function e(n){var r,a,o,c;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.title,a=n.text,o=n.code,c=n.isPublic,vc({images:s?[s]:void 0,docFile:{title:r,text:a,code:o,isPublic:c}}).then((function(){return ue.dispatch(pn({id:t}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return a.a.createElement(zo,{index:n,classNames:["CreateDocFileDialog"],title:"New document",onClick:function(){ue.dispatch(fn({windows:[{id:t,value:{type:ie.DIALOGCREATEDOCFILE}}]}))},done:function(){return ue.dispatch(pn({id:t}))}},a.a.createElement(Fr.a,o,a.a.createElement("form",{onSubmit:o.handleSubmit(u)},a.a.createElement("div",{className:"identity"},a.a.createElement("span",null,"You are:"),a.a.createElement($a,null)),a.a.createElement("div",{className:"public"},a.a.createElement(Br,{type:"checkbox",name:"isPublic"}),a.a.createElement("span",null,"Do you want it to be available to the public? (A user with the right code can always access the document)")),a.a.createElement(Br,{required:!0,maxLength:40,name:"title",placeholder:"Title"}),a.a.createElement(Br,{name:"code",placeholder:"Code"}),a.a.createElement(nc,{required:!0,maxLength:3500,name:"text",placeholder:"Text"}),a.a.createElement("div",{className:"buttons"},a.a.createElement(k,{stopPropagation:!0,type:"submit",onClick:function(){}},"Create")))))})));n(75);function yc(){return(yc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ec=a.a.createElement("line",{x1:5,y1:12,x2:19,y2:12}),Oc=a.a.createElement("polyline",{points:"12 5 19 12 12 19"}),wc=function(e){var t=e.svgRef,n=e.title,r=bc(e,["svgRef","title"]);return a.a.createElement("svg",yc({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-right",ref:t},r),n?a.a.createElement("title",null,n):null,Ec,Oc)},jc=a.a.forwardRef((function(e,t){return a.a.createElement(wc,yc({svgRef:t},e))})),Ic=(n.p,a.a.memo((function(e){var t=e.message;return a.a.createElement(an,{key:t.objectId,onClick:function(){return ue.dispatch(fn({windows:[{id:ie.NEWS,value:{type:ie.NEWS,messageId:t.objectId}}]}))}},a.a.createElement("p",null,t.text[0],a.a.createElement(jc,null)))}))),kc=a.a.memo((function(){var e=Object(c.d)(Kt),t=Object(c.d)((function(t){return Mr(t,{id:e.objectId})})),n=Object(c.d)(So),r=function(){return n&&0!==n.length?Object(q.a)(n).sort((function(e,t){var n=e.points,r=t.points;return n>r?-1:n<r?1:0})).slice(0,5).map((function(e){return a.a.createElement(Ic,{key:e.objectId,message:e})})):[a.a.createElement(an,{key:"noNews"},"There are no news.")]};return a.a.createElement("div",{className:"Dashboard"},e.isAnonymous&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Welcome!"),a.a.createElement("p",null,v(ue.getState(),{date:new Date}).fullDate),a.a.createElement(Ne,{alwaysExpanded:!0,title:"Top News",classNames:["news"]},r())),!e.isAnonymous&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Welcome, ".concat(e.username,"!")),a.a.createElement("p",null,"Today's date is ".concat(v(ue.getState(),{date:new Date}).fullDate)),t&&a.a.createElement("p",null,"You have ".concat(t.amount," in your wallet.")),a.a.createElement(Ne,{alwaysExpanded:!0,title:"News",classNames:["news"]},r())))}));function xc(){return(xc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Nc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Cc=a.a.createElement("polyline",{points:"6 9 12 15 18 9"}),Rc=function(e){var t=e.svgRef,n=e.title,r=Nc(e,["svgRef","title"]);return a.a.createElement("svg",xc({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-chevron-down",ref:t},r),n?a.a.createElement("title",null,n):null,Cc)},Lc=a.a.forwardRef((function(e,t){return a.a.createElement(Rc,xc({svgRef:t},e))}));n.p;function Sc(){return(Sc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ac=a.a.createElement("polyline",{points:"18 15 12 9 6 15"}),Pc=function(e){var t=e.svgRef,n=e.title,r=Tc(e,["svgRef","title"]);return a.a.createElement("svg",Sc({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-chevron-up",ref:t},r),n?a.a.createElement("title",null,n):null,Ac)},Dc=a.a.forwardRef((function(e,t){return a.a.createElement(Pc,Sc({svgRef:t},e))})),Mc=(n.p,n(76),function(e){var t=e.messageId,n=e.expand,o=void 0!==n&&n,i=e.classNames,s=void 0===i?[]:i,u=Object(r.useRef)(),d=Object(r.useState)(!1),m=Object(l.a)(d,2),f=m[0],p=m[1],h=Object(c.d)((function(e){return Co(e,{id:t})})),g=Object(c.d)((function(e){return en(e,{id:h.teamId||h.ownerAliasId||h.ownerId})}));return Object(r.useEffect)((function(){p(o)}),[o]),a.a.createElement(an,{scrollTo:f,ref:u,elementId:"news-".concat(t),onClick:function(){return p(!f)},classNames:["NewsItem"].concat(s,[f?"expanded":""])},a.a.createElement("div",{className:"title"},a.a.createElement("p",null,h.text[0]),a.a.createElement("p",{className:"info"},a.a.createElement("span",null,"".concat(v(ue.getState(),{date:h.customTimeCreated||h.timeCreated}).halfDate," "),v(ue.getState(),{date:h.customTimeCreated||h.timeCreated}).halfTime),a.a.createElement("span",null," By: ".concat(g.teamName||g.aliasName||g.username)),!f&&a.a.createElement(Lc,null),f&&a.a.createElement(Dc,null))),f&&h.image&&h.image.thumbFileName&&a.a.createElement(Aa,{image:"/upload/images/".concat(h.image.thumbFileName),fullImage:"/upload/images/".concat(h.image.fileName),altText:"pic",width:h.image.thumbWidth,height:h.image.thumbHeight,fullWidth:h.image.width,fullHeight:h.image.height}),f&&a.a.createElement("div",{className:"text"},h.text.slice(1).map((function(e,t){return a.a.createElement("p",{key:t},e)}))))}),Wc=a.a.memo(Mc);Mc.defaultProps={classNames:[],expand:!1};n(77);var Fc=function(e){var t=e.messageId,n=Object(r.useRef)(null),o=Object(c.d)(To);return a.a.createElement(Ne,{observe:"upper",ref:n,classNames:["NewsList"]},0===o.length&&[a.a.createElement(an,{key:"noNews"},a.a.createElement("p",null,"There are no news"))],Object(q.a)(o).filter((function(e){return e.points&&e.points>0})).sort((function(e,t){var n=e.points,r=t.points;return n>r?-1:n<r?1:0})).slice(0,3).map((function(e){return a.a.createElement(Wc,{key:"top-".concat(e.objectId),messageId:e.objectId,classNames:["topNews"]})})).concat(Object(q.a)(o).map((function(e){return a.a.createElement(Wc,{expand:e.objectId===t,key:e.objectId,messageId:e.objectId})}))))},Gc=a.a.memo(Fc);Fc.defaultProps={messageId:void 0};n(78);var Hc=function(e){var t=e.id,n=e.messageId,o=e.index,i=Object(c.d)((function(e){return ra(e,{id:h(e)})})),l=Object(r.useCallback)((function(){ue.dispatch(fn({windows:[{id:t,value:{type:ie.NEWS,messageId:n}}]}))}),[n]),s=Object(r.useCallback)((function(){return ue.dispatch(pn({id:t}))}),[t]),u=Object(r.useCallback)((function(){return ue.dispatch(fn({windows:[{id:ie.DIALOGCREATENEWS,value:{type:ie.DIALOGCREATENEWS}}]}))}),[]);return a.a.createElement(Sr,{index:o,done:s,classNames:["News"],title:"News",onClick:l,menu:a.a.createElement(a.a.Fragment,null,i&&a.a.createElement(Bo,null,a.a.createElement(an,{stopPropagation:!0,key:"createNews",onClick:u},"New article")))},a.a.createElement(Gc,{messageId:n}))},Bc=a.a.memo(Hc);Hc.defaultProps={messageId:void 0};var Vc=a.a.memo((function(e){var t=e.id,n=e.index,o=Object(Fr.b)(),i=Object(r.useState)(),s=Object(l.a)(i,2),u=s[0];s[1];return a.a.createElement(zo,{index:n,classNames:["CreateNewsDialog"],onClick:function(){ue.dispatch(fn({windows:[{id:t,value:{type:ie.DIALOGCREATENEWS}}]}))},done:function(){return ue.dispatch(pn({id:t}))},error:u,title:"New news article"},a.a.createElement(Fr.a,o,a.a.createElement("form",{onSubmit:o.handleSubmit((function(e){var n=e.title,r=e.text,a=e.image;Ua({title:n,text:r,image:a}).then((function(e){var n=e.message;Object(c.b)((function(){ue.dispatch(fn({windows:[{id:ie.NEWS,value:{type:ie.NEWS,messageId:n.objectId}}]})),ue.dispatch(pn({id:t}))}))})).catch((function(e){return console.log(e)}))}))},a.a.createElement("div",{className:"identity"},a.a.createElement("span",null,"You are:"),a.a.createElement($a,null)),a.a.createElement(Br,{required:!0,maxLength:150,name:"title",placeholder:"Title"}),a.a.createElement(Ba,null),a.a.createElement(nc,{required:!0,maxLength:550,name:"text",placeholder:"Text"}),a.a.createElement("div",{className:"buttons"},a.a.createElement(k,{type:"submit",onClick:function(){}},"Create")))))}));function Uc(){return(Uc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var zc=a.a.createElement("rect",{x:3,y:11,width:18,height:11,rx:2,ry:2}),Yc=a.a.createElement("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"}),Jc=function(e){var t=e.svgRef,n=e.title,r=qc(e,["svgRef","title"]);return a.a.createElement("svg",Uc({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-unlock",ref:t},r),n?a.a.createElement("title",null,n):null,zc,Yc)},Kc=a.a.forwardRef((function(e,t){return a.a.createElement(Jc,Uc({svgRef:t},e))})),Qc=(n.p,a.a.memo((function(e){var t=e.roomId,n=e.id,o=e.index,i=Object(r.useState)(),s=Object(l.a)(i,2),u=s[0],d=s[1],m=Object(c.d)((function(e){return ra(e,{id:t})})),f=Object(c.d)(Kt),p=Object(Fr.b)(),h=oe({objectToAccess:m,toAuth:f}).hasAccess;return a.a.createElement(zo,{error:u,index:o,classNames:["JoinRoomDialog"],onClick:function(){ue.dispatch(fn({windows:[{id:n,value:{type:ie.DIALOGJOINROOM,roomId:t}}]}))},done:function(){return ue.dispatch(pn({id:n}))},title:h?"Join room ".concat(m.roomName):"Unlock room ".concat(m.roomName)},a.a.createElement(Fr.a,p,a.a.createElement("form",{onSubmit:p.handleSubmit((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.password;Ko({roomId:t,password:r}).then((function(){Object(c.b)((function(){ue.dispatch(fn({windows:[{id:ie.CHAT,value:{type:ie.CHAT,roomId:t}}]})),ue.dispatch(pn({id:n}))}))})).catch((function(e){var t=Object(U.a)({},e);console.log(e),"not allowed"===e.type&&(t.message="Incorrect password"),d(t)}))}))},a.a.createElement("div",{className:"identity"},a.a.createElement("span",null,"You are: "),a.a.createElement($a,null)),a.a.createElement("div",null,h&&a.a.createElement("p",null,"Do you want to join room ".concat(m.roomName,"?")),h&&m.topic&&a.a.createElement("p",null,"Topic: ".concat(m.topic)),!h&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"The room is locked."),a.a.createElement("p",null,"Enter the password to continue:"))),!h&&a.a.createElement(Br,{required:!h,minLength:4,maxLength:100,name:"password",type:"password",placeholder:"Password"}),a.a.createElement("div",{className:"buttons"},a.a.createElement(k,{stopPropagation:!0,type:"button",onClick:function(){return ue.dispatch(pn({id:n}))}},h?"No":"Cancel"),a.a.createElement(k,{stopPropagation:!0,type:"submit",onClick:function(){}},!h&&a.a.createElement(Kc,null),a.a.createElement("span",null,h?"Join":"Unlock"))))))}))),Xc=a.a.memo((function(){var e=Object(c.d)(rr),t=[];return e.forEach((function(e,n){var r=e.type;r===ie.CHAT?t.push(a.a.createElement(Uo,{key:n,id:n,roomId:e.roomId,index:e.index})):r===ie.WALLET?t.push(a.a.createElement(Kr,{key:n,id:n,index:e.index})):r===ie.WORLDMAP?t.push(a.a.createElement(ta,{key:n,id:n,index:e.index})):r===ie.DOCFILE?t.push(a.a.createElement(hc,{key:n,id:n,docFileId:e.docFileId,index:e.index})):r===ie.NEWS?t.push(a.a.createElement(Bc,{key:n,id:n,messageId:e.messageId,index:e.index})):r===ie.DIALOGIDENTITY?t.push(a.a.createElement(Yo,{key:n,id:n,identityId:e.identityId,index:e.index})):r===ie.DIALOGCREATEROOM?t.push(a.a.createElement(Xo,{key:n,id:n,index:e.index})):r===ie.DIALOGLOGIN?t.push(a.a.createElement($o,{key:n,id:n,index:e.index})):r===ie.DIALOGREGISTER?t.push(a.a.createElement(ac,{key:n,id:n,index:e.index})):r===ie.DIALOGREMOVEROOM?t.push(a.a.createElement(Zo,{key:n,id:n,roomId:e.roomId,index:e.index})):r===ie.DIALOGCREATEALIAS?t.push(a.a.createElement(cc,{key:n,id:n,index:e.index})):r===ie.DIALOGCREATETRANSACTION?t.push(a.a.createElement(lc,{key:n,id:n,toWalletId:e.toWalletId,index:e.index})):r===ie.DIALOGCREATEDOCFILE?t.push(a.a.createElement(gc,{key:n,id:n,index:e.index})):r===ie.DIALOGCREATENEWS?t.push(a.a.createElement(Vc,{key:n,id:n,index:e.index})):r===ie.DIALOGJOINROOM&&t.push(a.a.createElement(Qc,{key:n,id:n,roomId:e.roomId,index:e.index}))})),a.a.createElement("div",{id:"MainWindow"},a.a.createElement(kc,null),t)}));var Zc=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(a.a.StrictMode,null,a.a.createElement(ir,null),a.a.createElement(or,null),a.a.createElement(Xc,null)))},$c=(n(79),n(80));Object(i.a)(),$c.ElementQueries.listen(),Object(o.render)(a.a.createElement(c.a,{store:ue},a.a.createElement(Zc,null)),document.getElementById("root"))}]),[[31,1,2]]]);
//# sourceMappingURL=main.99f286e0.chunk.js.map