(this.webpackJsonproleterminal=this.webpackJsonproleterminal||[]).push([[0],Array(31).concat([function(e,t,n){e.exports=n(79)},,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(14),c=n(1),i=n(29),l=n(3),s=function(e){return e>9?"".concat(e):"0".concat(e)},u=function(e){return e.config.get("requireOffName")},d=function(e){return e.config.get("publicRoomId")},m=function(e){return e.config.get("allowedImages")},f=function(e){return e.config.get("gpsTracking")},p=function(e){return e.config.get("permissions")},h=function(e){return e.config.get("newsRoomId")},v=function(e,t){var n=t.date,r=t.offset,a=t.lockDate,o=new Date(n),c={},i=e.config,l=i.yearModification,u=i.dayModification;return r&&o.setHours(o.getHours()+r),a||Number.isNaN(l)||(l&&!Number.isNaN(l)&&o.setFullYear(o.getFullYear()+parseInt(l,10)),u&&!Number.isNaN(u)&&o.setDate(o.getDate()+parseInt(u,10))),c.mins=s(o.getMinutes()),c.hours=s(o.getHours()),c.seconds=s(o.getSeconds()),c.month=s(o.getMonth()+1),c.day=s(o.getDate()),c.year=o.getFullYear(),c.halfTime="".concat(c.hours,":").concat(c.mins),c.fullTime="".concat(c.halfTime,":").concat(c.seconds),c.halfDate="".concat(c.day,"/").concat(c.month),c.fullDate="".concat(c.halfDate,"/").concat(c.year),c.fullStamp="".concat(c.halfTime," ").concat(c.fullDate),c};function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var b=a.a.createElement("circle",{cx:12,cy:12,r:10}),E=a.a.createElement("polyline",{points:"12 6 12 12 16 14"}),w=function(e){var t=e.svgRef,n=e.title,r=y(e,["svgRef","title"]);return a.a.createElement("svg",g({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-clock",ref:t},r),n?a.a.createElement("title",null,n):null,b,E)},O=a.a.forwardRef((function(e,t){return a.a.createElement(w,g({svgRef:t},e))})),j=(n.p,n(9)),k=(n(41),a.a.forwardRef((function(e,t){var n=e.onClick,r=e.children,o=e.disabled,c=e.stopPropagation,i=e.classNames,l=void 0===i?[""]:i,s=e.type,u=void 0===s?"button":s;return a.a.createElement("button",{ref:t,className:"".concat(["Button"].concat(l).join(" ")),disabled:o,type:u,onClick:function(e){console.log("click"),n(e),c&&e.stopPropagation()}},r)}))),I=a.a.memo(k);k.propTypes={onClick:j.func.isRequired,children:j.node.isRequired,type:Object(j.oneOf)(["button","submit"]),disabled:j.bool,classNames:Object(j.arrayOf)(j.string),stopPropagation:j.bool},k.defaultProps={type:"button",disabled:void 0,classNames:[],stopPropagation:void 0};var x=n(12),N=n(27),C="aliases",S="devices",R="docFiles",P="forums",T="forumPosts",L="forumThreads",A="gameCodes",F="invitations",M="messages",W="rooms",D="simpleMsgs",B="teams",H="transactions",V="users",U="wallets",q=n(6),z=n(4),Y="update",J="create",G="remove",K=function(e,t){var n=new Map(Object(z.a)(e)),r=t.type,a=t.payload,o=a.changeType,c=a[r];switch(o){case J:return n.set(c.objectId,c),n;case Y:var i=n.get(c.objectId)||{},l=Object(q.a)(Object(q.a)({},i),c);return i===l?e:(n.set(c.objectId,l),n);case G:return n.has(c.objectId)?(n.delete(c.objectId),n):e;default:return e}},Q=function(e,t){var n=t.type,r=t.payload,a=r.reset,o=r.changeType,c=a?new Map:new Map(Object(z.a)(e)),i=r[n];switch(o){case J:return i.forEach((function(e){return c.set(e.objectId,e)})),c;case Y:return i.forEach((function(e){var t=c.get(e.objectId)||{},n=Object(q.a)(Object(q.a)({},t),e);t!==n&&c.set(e.objectId,n)})),c;case G:return i.forEach((function(e){return c.delete(e.objectId)})),c;default:return e}};var X="chat",Z="whisper",$="news";var _="online",ee="offline",te="reconnecting";var ne=0,re=1,ae=4,oe=function(e){var t=e.objectToAccess,n=e.toAuth;if(!t||!n)return{canSee:!1,hasFullAccess:!1,hasAccess:!1};var r=t.ownerId,a=t.ownerAliasId,o=t.teamId,c=t.isPublic,i=t.visibility,l=t.teamIds,s=void 0===l?[]:l,u=t.userIds,d=void 0===u?[]:u,m=t.userAdminIds,f=void 0===m?[]:m,p=t.teamAdminIds,h=void 0===p?[]:p,v=n.hasFullAccess,g=n.partOfTeams,y=void 0===g?[]:g,b=n.accessLevel,E=void 0===b?ne:b,w=n.objectId,O=n.teamIds,j=void 0===O?[]:O,k=n.aliases,I=void 0===k?[]:k,x=a&&I.includes(a),N=o&&y.includes(o),C=d.concat([r]).includes(w),S=N||s.find((function(e){return j.includes(e)})),R=x||I.find((function(e){return d.includes(e)})),P=f.includes(w),T=x||I.find((function(e){return f.includes(e)})),L=N||h.find((function(e){return j.includes(e)})),A=r===w||v||E>=ae;return{canSee:A||c||C||S||R||E>=i,hasAccess:A||c||C||S||R,hasFullAccess:A||P||L||T}},ce=new Map;ce.set("broadcastId","111111111111111111111116"),ce.set("publicRoomId","111111111111111111111110"),ce.set("newsRoomId","111111111111111111111114"),ce.set("defaultForum","111111111111111111111120"),ce.set("defaultLanguage","en"),ce.set("centerCoordinates",{longitude:0,latitude:0}),ce.set("cornerOneCoordinates",{longitude:0,latitude:0}),ce.set("cornerTwoCoordinates",{longitude:0,latitude:0}),ce.set("defaultZoomLevel",15),ce.set("yearModification",0),ce.set("dayModification",0),ce.set("requireOffName",!1),ce.set("activateTermination",!1),ce.set("allowedImages",{CHAT:!1,PROFILE:!1,DOCFILE:!1}),ce.set("permissions",{CreateAlias:{name:"CreateAlias",accessLevel:re},CreateUser:{name:"CreateUser",accessLevel:ne}}),ce.set("anonymousUser",{accessLevel:ne,followingRooms:[],objectId:"-1",isAnonymous:!0});var ie="wallet",le="chat",se="worldMap",ue="docFile",de="news",me="dialogIdentity",fe="dialogCreateRoom",pe="dialogRemoveRoom",he="dialogRegister",ve="dialogLogin",ge="dialogCreateAlias",ye="dialogCreateTransaction",be="dialogCreateDocFile",Ee="dialogCreateNews",we="dialogJoinRoom",Oe=new Map;var je=Object(x.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"user"===t.type?K(e,t):t.type===V?Q(e,t):e},aliases:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"alias"===t.type?K(e,t):t.type===C?Q(e,t):e},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"message"===t.type?K(e,t):t.type===M?Q(e,t):e},online:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;if("online"===t.type){var n=t.payload,r=n.online;return r}return e},rooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"room"===t.type?K(e,t):t.type===W?Q(e,t):e},userId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1",t=arguments.length>1?arguments[1]:void 0;if("userId"===t.type){var n=t.payload,r=n.reset,a=n.userId;return r?"-1":a}return e},positions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"position"===t.type?K(e,t):"positions"===t.type?Q(e,t):e},transactions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"transaction"===t.type?K(e,t):t.type===H?Q(e,t):e},wallets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"wallet"===t.type?K(e,t):t.type===U?Q(e,t):e},config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;if("config"===t.type){var n=t.payload,r=n.entries,a=new Map(Object(z.a)(e));return r.forEach((function(e){return a.set(e[0],e[1])})),a}return e},aliasId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;if("aliasId"===t.type){var n=t.payload,r=n.reset,a=n.aliasId;return r?null:a}return e},windowOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;if("windowOrder"===t.type){var n=t.payload,r=n.id,a=n.value,o=n.changeType,c=new Map(Object(z.a)(e));if(o===Y){if(c.size>0&&Object(z.a)(c.keys()).indexOf(r)===c.size-1){var i=c.get(r);if(Object.keys(a).length===Object.keys(i).length&&Object.keys(a).every((function(e){return i[e]===a[e]})))return e}var s=Object(q.a)({},a);if(c.get(r)){var u=Object(z.a)(c.entries()).sort((function(e,t){var n=e[1].index,r=t[1].index;return n>r?1:n<r?-1:0})),d=u.splice(u.findIndex((function(e){return Object(l.a)(e,1)[0]===r})),1),m=Object(l.a)(d,1),f=m[0];f[1]=Object(q.a)({},s),u.push(f),u.forEach((function(e,t){var n=Object(l.a)(e,2),r=n[0],a=n[1],o=Object(q.a)(Object(q.a)({},a),{},{index:t+1});c.set(r,o)}))}else s.index=c.size+1,c.set(r,s);return c}return o===G?(console.log(r),c.delete(r),c):e}if("windowOrders"===t.type){var p=t.payload,h=p.windows,v=new Map(Object(z.a)(e));return h.forEach((function(e){var t=e.id,n=e.value;return v.set(t,n)})),v}return e},teams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"team"===t.type?K(e,t):t.type===B?Q(e,t):e},docFiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"docFile"===t.type?K(e,t):t.type===R?Q(e,t):e}}),ke=Object(x.d)(je,Object(x.a)(N.a)),Ie=a.a.memo((function(){var e=Object(r.useState)(new Date),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(!1),i=Object(l.a)(c,2),s=i[0],u=i[1],d=v(ke.getState(),{date:n});Object(r.useEffect)((function(){!function e(){setTimeout((function(){o(new Date),e()}),1e3)}()}),[]);var m=Object(r.useCallback)((function(){return u(!s)}),[s]);return a.a.createElement("div",{key:"clock",className:"Clock"},a.a.createElement(I,{onClick:m,classNames:["".concat(s?"hide":"")]},a.a.createElement(O,null)),a.a.createElement(I,{onClick:m,classNames:["".concat(s?"":"hide")]},d.halfTime))}));function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ne(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ce=a.a.createElement("circle",{cx:12,cy:12,r:10}),Se=a.a.createElement("polyline",{points:"16 12 12 8 8 12"}),Re=a.a.createElement("line",{x1:12,y1:16,x2:12,y2:8}),Pe=function(e){var t=e.svgRef,n=e.title,r=Ne(e,["svgRef","title"]);return a.a.createElement("svg",xe({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-up-circle",ref:t},r),n?a.a.createElement("title",null,n):null,Ce,Se,Re)},Te=a.a.forwardRef((function(e,t){return a.a.createElement(Pe,xe({svgRef:t},e))}));n.p;function Le(){return(Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ae(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Fe=a.a.createElement("circle",{cx:12,cy:12,r:10}),Me=a.a.createElement("polyline",{points:"8 12 12 16 16 12"}),We=a.a.createElement("line",{x1:12,y1:8,x2:12,y2:16}),De=function(e){var t=e.svgRef,n=e.title,r=Ae(e,["svgRef","title"]);return a.a.createElement("svg",Le({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-down-circle",ref:t},r),n?a.a.createElement("title",null,n):null,Fe,Me,We)},Be=a.a.forwardRef((function(e,t){return a.a.createElement(De,Le({svgRef:t},e))})),He=(n.p,n(42),a.a.forwardRef((function(e,t){var n=e.children,o=e.title,c=e.scrollTo,i=e.observe,s=e.alwaysExpanded,u=void 0!==s&&s,d=e.checkWidth,m=void 0!==d&&d,f=e.dropdown,p=void 0!==f&&f,h=e.classNames,v=void 0===h?[]:h,g=Object(r.useRef)(),y=Object(r.useRef)(!1),b=Object(r.useRef)(null),E=Object(r.useRef)(null),w=Object(r.useState)(!u&&"undefined"!==typeof o),O=Object(l.a)(w,2),j=O[0],k=O[1],x=[],N=["List"].concat(v),C=function(e){p&&b.current&&(!m||!E.current||E.current.offsetWidth<600)&&(e.target!==b.current&&b.current.parentElement.contains(e.target)||k(!0))},S=function(){c&&y.current&&b.current&&!j&&("bottom"===c.direction&&b.current.lastElementChild?(console.log("should scroll to bottom"),b.current.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"})):"top"===c.direction&&b.current.firstElementChild&&(b.current.firstElementChild.scrollIntoView({behavior:"smooth",block:"start"}),console.log("should scroll to top")))};return Object(r.useEffect)((function(){S(),y.current=!0}),[n]),Object(r.useEffect)((function(){c&&!c.skipFirstRender&&b.current&&!j&&("bottom"===c.direction&&b.current.lastElementChild?(b.current.lastElementChild.scrollIntoView({behavior:"auto",block:"end"}),console.log("should scroll to bottom")):"top"===c.direction&&b.current.firstElementChild&&(b.current.firstElementChild.scrollIntoView({behavior:"auto",block:"start"}),console.log("should scroll to top")))}),[]),Object(r.useEffect)((function(){var e;return b.current&&i&&(e=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?(console.log("hiding"),g.current.classList.add("hide")):(console.log("showing"),g.current.classList.remove("hide"))}))}),{root:b.current,rootMargin:"50px",threshold:1}),"upper"===i&&b.current.firstElementChild&&e.observe(b.current.firstElementChild),"lower"===i&&b.current.lastElementChild&&e.observe(b.current.lastElementChild)),function(){e&&e.disconnect()}}),[]),Object(r.useEffect)((function(){p&&(j?document.removeEventListener("mousedown",C,!1):document.addEventListener("mousedown",C,!1))}),[j]),j?x.push("hide"):N.push("expanded"),p&&x.push("dropdown"),a.a.createElement("div",{key:"List",className:N.join(" ")},o&&a.a.createElement("header",{role:"button",tabIndex:0,key:"listHeader",className:"toggle ".concat(u?"":"clickable"),onClick:function(){u||k(!j)}},o),i&&"upper"===i&&a.a.createElement(I,{key:"upper",classNames:["upper"],ref:g,onClick:function(){return S()}},a.a.createElement(Te,null)),a.a.createElement("ul",{ref:function(e){b.current=e,t&&(t.current=e),e&&(E.current=e.closest(".Window"))},key:"listElem",className:"".concat(x.join(" ")),onClick:function(e){p&&(C(e),e.stopPropagation())}},n),i&&"lower"===i&&a.a.createElement(I,{key:"lower",classNames:["lower"],ref:g,onClick:function(){return S()}},a.a.createElement(Be,null)))}))),Ve=a.a.memo(He,(function(e,t){var n=e.children,r=t.children;return!!(Array.isArray(n)&&Array.isArray(r)&&r.every((function(e,t){return n[t]&&n[t].key===e.key})))}));He.defaultProps={classNames:[],children:void 0,title:void 0,dropdown:!1,scrollTo:void 0,checkWidth:!1,alwaysExpanded:!1,observe:void 0};var Ue=n(2),qe=n.n(Ue),ze=n(5),Ye="deviceId",Je="token",Ge="userId",Ke="aliasId",Qe=function(e,t){"string"===typeof t?localStorage.setItem(e,t):localStorage.setItem(e,function(e){return JSON.stringify(e)}(t))},Xe=function(e){return localStorage.getItem(e)},Ze=function(e){return localStorage.removeItem(e)},$e=function(){return Ze(Ke)},_e=function(){Ze(Je),Ze(Ge),$e()},et=function(){return Xe(Ye)},tt=function(){return Xe(Je)},nt=function(e){var t=e.userId,n=e.token;return Qe(Je,n),function(e){Qe(Ge,e)}(t),{type:"userId",payload:{userId:t}}},rt=function(){return _e(),function(e){Object(c.b)((function(){e({type:"userId",payload:{reset:!0}}),e({type:"aliasId",payload:{reset:!0}})}))}},at=function(e){return e.online===_},ot=function(){return{type:"online",payload:{online:_}}},ct=function(e){return e.aliasId},it=function(e){return e.userId},lt=function(e){return ct(e)||it(e)},st=function(e){var t=e.messages;return 1===t.length?{type:"message",payload:{changeType:J,message:t[0]}}:{type:M,payload:{messages:t,changeType:J}}},ut="chatMsg",dt="whisper",mt=function(e){var t=e.wallets;return 1===t.length?{type:"wallet",payload:{wallet:t[0],changeType:Y}}:{type:U,payload:{wallets:t,changeType:Y}}},ft=function(e){var t=e.wallets;return 1===t.length?{type:"wallet",payload:{wallet:t[0],changeType:J}}:{type:U,payload:{wallets:t,changeType:J}}},pt=function(e){var t=e.forums;return 1===t.length?{type:"forum",payload:{forum:t[0],changeType:J}}:{type:P,payload:{forums:t,changeType:J}}},ht=function(e){var t=e.gameCodes;return 1===t.length?{type:"gameCode",payload:{gameCode:t[0],changeType:J}}:{type:A,payload:{gameCodes:t,changeType:J}}},vt=function(e){var t=e.users;return 1===t.length?{type:"user",payload:{user:t[0],changeType:Y}}:{type:V,payload:{users:t,changeType:Y}}},gt=function(e){var t=e.users;return 1===t.length?{type:"user",payload:{user:t[0],changeType:J}}:{type:V,payload:{users:t,changeType:J}}},yt=function(e){var t=e.user,n=e.wallet,r=e.room,a=e.forum,o=e.gameCode;return function(){var e=Object(ze.a)(qe.a.mark((function e(i){return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){i(gt({users:[t]})),i(bt({rooms:[r]})),i(ft({wallets:[n]})),i(pt({forums:[a]})),i(ht({gameCodes:[o]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},bt=function(e){var t=e.rooms;return 1===t.length?{type:"room",payload:{changeType:J,room:t[0]}}:{type:W,payload:{rooms:t,changeType:J}}},Et=function(e){var t=e.rooms;return 1===t.length?{type:"room",payload:{changeType:Y,room:t[0]}}:{type:W,payload:{rooms:t,changeType:J}}},wt=function(e){var t=e.rooms;return 1===t.length?{type:"room",payload:{changeType:G,room:t[0]}}:{type:W,payload:{rooms:t,changeType:G}}},Ot=function(e){var t=e.room,n=e.user;return function(e){Object(c.b)((function(){e(Et({rooms:[t]})),e(vt({users:[n]}))}))}},jt="room",kt="followRoom",It="user",xt=function(e){var t=e.aliasId;return t?(Qe(Ke,t),{type:"aliasId",payload:{aliasId:t}}):($e(),{type:"aliasId",payload:{reset:!0}})},Nt=function(e){var t=e.aliases;return 1===t.length?{type:"alias",payload:{alias:t[0],changeType:J}}:{type:C,payload:{aliases:t,changeType:J}}},Ct=function(e){var t=e.alias,n=e.wallet,r=e.room;return function(){var e=Object(ze.a)(qe.a.mark((function e(a){return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){a(Nt({aliases:[t]})),a(bt({rooms:[r]})),a(ft({wallets:[n]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},St="alias",Rt="wallet",Pt=function(e){var t=e.transaction,n=e.wallet;return function(e){Object(c.b)((function(){e(function(e){var t=e.transactions;return 1===t.length?{type:"transaction",payload:{transaction:t[0],changeType:J}}:{type:H,payload:{transactions:t,changeType:J}}}({transactions:[t]})),e(mt({wallets:[n]}))}))}},Tt="transaction",Lt=function(e){var t=e.docFiles;return 1===t.length?{type:"docFile",payload:{docFile:t[0],changeType:J}}:{type:R,payload:{docFiles:t,changeType:J}}},At="docFile",Ft=function(){var e="undefined"!==typeof ioUri?ioUri:"/";return window.io(e,{forceNew:!0})}(),Mt="createAlias",Wt="createUser",Dt="sendMessage",Bt="createRoom",Ht="createDocFile",Vt="createTransaction",Ut="followRoom",qt="getMessagesByRoom",zt="removeRoom",Yt={ALIASES:"getAliases",USERS:"getUsers",MESSAGES:"getMessages",ROOMS:"getRooms",INVITATIONS:"getInvitations",DOCFILES:"getDocFiles",FORUMS:"getForums",FORUMPOSTS:"getForumPosts",FORUMTHREADS:"getForumThreads",GAMECODES:"getGameCodes",SIMPLEMSGS:"getSimpleMsgs",TEAMS:"getTeams",TRANSACTIONS:"getTransactions",WALLETS:"getWallets",DEVICES:"getDevices"},Jt="login",Gt="reconnect",Kt="startup",Qt="disconnect",Xt=function(){var e=Object(ze.a)(qe.a.mark((function e(t){var n,r;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.event,r=t.callback,Ft.on(n,(function(e){console.log(n,e),r(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zt=function(){ke.getState().online!==te&&(Ft.disconnect(),Ft.connect())},$t=function(){var e=Object(ze.a)(qe.a.mark((function e(t){var n,r=arguments;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",new Promise((function(e,r){var a=n;a.token=tt(),at(ke.getState())||Zt(),Ft.emit(t,a,(function(t){var n=t.error,a=t.data;n?r(n):e(a)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Xt({event:Gt,callback:function(){it(ke.getState)&&$t("updateId",{}).then((function(){ke.dispatch(ot())})).catch((function(e){console.log(e),ke.dispatch(rt())}))}}),Xt({event:Kt,callback:function(e){var t,n=e.data,r=Xe(Ge),a=tt(),o=Xe(Ke);r&&a&&ke.dispatch(nt({userId:r,token:a})),o&&ke.dispatch(xt({aliasId:o})),et()||Qe(Ye,"1234567890123456"),ke.dispatch((t=n,function(e){Object(c.b)((function(){e({type:"config",payload:{entries:Object.entries(t)}}),e(ot())}))})),(r||a)&&$t("updateId",{}).then((function(){ke.dispatch(ot())})).catch((function(e){console.log(e),ke.dispatch(rt())}))}}),Xt({event:Qt,callback:function(){ke.dispatch({type:"online",payload:{online:ee}}),Zt()}}),Xt({event:ut,callback:function(e){var t=e.data,n=e.error;if(t&&t.message){var r=t.message;t.changeType===J&&ke.dispatch(st({messages:[r]}))}else console.log(ut,n,t)}}),Xt({event:dt,callback:function(e){var t=e.data,n=e.error;if(t&&t.message){var r=t.message;t.changeType===J&&ke.dispatch(st({messages:[r]}))}else console.log(dt,n,t)}}),Xt({event:jt,callback:function(e){var t=e.error,n=e.data;if(n&&n.room){var r=n.room,a=n.changeType;a===J?ke.dispatch(bt({rooms:[r]})):a===Y?ke.dispatch(Et({rooms:[r]})):a===G&&ke.dispatch(wt({rooms:[r]}))}else console.log(jt,t,n)}}),Xt({event:kt,callback:function(e){var t=e.error,n=e.data;n&&n.room&&n.user?ke.dispatch(function(){var e=Object(ze.a)(qe.a.mark((function e(t){return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){t(Et({rooms:[n.room]})),t(vt({users:[n.user]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):console.log(kt,t,n)}}),Xt({event:It,callback:function(e){var t=e.error,n=e.data;if(n&&n.user){var r=n.user,a=n.changeType;a===J?ke.dispatch(gt({users:[r]})):a===Y&&ke.dispatch(vt({users:[r]}))}else console.log(It,t,n)}}),Xt({event:St,callback:function(e){var t=e.error,n=e.data;if(n&&n.alias){var r=n.alias,a=n.changeType;a===J?ke.dispatch(Nt({aliases:[r]})):a===Y&&ke.dispatch(function(e){var t=e.aliases;return 1===t.length?{type:"alias",payload:{alias:t[0],changeType:Y}}:{type:C,payload:{aliases:t,changeType:Y}}}({aliases:[r]}))}else console.log(St,t,n)}}),Xt({event:Rt,callback:function(e){var t=e.error,n=e.data;if(n&&n.wallet){var r=n.wallet,a=n.changeType;a===J?ke.dispatch(ft({wallets:[r]})):a===Y&&ke.dispatch(mt({wallets:[r]}))}else console.log(Rt,t,n)}}),Xt({event:Tt,callback:function(e){var t=e.error,n=e.data;if(n&&n.transaction&&(n.changeType===Y||n.wallet)){var r=n.transaction,a=n.changeType;a===J?ke.dispatch(Pt(n)):a===Y&&ke.dispatch(function(e){var t=e.transactions;return 1===t.length?{type:"transaction",payload:{transaction:t[0],changeType:Y}}:{type:H,payload:{transactions:t,changeType:Y}}}({transactions:[r]}))}else console.log(Tt,t,n)}}),Xt({event:At,callback:function(e){var t=e.error,n=e.data;if(n&&n.docFile){var r=n.docFile,a=n.changeType;a===J?ke.dispatch(Lt({docFiles:[r]})):a===Y&&ke.dispatch(function(e){var t=e.docFiles;return 1===t.length?{type:"docFile",payload:{docFile:t[0],changeType:Y}}:{type:R,payload:{docFiles:t,changeType:Y}}}({docFiles:[r]}))}else console.log(At,t,n)}});var _t=function(){var e=Object(ze.a)(qe.a.mark((function e(t,n){var r,a,o;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$t(Jt,{user:{username:t,password:n}});case 2:return r=e.sent,a=r.user,o=r.token,ke.dispatch(nt({userId:a.objectId,token:o})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),en=function(){var e=Object(ze.a)(qe.a.mark((function e(){return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ke.dispatch(rt());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tn=n(13),nn=n(8),rn=n.n(nn),an=function(e){return e.aliases},on=function(e,t){var n=t.id;return e.aliases.get(n)},cn=function(e){return e.users},ln=function(e,t){var n=t.id;return e.users.get(n)},sn=function(e){return e.users.get(it(e))||function(e){return e.config.get("anonymousUser")}(e)},un=Object(tn.createSelector)([sn],(function(e){return e.accessLevel})),dn=rn()([cn,an],(function(e,t){return[].concat(Object(z.a)(e.values()),Object(z.a)(t.values()))}))((function(){return"identities"})),mn=rn()([cn,an,function(e,t){return t.ids}],(function(e,t,n){var r=new Map;return n.forEach((function(n){return r.set(n,e.get(n)||t.get(n))})),r}))((function(e,t){var n=t.ids;return"identities-".concat(n.join(" "))})),fn=rn()([cn,an,function(e){return e.teams},function(e,t){return t.ids}],(function(e,t,n,r){var a=new Map;return r.forEach((function(r){return a.set(r,n.get(r)||e.get(r)||t.get(r))})),a}))((function(e,t){var n=t.ids;return"identities-teams-".concat(n.join(" "))})),pn=Object(tn.createSelector)([ln,on],(function(e,t){return e||t})),hn=Object(tn.createSelector)([ln,on,function(e,t){var n=t.id;return e.teams.get(n)}],(function(e,t,n){return n||t||e})),vn=rn()([dn,it],(function(e,t){return e.filter((function(e){return e.objectId!==t&&e.ownerId!==t&&!e.userIds.includes(t)})).map((function(e){return e.objectId}))}))((function(){return"other-identity-ids"})),gn=rn()([dn,it],(function(e,t){return e.filter((function(e){return e.objectId===t||e.ownerId===t||e.userIds.includes(t)}))}))((function(){return"current-identities"})),yn=(n(44),a.a.forwardRef((function(e,t){var n=e.children,r=e.onClick,o=e.elementId,c=e.stopPropagation,i=void 0!==c&&c,l=e.classNames,s=void 0===l?[]:l;return a.a.createElement("li",{ref:t,id:o,className:["ListItem","".concat(r?"clickable":"")].concat(s).join(" "),onClick:function(e){r&&r(e),"UL"===e.target.parentElement.tagName&&e.target.parentElement.click(),i&&e.stopPropagation()}},n)}))),bn=a.a.memo(yn);function En(){return(En=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}yn.propTypes={children:j.node,onClick:j.func,classNames:Object(j.arrayOf)(j.string),stopPropagation:j.bool,elementId:j.string},yn.defaultProps={onClick:void 0,classNames:[],stopPropagation:!1,elementId:void 0,children:void 0};var On=a.a.createElement("line",{x1:3,y1:12,x2:21,y2:12}),jn=a.a.createElement("line",{x1:3,y1:6,x2:21,y2:6}),kn=a.a.createElement("line",{x1:3,y1:18,x2:21,y2:18}),In=function(e){var t=e.svgRef,n=e.title,r=wn(e,["svgRef","title"]);return a.a.createElement("svg",En({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-menu",ref:t},r),n?a.a.createElement("title",null,n):null,On,jn,kn)},xn=a.a.forwardRef((function(e,t){return a.a.createElement(In,En({svgRef:t},e))})),Nn=(n.p,function(e){var t=e.windows;if(1===t.length){var n=Object(l.a)(t,1)[0],r=n.value;return{type:"windowOrder",payload:{id:n.id,value:r,changeType:Y}}}return{type:"windowOrders",payload:{windows:t,changeType:Y}}}),Cn=function(e){return{type:"windowOrder",payload:{id:e.id,changeType:G}}},Sn=a.a.memo((function(){var e=Object(c.d)(un),t=Object(c.d)(p),n=[];return e===t.CreateUser.accessLevel&&n.push(a.a.createElement(bn,{stopPropagation:!0,key:"register",onClick:function(){return ke.dispatch(Nn({windows:[{id:he,value:{type:he}}]}))}},"Create user")),e===ne&&n.push(a.a.createElement(bn,{stopPropagation:!0,key:"login",onClick:function(){return ke.dispatch(Nn({windows:[{id:ve,value:{type:ve}}]}))}},"Login")),e>=t.CreateAlias.accessLevel&&n.push(a.a.createElement(bn,{stopPropagation:!0,key:"alias",onClick:function(){return ke.dispatch(Nn({windows:[{id:ge,value:{type:ge}}]}))}},"Create alias")),e>=re&&n.push(a.a.createElement(bn,{stopPropagation:!0,key:"logout",onClick:function(){en()}},"Logout")),a.a.createElement(Ve,{dropdown:!0,title:a.a.createElement(xn,null)},n)}));n(45);function Rn(){return(Rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Tn=a.a.createElement("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),Ln=function(e){var t=e.svgRef,n=e.title,r=Pn(e,["svgRef","title"]);return a.a.createElement("svg",Rn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-message-square",ref:t},r),n?a.a.createElement("title",null,n):null,Tn)},An=a.a.forwardRef((function(e,t){return a.a.createElement(Ln,Rn({svgRef:t},e))}));n.p;function Fn(){return(Fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Mn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Wn=a.a.createElement("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),Dn=a.a.createElement("line",{x1:8,y1:2,x2:8,y2:18}),Bn=a.a.createElement("line",{x1:16,y1:6,x2:16,y2:22}),Hn=function(e){var t=e.svgRef,n=e.title,r=Mn(e,["svgRef","title"]);return a.a.createElement("svg",Fn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-map",ref:t},r),n?a.a.createElement("title",null,n):null,Wn,Dn,Bn)},Vn=a.a.forwardRef((function(e,t){return a.a.createElement(Hn,Fn({svgRef:t},e))}));n.p;function Un(){return(Un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var zn=a.a.createElement("rect",{x:1,y:4,width:22,height:16,rx:2,ry:2}),Yn=a.a.createElement("line",{x1:1,y1:10,x2:23,y2:10}),Jn=function(e){var t=e.svgRef,n=e.title,r=qn(e,["svgRef","title"]);return a.a.createElement("svg",Un({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-credit-card",ref:t},r),n?a.a.createElement("title",null,n):null,zn,Yn)},Gn=a.a.forwardRef((function(e,t){return a.a.createElement(Jn,Un({svgRef:t},e))}));n.p;function Kn(){return(Kn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Xn=a.a.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),Zn=a.a.createElement("polyline",{points:"14 2 14 8 20 8"}),$n=a.a.createElement("line",{x1:16,y1:13,x2:8,y2:13}),_n=a.a.createElement("line",{x1:16,y1:17,x2:8,y2:17}),er=a.a.createElement("polyline",{points:"10 9 9 9 8 9"}),tr=function(e){var t=e.svgRef,n=e.title,r=Qn(e,["svgRef","title"]);return a.a.createElement("svg",Kn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-file-text",ref:t},r),n?a.a.createElement("title",null,n):null,Xn,Zn,$n,_n,er)},nr=a.a.forwardRef((function(e,t){return a.a.createElement(tr,Kn({svgRef:t},e))}));n.p;function rr(){return(rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ar(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var or=a.a.createElement("path",{d:"M4 11a9 9 0 0 1 9 9"}),cr=a.a.createElement("path",{d:"M4 4a16 16 0 0 1 16 16"}),ir=a.a.createElement("circle",{cx:5,cy:19,r:1}),lr=function(e){var t=e.svgRef,n=e.title,r=ar(e,["svgRef","title"]);return a.a.createElement("svg",rr({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-rss",ref:t},r),n?a.a.createElement("title",null,n):null,or,cr,ir)},sr=a.a.forwardRef((function(e,t){return a.a.createElement(lr,rr({svgRef:t},e))})),ur=(n.p,a.a.memo((function(){var e=Object(c.d)(un),t=function(e){var t=e.id,n=e.value;return ke.dispatch(Nn({windows:[{id:t,value:n}]}))};return a.a.createElement(Ve,{classNames:["OpenApps"]},a.a.createElement(bn,{key:"chat"},a.a.createElement(I,{onClick:function(){return t({id:le,value:{type:le}})}},a.a.createElement(An,null))),a.a.createElement(bn,{key:"news"},a.a.createElement(I,{onClick:function(){return t({id:de,value:{type:de}})}},a.a.createElement(sr,null))),a.a.createElement(bn,{key:"docFile"},a.a.createElement(I,{onClick:function(){return t({id:ue,value:{type:ue}})}},a.a.createElement(nr,null))),a.a.createElement(bn,{key:"map"},a.a.createElement(I,{onClick:function(){return t({id:se,value:{type:se}})}},a.a.createElement(Vn,null))),e>=re&&a.a.createElement(bn,{key:"wallet"},a.a.createElement(I,{onClick:function(){return t({id:ie,value:{type:ie}})}},a.a.createElement(Gn,null))))})));function dr(){return(dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var fr=a.a.createElement("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),pr=a.a.createElement("circle",{cx:12,cy:7,r:4}),hr=function(e){var t=e.svgRef,n=e.title,r=mr(e,["svgRef","title"]);return a.a.createElement("svg",dr({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-user",ref:t},r),n?a.a.createElement("title",null,n):null,fr,pr)},vr=a.a.forwardRef((function(e,t){return a.a.createElement(hr,dr({svgRef:t},e))})),gr=(n.p,n(46),function(e){var t=e.useIcon,n=void 0!==t&&t,r=Object(c.d)(gn),o=Object(c.d)(lt),i=r.find((function(e){return e.objectId===o})),l=i?i.aliasName||i.username:"---";return a.a.createElement(Ve,{dropdown:!0,classNames:["IdentityPicker"],title:n?a.a.createElement(vr,null):a.a.createElement(a.a.Fragment,null,a.a.createElement(vr,null),a.a.createElement("span",null,l))},(n?r:r.filter((function(e){return e.objectId!==o}))).map((function(e){return a.a.createElement(bn,{classNames:["".concat(e.objectId===o?"selected":"")],key:e.objectId,onClick:function(){return ke.dispatch(xt({aliasId:e.aliasName?e.objectId:void 0}))}},e.aliasName||e.username)})))}),yr=a.a.memo(gr);gr.defaultProps={useIcon:void 0};var br=a.a.memo((function(){var e=Object(c.d)(at),t=Object(c.d)(un),n=[],r=[];return e||r.push("warning"),a.a.createElement("div",{className:"".concat(r.join(" ")),id:"MenuBar"},a.a.createElement(Sn,null),a.a.createElement(ur,null),n,a.a.createElement("div",{className:"rightAligned"},t>=re&&a.a.createElement(yr,{useIcon:!0}),a.a.createElement(Ie,null)))})),Er=n(10),wr=function(){var e=Object(c.c)(),t=Object(c.d)(it);return Object(r.useEffect)((function(){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.reset;[{type:V,event:Yt.USERS},{type:C,event:Yt.ALIASES},{type:M,event:Yt.MESSAGES},{type:W,event:Yt.ROOMS},{type:F,event:Yt.INVITATIONS},{type:R,event:Yt.DOCFILES},{type:P,event:Yt.FORUMS},{type:T,event:Yt.FORUMPOSTS},{type:L,event:Yt.FORUMTHREADS},{type:A,event:Yt.GAMECODES},{type:D,event:Yt.SIMPLEMSGS},{type:B,event:Yt.TEAMS},{type:H,event:Yt.TRANSACTIONS},{type:U,event:Yt.WALLETS},{type:S,event:Yt.DEVICES}].forEach(function(){var t=Object(ze.a)(qe.a.mark((function t(r){var a,o;return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r.event,o=r.type,$t(a,{}).then((function(t){e({type:o,payload:Object(Er.a)({reset:n,changeType:J},o,t[o])})})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}({reset:!0})}),[t]),a.a.createElement(a.a.Fragment,null)},Or=n(30);n(51);function jr(){return(jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function kr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ir=a.a.createElement("polyline",{points:"15 3 21 3 21 9"}),xr=a.a.createElement("polyline",{points:"9 21 3 21 3 15"}),Nr=a.a.createElement("line",{x1:21,y1:3,x2:14,y2:10}),Cr=a.a.createElement("line",{x1:3,y1:21,x2:10,y2:14}),Sr=function(e){var t=e.svgRef,n=e.title,r=kr(e,["svgRef","title"]);return a.a.createElement("svg",jr({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-maximize-2",ref:t},r),n?a.a.createElement("title",null,n):null,Ir,xr,Nr,Cr)},Rr=a.a.forwardRef((function(e,t){return a.a.createElement(Sr,jr({svgRef:t},e))}));n.p;function Pr(){return(Pr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Lr=a.a.createElement("line",{x1:18,y1:6,x2:6,y2:18}),Ar=a.a.createElement("line",{x1:6,y1:6,x2:18,y2:18}),Fr=function(e){var t=e.svgRef,n=e.title,r=Tr(e,["svgRef","title"]);return a.a.createElement("svg",Pr({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-x",ref:t},r),n?a.a.createElement("title",null,n):null,Lr,Ar)},Mr=a.a.forwardRef((function(e,t){return a.a.createElement(Fr,Pr({svgRef:t},e))}));n.p;function Wr(){return(Wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Br=a.a.createElement("circle",{cx:12,cy:12,r:3}),Hr=a.a.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}),Vr=function(e){var t=e.svgRef,n=e.title,r=Dr(e,["svgRef","title"]);return a.a.createElement("svg",Wr({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-settings",ref:t},r),n?a.a.createElement("title",null,n):null,Br,Hr)},Ur=a.a.forwardRef((function(e,t){return a.a.createElement(Vr,Wr({svgRef:t},e))})),qr=(n.p,n(52),a.a.memo((function(e){var t=e.onDoubleClick,n=e.title,r=e.done;return a.a.createElement("div",{onDoubleClick:t,className:"TopBar"},a.a.createElement("div",{className:"TopBarHandle"},a.a.createElement("span",{className:"title"},n)),a.a.createElement("div",{className:"buttons"},a.a.createElement(I,{classNames:["settings"],stopPropagation:!0,type:"button",onClick:function(){}},a.a.createElement(Ur,null)),a.a.createElement(I,{type:"button",onClick:t},a.a.createElement(Rr,null)),a.a.createElement(I,{stopPropagation:!0,type:"button",onClick:r},a.a.createElement(Mr,null))))}))),zr=function(e){var t=e.onClick,n=e.children,o=e.menu,c=e.done,i=e.index,s=(e.type,e.title),u=void 0===s?"app":s,d=e.classNames,m=void 0===d?[]:d,f={width:640,height:480},p=Object(r.useState)(f),h=Object(l.a)(p,2),v=h[0],g=h[1],y=Object(r.useState)({x:0,y:0}),b=Object(l.a)(y,2),E=b[0],w=b[1],O=["Window"].concat(m),j=Object(r.useCallback)((function(){"100%"===v.width&&"100%"===v.height?g(f):(w({x:0,y:0}),g({width:"100%",height:"100%"}))}),[v,E]);return a.a.createElement(Or.a,{style:{zIndex:i},onClick:t,position:E,className:"rnd",size:v,minWidth:300,minHeight:200,maxHeight:"100%",maxWidth:"100%",bounds:"parent",dragHandleClassName:"TopBarHandle",enableResizing:{top:!0,topRight:!0,topLeft:!0,right:!0,bottom:!0,left:!0,bottomRight:!0,bottomLeft:!0},resizeHandleStyles:{top:{top:"0",width:"5px"},left:{left:"0",width:"5px"},right:{right:"0",width:"5px"},bottom:{bottom:"0",height:"5px"},bottomLeft:{bottom:"0",left:"0",width:"10px",height:"10px"},bottomRight:{bottom:"0",right:"0",width:"10px",height:"10px"},topRight:{right:"0",top:"0",width:"10px",height:"10px"},topLeft:{left:"0",top:"0",width:"10px",height:"10px"}},onDragStart:t,onDragStop:function(e,t){var n=t.node,r=t.x,a=t.y;E&&r===E.x&&a===E.y||(0===r&&"100%"!==v.width?(g({width:"50%",height:"100%"}),w({x:0,y:0})):r+n.offsetWidth>=window.innerWidth&&"100%"!==v.width?(g({width:"50%",height:"100%"}),w({x:window.innerWidth/2,y:0})):w({x:r,y:a}))},onResizeStart:t,onResizeStop:function(e,t,n,r,a){n.offsetWidth===v.width&&n.offsetHeight===v.height||(g({width:n.offsetWidth,height:n.offsetHeight}),w(a))}},a.a.createElement("div",{className:"".concat(O.join(" "))},a.a.createElement(qr,{done:c,title:u,onDoubleClick:j}),a.a.createElement("div",{className:"windowBox"},o&&a.a.createElement("div",{className:"menu"},o),a.a.createElement("div",{className:"content"},n))))},Yr=a.a.memo(zr);zr.defaultProps={done:void 0,classNames:[],title:"app",menu:void 0,type:"window"};var Jr=rn()([function(e){return e.transactions},function(e,t){return t.ids}],(function(e,t){return Object(z.a)(e.values()).filter((function(e){var n=e.fromWalletId,r=e.toWalletId;return t.includes(n)||t.includes(r)})).map((function(e){return e.objectId})).reverse()}))((function(e,t){var n=t.ids;return"transaction-ids-".concat(n.join(" "))})),Gr=(n(53),a.a.memo((function(e){var t=e.transactionId,n=Object(c.d)((function(e){return function(e,t){var n=t.id;return e.transactions.get(n)}(e,{id:t})})),r=Object(c.d)((function(e){return hn(e,{id:n.fromWalletId})})),o=Object(c.d)((function(e){return hn(e,{id:n.toWalletId})}));return a.a.createElement(bn,{classNames:["TransactionItem"]},a.a.createElement("p",null,v(ke.getState(),{date:new Date(n.customTimeCreated||n.timeCreated)}).fullStamp),a.a.createElement("p",null,"".concat(r.teamName||r.aliasName||r.username," -> ").concat(o.teamName||o.aliasName||o.username)),a.a.createElement("p",null,"Amount: ".concat(n.amount)),n.note&&a.a.createElement("p",null,n.note))}))),Kr=a.a.memo((function(e){var t=e.walletIds,n=Object(c.d)((function(e){return Jr(e,{ids:t})}));return a.a.createElement(Ve,{scrollTo:{buffer:!0,direction:"top"}},n.map((function(e){return a.a.createElement(Gr,{key:e,transactionId:e})})))})),Qr=function(e){return e.wallets},Xr=function(e,t){var n=t.id;return e.wallets.get(n)},Zr=rn()([Qr,sn],(function(e,t){return Object(z.a)(e.values()).filter((function(e){return e.ownerId===t.objectId||t.aliases.includes(e.ownerAliasId)})).map((function(e){return e.objectId}))}))((function(){return"wallet-ids-current-user"})),$r=a.a.memo((function(e){var t=e.identityId,n=Object(c.d)((function(e){return pn(e,{id:t})}));return a.a.createElement(bn,{stopPropagation:!0,key:n.objectId,onClick:function(){ke.dispatch(Nn({windows:[{id:"".concat(me,"-").concat(n.objectId),value:{identityId:n.objectId,type:me}}]}))}},n.username||n.aliasName)})),_r=a.a.memo((function(){var e=Object(c.d)(vn);return a.a.createElement(Ve,{dropdown:!0,checkWidth:!0,classNames:["IdentityList"],title:"Users"},e.map((function(e){return a.a.createElement($r,{key:e,identityId:e})})))})),ea=function(e){var t=e.walletId,n=e.onChange,r=e.classNames,o=void 0===r?[]:r,i=Object(c.d)((function(e){return Xr(e,{id:t})})),l=Object(c.d)((function(e){return hn(e,{id:t})}));return a.a.createElement(bn,{classNames:["WalletItem"].concat(o),onClick:function(){return n(t)}},l?"".concat(l.teamName||l.aliasName||l.username,": ").concat(i.amount):"Show all")},ta=a.a.memo(ea);ea.defaultProps={classNames:[]};var na=a.a.memo((function(e){var t=e.onChange,n=e.walletId,r=Object(c.d)(Zr);return a.a.createElement(Ve,{dropdown:!0,checkWidth:!0,title:"Wallets",classNames:["WalletList"]},a.a.createElement(ta,{classNames:["showAll"===n?"selected":""],key:"showAll",onChange:t,walletId:"showAll"}),r.map((function(e){return a.a.createElement(ta,{key:e,walletId:e,onChange:t,classNames:[n===e?"selected":""]})})))})),ra=a.a.memo((function(e){var t=e.onChange,n=e.walletId,r=Object(c.d)(Qr);return a.a.createElement(Ve,{dropdown:!0,checkWidth:!0,title:"[ADMIN]",classNames:["WalletList"]},Object(z.a)(r.values()).map((function(e){var r=e.objectId;return a.a.createElement(ta,{key:r,walletId:r,onChange:t,classNames:[n===r?"selected":""]})})))})),aa=(n(54),a.a.memo((function(e){var t=e.id,n=e.index,o=Object(r.useState)("showAll"),i=Object(l.a)(o,2),s=i[0],u=i[1],d=Object(c.d)(Zr),m=Object(c.d)((function(e){return hn(e,{id:s})})),f=Object(c.d)(un),p=Object(r.useCallback)((function(){ke.dispatch(Nn({windows:[{id:t,value:{type:ie}}]}))}),[]),h=Object(r.useCallback)((function(){return ke.dispatch(Cn({id:t}))}),[t]),v=Object(r.useCallback)((function(e){return u(e)}),[]),g=Object(r.useMemo)((function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(na,{key:"walletList",onChange:v,walletId:s}),a.a.createElement(_r,{key:"identityList"}),f>=ae&&a.a.createElement(ra,{key:"adminWalletList",onChange:v,walletId:s}))}),[v,s]);return a.a.createElement(Yr,{classNames:["Wallet"],index:n,done:h,title:"Wallet".concat(m?": ".concat(m.teamName||m.aliasName||m.username):"s"),onClick:p,menu:g},a.a.createElement(Kr,{key:"transactionList",walletIds:"showAll"!==s?[s]:d}))}))),oa=(n(55),function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),n=(t[0],t[1]),o=Object(r.useRef)();return Object(r.useEffect)((function(){!function e(){if("undefined"!==typeof window.google&&"undefined"!==typeof window.MarkerClusterer&&"undefined"!==typeof window.MapLabel){var t=new window.google.maps.Map(o.current,{disableDefaultUI:!0,fullscreenControl:!1,keyboardShortcuts:!1,mapTypeControl:!1,noClear:!0,zoomControl:!1,panControl:!1,overviewMapControl:!1,rotateControl:!1,scaleControl:!1,streetViewControl:!1,center:{lat:-34.397,lng:150.644},zoom:8,styles:[{elementType:"geometry",stylers:[{color:"#13002d"}]},{elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"administrative",stylers:[{color:"#370087"}]},{featureType:"landscape.natural.terrain",stylers:[{color:"#44003a"}]},{featureType:"road",stylers:[{color:"#6e6c6d"},{weight:.5}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{color:"#7d006c"}]}]});n(t)}else setTimeout(e,1e3)}()}),[]),a.a.createElement("div",{ref:o,className:"MapView"})}),ca=function(e){return e.positions},ia=function(e){return Object(tn.createSelector)([ca],(function(t){return Object(z.a)(t.values()).filter((function(t){var n=t.positionType;return e===n})).map((function(e){return{positionName:e.positionName,objectId:e.objectId}}))}))},la=function(e){var t=e.title,n=e.positionType,o=Object(r.useMemo)(ia,[]),i=Object(c.d)((function(e){return o(e,n)}));return a.a.createElement("div",{key:"positionsList",className:"PositionsList"},a.a.createElement(Ve,{title:t},i.map((function(e){return a.a.createElement(bn,{key:e.objectId,onClick:function(){console.log(e.objectId)}},e.positionName)}))))},sa=a.a.memo(la);la.defaultProps={title:void 0};var ua=function(e){var t=e.positionTypes,n=void 0===t?[]:t;return a.a.createElement("div",{className:"lists Positions"},n.map((function(e){return a.a.createElement(sa,{title:e,positionType:e})})))},da=(n(56),a.a.memo((function(e){var t=e.id,n=e.index,o=Object(r.useCallback)((function(){ke.dispatch(Nn({windows:[{id:t,value:{type:se}}]}))}),[]);return a.a.createElement(Yr,{index:n,done:function(){return ke.dispatch(Cn({id:t}))},classNames:["WorldMap"],title:"map",onClick:o,menu:a.a.createElement(a.a.Fragment,null,a.a.createElement(ua,null))},a.a.createElement(oa,null))}))),ma=function(e){return e.rooms},fa=function(e,t){var n=t.id;return e.rooms.get(n)},pa=rn()([ma],(function(e){return Object(z.a)(e.values()).filter((function(e){return!e.isWhisper&&!e.isUser}))}))((function(){return"normalRooms"})),ha=rn()([ma],(function(e){return Object(z.a)(e.values()).filter((function(e){return e.isWhisper})).map((function(e){return{objectId:e.objectId,participantIds:e.participantIds}}))}))((function(){return"whisperRooms"})),va=rn()([pa,sn],(function(e,t){return e.filter((function(e){return!t.followingRooms.includes(e.objectId)})).map((function(e){return{roomName:e.roomName,objectId:e.objectId}})).sort((function(e,t){var n=e.roomName.toLowerCase(),r=t.roomName.toLowerCase();return n>r||r<n?1:0})).map((function(e){return e.objectId}))}))((function(){return"unfollowedRooms"})),ga=rn()([pa,sn],(function(e,t){return e.filter((function(e){return t.followingRooms.includes(e.objectId)})).map((function(e){return e.objectId}))}))((function(){return"followedRooms"})),ya=rn()([ha,function(e,t){return{identityId:t.identityId,currentIdentityId:t.currentIdentityId}},function(e,t){var n=t.identityId;return fa(e,{id:n})}],(function(e,t,n){var r=t.currentIdentityId,a=t.identityId;return e.find((function(e){return e.participantIds.includes(r)&&e.participantIds.includes(a)}))||n}))((function(e,t){var n=t.currentIdentityId,r=t.identityId;return"whisper-".concat(n,"-").concat(r)})),ba=rn()([mn,gn,function(e,t){return t.ids}],(function(e,t,n){var r=e.get(n[0]),a=e.get(n[1]);return t.find((function(e){var t=e.objectId;return r.objectId===t||r.ownerId===t||r.userIds.includes(t)}))?"".concat(r.username||r.aliasName," > ").concat(a.username||r.aliasName):"".concat(a.username||r.aliasName," > ").concat(r.username||r.aliasName)}))((function(e,t){var n=t.ids;return"w-name-".concat(n.join(" "))}));function Ea(){return(Ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wa(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Oa=a.a.createElement("rect",{x:3,y:11,width:18,height:11,rx:2,ry:2}),ja=a.a.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}),ka=function(e){var t=e.svgRef,n=e.title,r=wa(e,["svgRef","title"]);return a.a.createElement("svg",Ea({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-lock",ref:t},r),n?a.a.createElement("title",null,n):null,Oa,ja)},Ia=a.a.forwardRef((function(e,t){return a.a.createElement(ka,Ea({svgRef:t},e))})),xa=(n.p,n(57),a.a.memo((function(e){var t=e.roomId,n=Object(c.d)((function(e){return fa(e,{id:t})}));return a.a.createElement(bn,{classNames:["RoomItem"],key:t,onClick:function(){return ke.dispatch(Nn({windows:[{id:"".concat(we,"-").concat(t),value:{type:we,roomId:t}}]}))}},n.roomName,n.isLocked&&a.a.createElement("div",{className:"lock"},a.a.createElement(Ia,null)))}))),Na=a.a.memo((function(e){var t=e.onChange,n=Object(c.d)(va);return a.a.createElement(Ve,{dropdown:!0,checkWidth:!0,key:"roomList",classNames:["RoomList"],title:"Rooms"},n.map((function(e){return a.a.createElement(xa,{key:e,roomId:e,onChange:t})})))})),Ca=a.a.memo((function(e){var t=e.room,n=e.onChange,r=Object(c.d)((function(e){return ba(e,{ids:t.participantIds})}));return a.a.createElement(bn,{key:t.objectId,onClick:function(){n({roomId:t.objectId,roomName:r})}},r)})),Sa=a.a.memo((function(e){var t=e.onChange,n=Object(c.d)(ha);return a.a.createElement(Ve,{dropdown:!0,checkWidth:!0,key:"whisperList",classNames:["WhisperList"],title:"PM"},n.map((function(e){return a.a.createElement(Ca,{key:e.objectId,room:e,onChange:t})})))})),Ra=function(e){var t=e.roomId,n=e.onChange,r=e.classNames,o=void 0===r?[]:r,i=Object(c.d)((function(e){return fa(e,{id:t})}));return a.a.createElement(bn,{classNames:["FollowingItem"].concat(o),key:t,onClick:function(){n({roomId:t})}},i.roomName)},Pa=a.a.memo(Ra);Ra.defaultProps={classNames:[]};var Ta=a.a.memo((function(e){var t=e.onChange,n=e.roomId,r=Object(c.d)(ga);return a.a.createElement(Ve,{dropdown:!0,checkWidth:!0,key:"followingList",classNames:["FollowingList"],title:"Joined"},r.map((function(e){return a.a.createElement(Pa,{classNames:["".concat(e===n?"selected":"")],key:e,roomId:e,onChange:t})})))})),La=a.a.memo((function(e){var t=e.onChange,n=e.roomId,r=Object(c.d)(un);return a.a.createElement(a.a.Fragment,null,r>=re&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Ta,{roomId:n,key:"following",onChange:t}),a.a.createElement(Sa,{key:"whisper",onChange:t}),a.a.createElement(Na,{key:"room",onChange:t})),a.a.createElement(_r,{onDone:t,key:"user"}))})),Aa=n(7);function Fa(){return(Fa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ma(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Wa=a.a.createElement("polyline",{points:"4 14 10 14 10 20"}),Da=a.a.createElement("polyline",{points:"20 10 14 10 14 4"}),Ba=a.a.createElement("line",{x1:14,y1:10,x2:21,y2:3}),Ha=a.a.createElement("line",{x1:3,y1:21,x2:10,y2:14}),Va=function(e){var t=e.svgRef,n=e.title,r=Ma(e,["svgRef","title"]);return a.a.createElement("svg",Fa({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-minimize-2",ref:t},r),n?a.a.createElement("title",null,n):null,Wa,Da,Ba,Ha)},Ua=a.a.forwardRef((function(e,t){return a.a.createElement(Va,Fa({svgRef:t},e))})),qa=(n.p,n(58),a.a.forwardRef((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,n=e.onRemove,o=e.width,c=e.height,i=e.scrollTo,s=void 0!==i&&i,u=e.classNames,d=void 0===u?[]:u,m=e.altText,f=void 0===m?"":m,p=e.fullImage,h=e.fullWidth,v=e.fullHeight,g=arguments.length>1?arguments[1]:void 0,y=Object(r.useRef)(null),b=Object(r.useState)(!1),E=Object(l.a)(b,2),w=E[0],O=E[1];Object(r.useEffect)((function(){s&&!w&&y.current&&y.current.scrollIntoView({block:"nearest"})}),[w]);var j=function(e){p&&(O(!w),e.stopPropagation())};return a.a.createElement("div",{role:"complementary",ref:y,className:"".concat(["Image",w?"full":""].concat(d).join(" ")),onClick:j},n&&a.a.createElement("div",{className:"remove clickable",role:"complementary",onClick:function(e){n(),e.stopPropagation()}},"X"),p&&a.a.createElement("div",{onClick:j,className:"zoom clickable",role:"complementary"},w?a.a.createElement(Ua,null):a.a.createElement(Rr,null)),a.a.createElement("img",{className:p?"clickable":"",onClick:j,width:w?h:o,height:w?v:c,ref:g,src:w?p:t,alt:f}))}))),za=qa;function Ya(){return(Ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ja(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}qa.defaultProps={altText:"",classNames:[],onRemove:void 0,width:void 0,height:void 0,fullImage:void 0,fullWidth:void 0,fullHeight:void 0,scrollTo:!1};var Ga=a.a.createElement("rect",{x:3,y:3,width:18,height:18,rx:2,ry:2}),Ka=a.a.createElement("circle",{cx:8.5,cy:8.5,r:1.5}),Qa=a.a.createElement("polyline",{points:"21 15 16 10 5 21"}),Xa=function(e){var t=e.svgRef,n=e.title,r=Ja(e,["svgRef","title"]);return a.a.createElement("svg",Ya({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-image",ref:t},r),n?a.a.createElement("title",null,n):null,Ga,Ka,Qa)},Za=a.a.forwardRef((function(e,t){return a.a.createElement(Xa,Ya({svgRef:t},e))})),$a=(n.p,n(59),a.a.memo((function(e){var t=e.useIcon,n=void 0!==t&&t,o=Object(Aa.c)(),c=o.register,i=o.setValue,s=Object(r.useRef)(null),u=Object(r.useState)(),d=Object(l.a)(u,2),m=d[0],f=d[1],p=Object(Aa.d)({name:"image"});Object(r.useEffect)((function(){c("image")}),[]),Object(r.useEffect)((function(){i("image",m||void 0)}),[m]),Object(r.useEffect)((function(){console.log(p),p||f()}),[p]);return a.a.createElement("div",{className:"ImageUpload"},a.a.createElement("input",{key:"uploadInput",className:"hide",ref:s,type:"file",accept:"image/png, image/jpeg, image/pjpeg",onChange:function(e){var t=(e.target.files||[])[0];if(t){var n=new FileReader;n.addEventListener("load",(function(){if(n.result){var e={imageName:t.name,source:n.result};f(e)}})),n.readAsDataURL(t)}}}),a.a.createElement(za,{onRemove:function(){return f()},classNames:["previewImage"].concat([m?"":"hide"]),image:m?m.source:"",altText:"Image preview"}),a.a.createElement(I,{type:"button",onClick:function(){s.current.click()}},a.a.createElement(Za,null),!n&&a.a.createElement("span",null,"Upload image")))}))),_a=function(){var e=Object(ze.a)(qe.a.mark((function e(t){var n,r,a,o,c,i,l;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,r=t.roomId,a=t.image,o=fa(ke.getState(),{id:r}),c=o.isWhisper?o.participantIds:[],i={roomId:r,ownerAliasId:ct(ke.getState())||void 0,text:n.split("\n")},o.isUser?(i.messageType=Z,c.push(lt(ke.getState())),c.push(r)):o.isWhisper?i.messageType=Z:i.messageType=X,e.next=7,$t(Dt,{message:i,image:a,participantIds:c});case 7:return l=e.sent,ke.dispatch(st({messages:[l.message]})),e.abrupt("return",{message:l.message,switchRoom:!0});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),eo=function(){var e=Object(ze.a)(qe.a.mark((function e(t){var n,r,a,o,c;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,r=t.text,a=t.image,o={messageType:$,text:[n].concat(r.split("\n")),roomId:h(ke.getState())},e.next=4,$t(Dt,{message:o,image:a});case 4:return c=e.sent,ke.dispatch(st({messages:[c.message]})),e.abrupt("return",{message:c.message});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),to=function(){var e=Object(ze.a)(qe.a.mark((function e(t){var n,r;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,e.next=3,$t(qt,{roomId:n});case 3:return r=e.sent,ke.dispatch(st({messages:r.messages})),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function no(){return(no=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ro(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ao=a.a.createElement("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),oo=a.a.createElement("circle",{cx:12,cy:10,r:3}),co=function(e){var t=e.svgRef,n=e.title,r=ro(e,["svgRef","title"]);return a.a.createElement("svg",no({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-map-pin",ref:t},r),n?a.a.createElement("title",null,n):null,ao,oo)},io=a.a.forwardRef((function(e,t){return a.a.createElement(co,no({svgRef:t},e))}));n.p;function lo(){return(lo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function so(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var uo=a.a.createElement("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),mo=a.a.createElement("line",{x1:7,y1:7,x2:7.01,y2:7}),fo=function(e){var t=e.svgRef,n=e.title,r=so(e,["svgRef","title"]);return a.a.createElement("svg",lo({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-tag",ref:t},r),n?a.a.createElement("title",null,n):null,uo,mo)},po=a.a.forwardRef((function(e,t){return a.a.createElement(fo,lo({svgRef:t},e))}));n.p;function ho(){return(ho=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var go=a.a.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),yo=a.a.createElement("polyline",{points:"14 2 14 8 20 8"}),bo=a.a.createElement("line",{x1:12,y1:18,x2:12,y2:12}),Eo=a.a.createElement("line",{x1:9,y1:15,x2:15,y2:15}),wo=function(e){var t=e.svgRef,n=e.title,r=vo(e,["svgRef","title"]);return a.a.createElement("svg",ho({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-file-plus",ref:t},r),n?a.a.createElement("title",null,n):null,go,yo,bo,Eo)},Oo=a.a.forwardRef((function(e,t){return a.a.createElement(wo,ho({svgRef:t},e))}));n.p;function jo(){return(jo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ko(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Io=a.a.createElement("path",{d:"M22.61 16.95A5 5 0 0 0 18 10h-1.26a8 8 0 0 0-7.05-6M5 5a8 8 0 0 0 4 15h9a5 5 0 0 0 1.7-.3"}),xo=a.a.createElement("line",{x1:1,y1:1,x2:23,y2:23}),No=function(e){var t=e.svgRef,n=e.title,r=ko(e,["svgRef","title"]);return a.a.createElement("svg",jo({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-cloud-off",ref:t},r),n?a.a.createElement("title",null,n):null,Io,xo)},Co=a.a.forwardRef((function(e,t){return a.a.createElement(No,jo({svgRef:t},e))})),So=(n.p,n(60),function(e){var t=e.roomId,n=e.onSend,o=e.minAccessLevel,i=void 0===o?re:o,s=Object(r.useState)(!1),u=Object(l.a)(s,2),d=u[0],p=u[1],h=Object(Aa.b)(),v=Object(r.useRef)(null),g=Object(r.useRef)(null),y=Object(c.d)(at),b=Object(c.d)(un),E=Object(c.d)(m),w=Object(c.d)(f),O=function(){if(v.current){var e=v.current;e.style.height&&e.scrollHeight.toString()===e.style.height.split("px")[0]||(e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px"),v.current.scrollIntoView())}};return a.a.createElement("div",{className:"InputArea"},a.a.createElement(Aa.a,h,a.a.createElement("form",{onSubmit:h.handleSubmit((function(e){var r=e.text,a=e.image;p(!0),_a({roomId:t,image:a,text:r}).then((function(e){var t=e.message,r=e.switchRoom;h.setValue("text",""),h.setValue("image",void 0),O(),r&&n({roomId:t.roomId}),p(!1)})).catch((function(e){console.log("error",e),p(!1)}))}))},b>=i&&a.a.createElement("div",{key:"buttonBox",className:"buttonBox"},E.CHAT&&a.a.createElement($a,{useIcon:!0}),a.a.createElement(I,{onClick:function(){}},a.a.createElement(po,null)),a.a.createElement(I,{onClick:function(){}},a.a.createElement(Oo,null)),w&&a.a.createElement(I,{onClick:function(){}},a.a.createElement(io,null)),a.a.createElement(yr,null)),a.a.createElement("div",{className:"input"},a.a.createElement("textarea",{maxLength:600,name:"text",key:"input",rows:1,ref:function(e){h.register(e),v.current=e},onKeyDown:function(e){var t=e.key;e.altKey&&"Enter"===t&&g.current&&g.current.click()},placeholder:y?"Alt+Enter to send message":"Offline. Reconnecting to server...",className:[].join(" "),onChange:function(e){return O(e.target)}}),a.a.createElement(I,{ref:g,disabled:!y||d,key:"send",type:"submit",classNames:["sendButton"],onClick:function(){}},y?a.a.createElement("span",null,"Send"):a.a.createElement(Co,null))))))}),Ro=a.a.memo(So);So.defaultProps={minAccessLevel:re};var Po=function(e,t){var n=t.id;return e.messages.get(n)},To=function(e){return e.messages},Lo=rn()([To,function(e,t){return t.roomId}],(function(e,t){return Object(z.a)(e.values()).filter((function(e){return e.roomId===t}))}))((function(e,t){return t.roomId})),Ao=rn()([To],(function(e){return Object(z.a)(e.values()).filter((function(e){return e.messageType===$})).reverse()}))((function(){return"news"})),Fo=rn()([Ao],(function(e){return e.map((function(e){return{objectId:e.objectId,points:e.points}})).reverse()}))((function(){return"news-ids"})),Mo=rn()([Lo],(function(e){return e.map((function(e){return e.objectId}))}))((function(e,t){var n=t.roomId;return"id-".concat(n)})),Wo=(n(61),a.a.memo((function(e){var t=e.identityId,n=e.timeCreated,r=Object(c.d)((function(e){return pn(e,{id:t})})),o=Object(c.d)((function(e){return v(e,{date:n})}));return a.a.createElement("p",{className:"MessageInfo"},a.a.createElement("span",{role:"button",tabIndex:0,className:"clickable username",onClick:function(e){r&&ke.dispatch(Nn({windows:[{id:"".concat(me,"-").concat(r.objectId),value:{identityId:r.objectId,type:me}}]})),e.stopPropagation()}},r?r.username||r.aliasName:"-"),a.a.createElement("span",{className:"time"},o.fullStamp))}))),Do=(n(62),function(e){var t=e.previousMessageId,n=e.messageId,o=e.selected,i=void 0!==o&&o,l=Object(r.useRef)(),s=Object(c.d)((function(e){return Po(e,{id:t})})),u=Object(c.d)((function(e){return Po(e,{id:n})}));Object(r.useEffect)((function(){i&&l.current&&(l.current.scrollIntoView({behavior:"smooth",block:"nearest"}),setTimeout((function(){return l.current.scrollIntoView({behavior:"smooth",block:"nearest"})}),300))}),[i]);var d=oe({objectToAccess:u,toAuth:sn(ke.getState())}).hasFullAccess;return a.a.createElement(bn,{ref:l,classNames:["MessageItem","".concat(d?"clickable":"")],key:n},!(!!s&&!(new Date(u.lastUpdated).getTime()-9e5>new Date(s.lastUpdated).getTime())&&(!(!s.ownerAliasId||!u.ownerAliasId||s.ownerAliasId!==u.ownerAliasId)||!s.ownerAliasId&&!u.ownerAliasId&&s.ownerId===u.ownerId))&&a.a.createElement(Wo,{identityId:u.ownerAliasId||u.ownerId,timeCreated:u.customTimeCreated||u.timeCreated}),a.a.createElement("div",{className:"text"},u.text.map((function(e,t){return a.a.createElement("p",{key:t},e)})),u.image&&u.image.thumbFileName&&a.a.createElement(za,{scrollTo:!0,image:"/upload/images/".concat(u.image.thumbFileName),altText:"pic",width:u.image.thumbWidth,height:u.image.thumbHeight,fullImage:"/upload/images/".concat(u.image.fileName),fullWidth:u.image.width,fullHeight:u.image.height})))}),Bo=a.a.memo(Do);Do.defaultProps={previousMessageId:void 0,selected:!1};n(63);var Ho=function(e){var t=e.roomId,n=e.messageId,r=Object(c.d)((function(e){return Mo(e,{roomId:t})}));return a.a.createElement(Ve,{observe:"lower",key:"messageList",scrollTo:{buffer:!0,direction:"bottom",skipFirstRender:"string"===typeof n},classNames:["MessageList"]},r.map((function(e,t,r){return a.a.createElement(Bo,{selected:n&&n===e,key:e,previousMessageId:r[t-1],messageId:e})})))},Vo=a.a.memo(Ho);Ho.defaultProps={roomId:void 0,messageId:void 0};n(64);var Uo=function(e){var t=e.roomId,n=e.onSend,r=Object(c.d)(un);return a.a.createElement("div",{className:"Messages"},a.a.createElement("div",{className:"spacer"}),a.a.createElement(Vo,{key:"messagesList",roomId:t}),r>=re&&a.a.createElement(Ro,{onSend:n,roomId:t,key:"inputArea"}))},qo=a.a.memo(Uo);Uo.defaultProps={roomId:void 0};var zo=a.a.memo((function(e){var t=e.children;return a.a.createElement(Ve,{dropdown:!0,checkWidth:!0,classNames:["FileMenu"],title:"File"},t)})),Yo=(n(65),function(e){var t=e.id,n=e.roomId,o=e.index,i=Object(r.useState)(n||d(ke.getState())),s=Object(l.a)(i,2),u=s[0],m=s[1],f=Object(c.d)((function(e){return fa(e,{id:u})})),p=Object(c.d)(sn);Object(r.useEffect)((function(){p&&!p.isAnonymous&&f||u===d(ke.getState())||m(d(ke.getState()))}),[f,p]),Object(r.useEffect)((function(){n&&u!==n&&m(n)}),[n]);var h=function(){if(!f)return"Chat";if(f.isUser){var e=pn(ke.getState(),{id:u});return"PM: ".concat(e.aliasName||e.username)}return f.isWhisper?"PM: ".concat(ba(ke.getState(),{ids:f.participantIds})):"Chat: ".concat(f.roomName)}(),v=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.roomId;m(t)}),[]),g=Object(r.useCallback)((function(){ke.dispatch(Nn({windows:[{id:t,value:{type:le}}]}))}),[]),y=Object(r.useCallback)((function(){return ke.dispatch(Cn({id:t}))}),[t]),b=Object(r.useCallback)((function(){return ke.dispatch(Nn({windows:[{id:fe,value:{type:fe}}]}))}),[]),E=oe({objectToAccess:f,toAuth:p}).hasFullAccess;return a.a.createElement(Yr,{index:o,done:y,classNames:["Chat"],title:h,onClick:g,menu:a.a.createElement(a.a.Fragment,null,!p.isAnonymous&&a.a.createElement(zo,{key:"fileMenu"},a.a.createElement(bn,{stopPropagation:!0,key:"createRoom",onClick:b},"New room"),E&&a.a.createElement(bn,{stopPropagation:!0,key:"configRoom",onClick:function(){}},"Config room"),E&&!f.isWhisper&&!f.isUser&&!f.isSystemRoom&&!f.isTeam&&a.a.createElement(bn,{stopPropagation:!0,key:"removeRoom",onClick:function(){return ke.dispatch(Nn({windows:[{id:pe,value:{type:pe,roomId:u}}]}))}},"Delete room")),a.a.createElement(La,{roomId:u,key:"rooms",onChange:v}))},a.a.createElement(qo,{key:"messages",roomId:u,onSend:v}))}),Jo=a.a.memo(Yo);Yo.defaultProps={roomId:void 0};var Go=function(e){return e.windowOrder},Ko=(rn()([Go,function(e,t){return t.id}],(function(e,t){return Object(z.a)(e.keys()).indexOf(t)}))((function(e,t){var n=t.id;return"index-".concat(n)})),n(66),n(67),function(e){var t=e.children,n=e.title,r=e.error,o=e.text,c=e.done,i=e.onClick,l=e.index,s=e.classNames,u=void 0===s?[]:s;return a.a.createElement(Yr,{index:l,type:"dialog",done:c,title:n,classNames:["Dialog"].concat(u),onClick:i},r&&a.a.createElement("div",{className:"error"},a.a.createElement("span",null,r.message)),o&&a.a.createElement("div",null,o),t)}),Qo=a.a.memo(Ko);Ko.defaultProps={children:void 0,error:void 0,title:void 0,text:void 0,classNames:[]};var Xo=a.a.memo((function(e){var t=e.id,n=e.identityId,r=e.index,o=Object(c.d)((function(e){return pn(e,{id:n})})),i=Object(c.d)(lt);return a.a.createElement(Qo,{index:r,title:"User: ".concat(o.aliasName||o.username),onClick:function(){ke.dispatch(Nn({windows:[{id:t,value:{type:me,identityId:n}}]}))},done:function(){return ke.dispatch(Cn({id:t}))}},"-1"!==i&&a.a.createElement("div",{className:"buttons"},a.a.createElement(I,{stopPropagation:!0,type:"button",onClick:function(){return Object(c.b)((function(){ke.dispatch(Nn({windows:[{id:"".concat(ye,"-").concat(n),value:{type:ye,toWalletId:n}}]})),ke.dispatch(Cn({id:t}))}))}},a.a.createElement(Gn,null)),a.a.createElement(I,{stopPropagation:!0,type:"button",onClick:function(){var e=ya(ke.getState(),{identityId:n,currentIdentityId:i});Object(c.b)((function(){ke.dispatch(Nn({windows:[{id:le,value:{type:le,roomId:e.objectId}}]})),ke.dispatch(Cn({id:t}))}))}},a.a.createElement(An,null))))})),Zo=function(e){var t=e.onChange,n=e.name,o=e.shouldEqual,c=e.maxLength,i=e.minLength,s=e.type,u=void 0===s?"text":s,d=e.required,m=void 0!==d&&d,f=e.placeholder,p=void 0===f?"":f,h=Object(Aa.c)(),v=h.register,g=h.getValues,y=Object(r.useState)(!1),b=Object(l.a)(y,2),E=b[0],w=b[1],O=Object(r.useState)(!1),j=Object(l.a)(O,2),k=j[0],I=j[1];return a.a.createElement("input",{minLength:i,maxLength:c,required:m,name:n,ref:v({maxLength:c,minLength:i,validate:function(e){return!o||e===g(o)||"Must match ".concat(o)}}),type:u,defaultValue:"",className:"Input ".concat(k?"empty":""),onFocus:function(){E?k&&I(!1):w(!0)},onBlur:function(e){E&&m&&I(!e.target.value||""===e.target.value)},onChange:function(e){t&&t(e.target.value)},placeholder:p})},$o=a.a.memo(Zo);Zo.defaultProps={placeholder:"",required:!1,type:"text",onChange:void 0,shouldEqual:void 0,maxLength:void 0,minLength:void 0};var _o=function(){var e=Object(ze.a)(qe.a.mark((function e(t){var n,r,a;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.room,r=Object(q.a)(Object(q.a)({},n),{},{ownerAliasId:ct(ke.getState())||void 0}),e.next=4,$t(Bt,{room:r});case 4:return a=e.sent,e.next=7,ke.dispatch(Ot({room:a.room,user:a.user}));case 7:return e.abrupt("return",{room:a.room});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ec=function(){var e=Object(ze.a)(qe.a.mark((function e(t){var n,r,a,o;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,r=t.password,a={roomId:n,password:r,aliasId:ct(ke.getState())||void 0},e.next=4,$t(Ut,a);case 4:return o=e.sent,e.next=7,to({roomId:n});case 7:return e.next=9,ke.dispatch(Ot({room:o.room,user:o.user}));case 9:return e.abrupt("return",{room:o.room,user:o.user});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tc=function(){var e=Object(ze.a)(qe.a.mark((function e(t){var n,r;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,e.next=3,$t(zt,{roomId:n});case 3:return r=e.sent,e.next=6,ke.dispatch(wt({rooms:[{objectId:n}]}));case 6:return e.abrupt("return",{room:r.room});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nc=a.a.memo((function(e){var t=e.id,n=e.index,r=Object(Aa.b)();return r.errors.repeatPassword&&r.setValue("repeatPassword",""),a.a.createElement(Qo,{index:n,classNames:["CreateRoomDialog"],onClick:function(){ke.dispatch(Nn({windows:[{id:t,value:{type:fe}}]}))},done:function(){return ke.dispatch(Cn({id:t}))},title:"New room"},a.a.createElement(Aa.a,r,a.a.createElement("form",{onSubmit:r.handleSubmit((function(e){var n=e.roomName,r=e.password,a=e.topic;_o({room:{roomName:n,password:r,topic:a}}).then((function(e){var n=e.room;Object(c.b)((function(){ke.dispatch(Nn({windows:[{id:le,value:{type:le,roomId:n.objectId}}]})),ke.dispatch(Cn({id:t}))}))})).catch((function(e){return console.log(e)}))}))},a.a.createElement("div",{className:"identity"},a.a.createElement("span",null,"You are: "),a.a.createElement(yr,null)),a.a.createElement($o,{required:!0,maxLength:20,name:"roomName",placeholder:"Name of the room"}),a.a.createElement($o,{maxLength:300,name:"topic",placeholder:"(opt) Topic (shown when joining the room)"}),a.a.createElement($o,{minLength:4,maxLength:100,name:"password",type:"password",placeholder:"(opt) Password"}),a.a.createElement($o,{minLength:4,maxLength:100,shouldEqual:"password",name:"repeatPassword",type:"password",placeholder:"".concat(r.errors.repeatPassword?"Error. Passwords must match!":"(opt) Repeat password")}),a.a.createElement("div",{className:"buttons"},a.a.createElement(I,{type:"submit",onClick:function(){}},"Create")))))})),rc=a.a.memo((function(e){var t=e.id,n=e.roomId,o=e.index,i=Object(r.useState)(),s=Object(l.a)(i,2),u=s[0],d=s[1],m=Object(c.d)((function(e){return fa(e,{id:n})}));return a.a.createElement(Qo,{index:o,classNames:["RemoveRoomDialog"],error:u,onClick:function(){ke.dispatch(Nn({windows:[{id:t,value:{type:pe,roomId:n}}]}))},done:function(){return ke.dispatch(Cn({id:t}))},title:"Delete room ".concat(m?m.roomName:""),text:"Are you sure you want to delete ".concat(m?m.roomName:"","?")},a.a.createElement(I,{type:"button",onClick:function(){return ke.dispatch(Cn({id:t}))}},"No"),a.a.createElement(I,{type:"submit",onClick:function(){tc({roomId:n}).then((function(){Object(c.b)((function(){ke.dispatch(Nn({windows:[{id:le,value:{type:le}}]})),ke.dispatch(Cn({id:t}))}))})).catch((function(e){return d(e)}))}},"Yes"))})),ac=a.a.memo((function(e){var t=e.id,n=e.index,o=Object(Aa.b)(),c=Object(r.useState)(),i=Object(l.a)(c,2),s=i[0],u=i[1],d=function(){var e=Object(ze.a)(qe.a.mark((function e(n){var r,a;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.username,a=n.password,_t(r,a).then((function(){ke.dispatch(Cn({id:t}))})).catch((function(e){u(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(Qo,{index:n,classNames:["LoginDialog"],onClick:function(){ke.dispatch(Nn({windows:[{id:t,value:{type:ve}}]}))},done:function(){return ke.dispatch(Cn({id:t}))},error:s,title:"Login"},a.a.createElement(Aa.a,o,a.a.createElement("form",{onSubmit:o.handleSubmit(d)},a.a.createElement($o,{name:"username",placeholder:"Username"}),a.a.createElement($o,{name:"password",placeholder:"Password",type:"password"}),a.a.createElement("div",{className:"buttons"},a.a.createElement(I,{type:"submit",onClick:function(){}},"Login")))))})),oc=function(e){var t=e.onChange,n=e.children,o=e.name,c=e.defaultValue,i=e.required,s=void 0!==i&&i,u=e.placeholder,d=void 0===u?"":u,m=e.multiple,f=void 0!==m&&m,p=Object(Aa.c)().register,h=Object(r.useState)(!1),v=Object(l.a)(h,2),g=v[0],y=v[1],b=Object(r.useState)(!1),E=Object(l.a)(b,2),w=E[0],O=E[1],j=function(e){var t=Array.from(e.target.selectedOptions).filter((function(e){return""!==e.value}));g&&s&&O(0===t.length)};return a.a.createElement("select",{defaultValue:c,required:s,name:o,ref:p,className:"Select ".concat(w?"empty":""),onFocus:function(){return y(!0)},onBlur:j,onChange:function(e){j(e),t&&t(Array.from(e.target.selectedOptions).map((function(e){return e.value})).filter((function(e){return""!==e})))},placeholder:d,multiple:f},n)},cc=oc;oc.defaultProps={multiple:!1,children:void 0,placeholder:"",required:!1,onChange:void 0};var ic=function(e){var t=e.onChange,n=e.name,o=e.maxLength,c=e.required,i=void 0!==c&&c,s=e.placeholder,u=void 0===s?"":s,d=Object(Aa.c)().register,m=Object(r.useState)(!1),f=Object(l.a)(m,2),p=f[0],h=f[1],v=Object(r.useState)(!1),g=Object(l.a)(v,2),y=g[0],b=g[1];return a.a.createElement("textarea",{maxLength:o,required:i,name:n,ref:d({maxLength:o}),defaultValue:"",className:y?"empty":"",onFocus:function(){return h(!0)},onBlur:function(e){var t=e.target.value.trim();p&&i&&b(""!==t)},onChange:function(e){t&&t(e.target.value)},placeholder:u})},lc=ic;ic.defaultProps={placeholder:"",required:!1,onChange:void 0,maxLength:void 0};var sc=function(){var e=Object(ze.a)(qe.a.mark((function e(t){var n,r;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t).user.registerDevice=et(),e.next=4,$t(Wt,n);case 4:return r=e.sent,e.next=7,ke.dispatch(yt(r));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uc=a.a.memo((function(e){var t=e.id,n=e.index,o=Object(Aa.b)(),i=Object(r.useState)(),s=Object(l.a)(i,2),d=s[0],m=(s[1],Object(r.useState)()),f=Object(l.a)(m,2),p=f[0],h=f[1],v=Object(c.d)(u),g=function(){var e=Object(ze.a)(qe.a.mark((function e(n){var r,a,o,c,i,l,s;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.offName,a=n.username,o=n.password,c=n.repeatPassword,i=n.pronouns,l=n.description,(!v||r)&&a&&o&&c&&i){e.next=3;break}return e.abrupt("return");case 3:if(o===c){e.next=5;break}return e.abrupt("return");case 5:return s={image:d,user:{offName:r,username:a,password:o,pronouns:i,description:l?l.split("\n"):void 0}},e.prev=6,e.next=9,sc(s);case 9:return e.next=11,_t(a,o);case 11:ke.dispatch(Cn({id:t})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),h(e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(Qo,{index:n,error:p,onClick:function(){ke.dispatch(Nn({windows:[{id:t,value:{type:he}}]}))},done:function(){return ke.dispatch(Cn({id:t}))},title:"Register user"},a.a.createElement(Aa.a,o,a.a.createElement("form",{onSubmit:o.handleSubmit(g)},v&&a.a.createElement($o,{required:!0,name:"offName",placeholder:"Out-of-game name"}),a.a.createElement($o,{required:!0,name:"username",placeholder:"Username"}),a.a.createElement(cc,{multiple:!0,required:!0,name:"pronouns"},a.a.createElement("option",{value:""},"---Choose pronouns---"),a.a.createElement("option",{value:"they"},"They/Them"),a.a.createElement("option",{value:"she"},"She/Her"),a.a.createElement("option",{value:"he"},"He/Him"),a.a.createElement("option",{value:"it"},"It")),a.a.createElement($o,{required:!0,name:"password",placeholder:"Password",type:"password"}),a.a.createElement($o,{required:!0,shouldEqual:"password",name:"repeatPassword",placeholder:"Repeat password",type:"password"}),a.a.createElement(lc,{name:"description",placeholder:"Description"}),a.a.createElement("div",{className:"buttons"},a.a.createElement(I,{type:"submit",onClick:function(){}},"Register")))))})),dc=function(){var e=Object(ze.a)(qe.a.mark((function e(t){var n;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$t(Mt,t);case 2:return n=e.sent,e.next=5,ke.dispatch(Ct(n));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mc=a.a.memo((function(e){var t=e.id,n=e.index,o=Object(Aa.b)(),c=Object(r.useState)(),i=Object(l.a)(c,2),s=i[0],u=(i[1],function(){var e=Object(ze.a)(qe.a.mark((function e(n){var r,a,o;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.aliasName,a=n.pronouns,o=n.description,dc({image:s,alias:{aliasName:r,pronouns:a,description:o}}).then((function(){return ke.dispatch(Cn({id:t}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return a.a.createElement(Qo,{index:n,title:"New alias",onClick:function(){ke.dispatch(Nn({windows:[{id:t,value:{type:ge}}]}))},done:function(){return ke.dispatch(Cn({id:t}))}},a.a.createElement(Aa.a,o,a.a.createElement("form",{onSubmit:o.handleSubmit(u)},a.a.createElement($o,{required:!0,name:"aliasName",placeholder:"Alias name"}),a.a.createElement(cc,{multiple:!0,required:!0,name:"pronouns"},a.a.createElement("option",{value:""},"---Choose pronouns---"),a.a.createElement("option",{value:"they"},"They/Them"),a.a.createElement("option",{value:"she"},"She/Her"),a.a.createElement("option",{value:"he"},"He/Him"),a.a.createElement("option",{value:"it"},"It")),a.a.createElement(lc,{name:"description",placeholder:"Description"}),a.a.createElement("div",{className:"buttons"},a.a.createElement(I,{stopPropagation:!0,type:"submit",onClick:function(){}},"Create")))))})),fc=function(){var e=Object(ze.a)(qe.a.mark((function e(t){var n,r,a;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction,r=Object(q.a)(Object(q.a)({},n),{},{ownerAliasId:ct(ke.getState())||void 0}),e.next=4,$t(Vt,{transaction:r});case 4:return a=e.sent,e.next=7,ke.dispatch(Pt(a));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pc=a.a.memo((function(e){var t=e.id,n=e.toWalletId,r=e.index,o=Object(Aa.b)(),i=Object(c.d)(lt),l=Object(c.d)(Zr),s=Object(c.d)((function(e){return fn(e,{ids:l})})),u=Object(c.d)((function(e){return hn(e,{id:n})})),d=[],m=function(){var e=Object(ze.a)(qe.a.mark((function e(r){var a,o,c;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.note,o=r.amount,c=r.fromWalletId,fc({transaction:{note:a,amount:o,fromWalletId:c,toWalletId:n}}).then((function(){return ke.dispatch(Cn({id:t}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.forEach((function(e){d.push(a.a.createElement("option",{key:e.objectId,value:e.objectId},e.teamName||e.aliasName||e.username))})),a.a.createElement(Qo,{index:r,title:"Transfer to ".concat(u.teamName||u.aliasName||u.username),onClick:function(){ke.dispatch(Nn({windows:[{id:t,value:{type:ye,toWalletId:n}}]}))},done:function(){return ke.dispatch(Cn({id:t}))}},a.a.createElement(Aa.a,o,a.a.createElement("form",{onSubmit:o.handleSubmit(m)},a.a.createElement("p",null,"You are making a transfer to ".concat(u.teamName||u.aliasName||u.username)),a.a.createElement("div",null,a.a.createElement("span",null,"From your wallet: "),a.a.createElement(cc,{required:!0,defaultValue:i,name:"fromWalletId"},a.a.createElement("option",{value:""},"---Choose wallet---"),a.a.createElement(a.a.Fragment,null,d))),a.a.createElement($o,{required:!0,name:"amount",placeholder:"Amount"}),a.a.createElement($o,{name:"note",placeholder:"Note"}),a.a.createElement("div",{className:"buttons"},a.a.createElement(I,{stopPropagation:!0,type:"submit",onClick:function(){}},"Transfer")))))})),hc=(n(68),function(e,t){var n=t.id;return e.docFiles.get(n)}),vc=rn()([function(e){return e.docFiles}],(function(e){return Object(z.a)(e.values()).map((function(e){return{objectId:e.objectId,title:e.title}}))}))((function(){return"docFile-ids-names"})),gc=(n(69),a.a.memo((function(e){var t=e.docFileId,n=Object(c.d)((function(e){return hc(e,{id:t})}));return a.a.createElement(bn,{stopPropagation:!0,classNames:["DocFileItem"],key:n.objectId,onClick:function(){n.isLocked?console.log("clocked"):ke.dispatch(Nn({windows:[{id:ue,value:{type:ue,docFileId:t}}]}))}},n.title,n.isLocked&&a.a.createElement("div",{className:"lock"},a.a.createElement(Ia,null)))}))),yc=a.a.memo((function(){var e=Object(c.d)(vc);return a.a.createElement(Ve,{dropdown:!0,checkWidth:!0,title:"Documents"},e.sort((function(e,t){var n=e.title.toLowerCase(),r=t.title.toLowerCase();return n>r?1:n<r?-1:0})).map((function(e){var t=e.objectId;return a.a.createElement(gc,{key:t,docFileId:t})})))})),bc=(n(70),a.a.memo((function(e){var t=e.docFileId,n=Object(c.d)((function(e){return hc(e,{id:t})})),r=Object(c.d)((function(e){return hn(e,{id:n.ownerAliasId||n.ownerId})}));return a.a.createElement("div",{className:"DocFileViewer"},a.a.createElement("h1",{className:"title"},n.title),a.a.createElement("div",{className:"info"},a.a.createElement("p",{className:"author"},"Author: ".concat(r.teamName||r.aliasName||r.username)),a.a.createElement("p",{className:"code"},"Code: ".concat(n.code)),a.a.createElement("p",{className:"public"},"Public: ".concat(n.isPublic?"Yes":"No"))),a.a.createElement("div",{className:"text"},n.text.join("\n")))}))),Ec=function(e){var t=e.id,n=e.docFileId,o=e.index,i=Object(r.useState)(),s=Object(l.a)(i,2),u=s[0],d=s[1],m=Object(c.d)((function(e){return hc(e,{id:n})}));Object(r.useEffect)((function(){n&&u!==n&&d(n)}),[n]);var f=Object(r.useCallback)((function(){ke.dispatch(Nn({windows:[{id:t,value:{type:ue}}]}))}),[]),p=Object(r.useCallback)((function(){return ke.dispatch(Cn({id:t}))}),[t]),h=Object(r.useCallback)((function(e){return d(e)}),[]),v=Object(r.useCallback)((function(){return ke.dispatch(Nn({windows:[{id:be,value:{type:be}}]}))}));return a.a.createElement(Yr,{index:o,done:p,classNames:["DocFile"],title:"".concat(m?"Document: ".concat(m.title):"Documents"),onClick:f,menu:a.a.createElement(a.a.Fragment,null,a.a.createElement(zo,null,a.a.createElement(bn,{stopPropagation:!0,onClick:v,key:"createDocFile"},"New document")),a.a.createElement(yc,{onChange:h}))},!u&&a.a.createElement("div",null),u&&a.a.createElement(bc,{key:"viewer",docFileId:u}))},wc=a.a.memo(Ec);Ec.defaultProps={docFileId:void 0};var Oc=function(){var e=Object(ze.a)(qe.a.mark((function e(t){var n,r,a,o;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.docFile,r=t.images,a=Object(q.a)(Object(q.a)({},n),{},{code:""!==n.code?n.code:void 0,ownerAliasId:ct(ke.getState())||void 0,text:n.text.split("\n")}),e.next=4,$t(Ht,{docFile:a,images:r});case 4:return o=e.sent,e.next=7,ke.dispatch(Lt({docFiles:[o.docFile]}));case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jc=(n(71),a.a.memo((function(e){var t=e.id,n=e.index,o=Object(Aa.b)(),c=Object(r.useState)(),i=Object(l.a)(c,2),s=i[0],u=(i[1],function(){var e=Object(ze.a)(qe.a.mark((function e(n){var r,a,o,c;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.title,a=n.text,o=n.code,c=n.isPublic,Oc({images:s?[s]:void 0,docFile:{title:r,text:a,code:o,isPublic:c}}).then((function(){return ke.dispatch(Cn({id:t}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return a.a.createElement(Qo,{index:n,classNames:["CreateDocFileDialog"],title:"New document",onClick:function(){ke.dispatch(Nn({windows:[{id:t,value:{type:be}}]}))},done:function(){return ke.dispatch(Cn({id:t}))}},a.a.createElement(Aa.a,o,a.a.createElement("form",{onSubmit:o.handleSubmit(u)},a.a.createElement("div",{className:"identity"},a.a.createElement("span",null,"You are:"),a.a.createElement(yr,null)),a.a.createElement("div",{className:"public"},a.a.createElement($o,{type:"checkbox",name:"isPublic"}),a.a.createElement("span",null,"Do you want it to be available to the public? (A user with the right code can always access the document)")),a.a.createElement($o,{required:!0,maxLength:40,name:"title",placeholder:"Title"}),a.a.createElement($o,{name:"code",placeholder:"Code"}),a.a.createElement(lc,{required:!0,maxLength:3500,name:"text",placeholder:"Text"}),a.a.createElement("div",{className:"buttons"},a.a.createElement(I,{stopPropagation:!0,type:"submit",onClick:function(){}},"Create")))))})));n(72);function kc(){return(kc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ic(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var xc=a.a.createElement("line",{x1:5,y1:12,x2:19,y2:12}),Nc=a.a.createElement("polyline",{points:"12 5 19 12 12 19"}),Cc=function(e){var t=e.svgRef,n=e.title,r=Ic(e,["svgRef","title"]);return a.a.createElement("svg",kc({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-right",ref:t},r),n?a.a.createElement("title",null,n):null,xc,Nc)},Sc=a.a.forwardRef((function(e,t){return a.a.createElement(Cc,kc({svgRef:t},e))})),Rc=(n.p,a.a.memo((function(e){var t=e.message;return a.a.createElement(bn,{key:t.objectId,onClick:function(){return ke.dispatch(Nn({windows:[{id:de,value:{type:de,messageId:t.objectId}}]}))}},a.a.createElement("p",null,t.text[0],a.a.createElement(Sc,null)))}))),Pc=a.a.memo((function(){var e=Object(c.d)(sn),t=Object(c.d)((function(t){return Xr(t,{id:e.objectId})})),n=Object(c.d)(Ao),r=function(){return n&&0!==n.length?Object(z.a)(n).sort((function(e,t){var n=e.points,r=t.points;return n>r?-1:n<r?1:0})).slice(0,5).map((function(e){return a.a.createElement(Rc,{key:e.objectId,message:e})})):[a.a.createElement(bn,{key:"noNews"},"There are no news.")]};return a.a.createElement("div",{className:"Dashboard"},e.isAnonymous&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Welcome!"),a.a.createElement("p",null,v(ke.getState(),{date:new Date}).fullDate),a.a.createElement(Ve,{alwaysExpanded:!0,title:"Top News",classNames:["news"]},r())),!e.isAnonymous&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Welcome, ".concat(e.username,"!")),a.a.createElement("p",null,"Today's date is ".concat(v(ke.getState(),{date:new Date}).fullDate)),t&&a.a.createElement("p",null,"You have ".concat(t.amount," in your wallet.")),a.a.createElement(Ve,{alwaysExpanded:!0,title:"News",classNames:["news"]},r())))}));function Tc(){return(Tc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Lc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ac=a.a.createElement("polyline",{points:"6 9 12 15 18 9"}),Fc=function(e){var t=e.svgRef,n=e.title,r=Lc(e,["svgRef","title"]);return a.a.createElement("svg",Tc({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-chevron-down",ref:t},r),n?a.a.createElement("title",null,n):null,Ac)},Mc=a.a.forwardRef((function(e,t){return a.a.createElement(Fc,Tc({svgRef:t},e))}));n.p;function Wc(){return(Wc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Bc=a.a.createElement("polyline",{points:"18 15 12 9 6 15"}),Hc=function(e){var t=e.svgRef,n=e.title,r=Dc(e,["svgRef","title"]);return a.a.createElement("svg",Wc({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-chevron-up",ref:t},r),n?a.a.createElement("title",null,n):null,Bc)},Vc=a.a.forwardRef((function(e,t){return a.a.createElement(Hc,Wc({svgRef:t},e))})),Uc=(n.p,n(73),function(e){var t=e.messageId,n=e.expand,o=void 0!==n&&n,i=e.classNames,s=void 0===i?[]:i,u=Object(r.useRef)(),d=Object(r.useState)(!1),m=Object(l.a)(d,2),f=m[0],p=m[1],h=Object(c.d)((function(e){return Po(e,{id:t})})),g=Object(c.d)((function(e){return hn(e,{id:h.teamId||h.ownerAliasId||h.ownerId})}));return Object(r.useEffect)((function(){p(o)}),[o]),Object(r.useLayoutEffect)((function(){f&&u.current&&(u.current.scrollIntoView({behavior:"smooth",block:"nearest"}),setTimeout((function(){return u.current.scrollIntoView({behavior:"smooth",block:"nearest"})}),300))}),[f]),a.a.createElement(bn,{ref:u,elementId:"news-".concat(t),onClick:function(){return p(!f)},classNames:["NewsItem"].concat(s,[f?"expanded":""])},a.a.createElement("div",{className:"title"},a.a.createElement("p",null,h.text[0]),a.a.createElement("p",{className:"info"},a.a.createElement("span",null,"".concat(v(ke.getState(),{date:h.customTimeCreated||h.timeCreated}).halfDate," "),v(ke.getState(),{date:h.customTimeCreated||h.timeCreated}).halfTime),a.a.createElement("span",null," By: ".concat(g.teamName||g.aliasName||g.username)),!f&&a.a.createElement(Mc,null),f&&a.a.createElement(Vc,null))),f&&h.image&&h.image.thumbFileName&&a.a.createElement(za,{image:"/upload/images/".concat(h.image.thumbFileName),fullImage:"/upload/images/".concat(h.image.fileName),altText:"pic",width:h.image.thumbWidth,height:h.image.thumbHeight,fullWidth:h.image.width,fullHeight:h.image.height}),f&&a.a.createElement("div",{className:"text"},h.text.slice(1).map((function(e,t){return a.a.createElement("p",{key:t},e)}))))}),qc=a.a.memo(Uc);Uc.defaultProps={classNames:[],expand:!1};n(74);var zc=function(e){var t=e.messageId,n=Object(r.useRef)(null),o=Object(c.d)(Fo);return a.a.createElement(Ve,{observe:"upper",itemId:t?"news-".concat(t):void 0,ref:n,scrollTo:{buffer:!0,direction:"top",skipFirstRender:"string"===typeof t},classNames:["NewsList"]},0===o.length&&a.a.createElement(bn,{key:"noNews"},a.a.createElement("p",null,"There are no news")),Object(z.a)(o).filter((function(e){return e.points&&e.points>0})).sort((function(e,t){var n=e.points,r=t.points;return n>r?-1:n<r?1:0})).slice(0,3).map((function(e){return a.a.createElement(qc,{key:"top-".concat(e.objectId),messageId:e.objectId,classNames:["topNews"]})})),Object(z.a)(o).map((function(e){return a.a.createElement(qc,{expand:e.objectId===t,key:e.objectId,messageId:e.objectId})})))},Yc=a.a.memo(zc);zc.defaultProps={messageId:void 0};n(75);var Jc=function(e){var t=e.id,n=e.messageId,o=e.index,i=Object(c.d)((function(e){return fa(e,{id:h(e)})})),l=Object(r.useCallback)((function(){ke.dispatch(Nn({windows:[{id:t,value:{type:de,messageId:n}}]}))}),[n]),s=Object(r.useCallback)((function(){return ke.dispatch(Cn({id:t}))}),[t]),u=Object(r.useCallback)((function(){return ke.dispatch(Nn({windows:[{id:Ee,value:{type:Ee}}]}))}),[]);return a.a.createElement(Yr,{index:o,done:s,classNames:["News"],title:"News",onClick:l,menu:a.a.createElement(a.a.Fragment,null,i&&a.a.createElement(zo,null,a.a.createElement(bn,{stopPropagation:!0,key:"createNews",onClick:u},"New article")))},a.a.createElement(Yc,{messageId:n}))},Gc=a.a.memo(Jc);Jc.defaultProps={messageId:void 0};var Kc=a.a.memo((function(e){var t=e.id,n=e.index,o=Object(Aa.b)(),i=Object(r.useState)(),s=Object(l.a)(i,2),u=s[0];s[1];return a.a.createElement(Qo,{index:n,classNames:["CreateNewsDialog"],onClick:function(){ke.dispatch(Nn({windows:[{id:t,value:{type:Ee}}]}))},done:function(){return ke.dispatch(Cn({id:t}))},error:u,title:"New news article"},a.a.createElement(Aa.a,o,a.a.createElement("form",{onSubmit:o.handleSubmit((function(e){var n=e.title,r=e.text,a=e.image;console.log(n,r,a),a&&eo({title:n,text:r,image:a}).then((function(e){var n=e.message;Object(c.b)((function(){ke.dispatch(Nn({windows:[{id:de,value:{type:de,messageId:n.objectId}}]})),ke.dispatch(Cn({id:t}))}))})).catch((function(e){return console.log(e)}))}))},a.a.createElement("div",{className:"identity"},a.a.createElement("span",null,"You are:"),a.a.createElement(yr,null)),a.a.createElement($o,{required:!0,maxLength:150,name:"title",placeholder:"Title"}),a.a.createElement($a,null),a.a.createElement(lc,{required:!0,maxLength:550,name:"text",placeholder:"Text"}),a.a.createElement("div",{className:"buttons"},a.a.createElement(I,{type:"submit",onClick:function(){}},"Create")))))}));function Qc(){return(Qc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Zc=a.a.createElement("rect",{x:3,y:11,width:18,height:11,rx:2,ry:2}),$c=a.a.createElement("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"}),_c=function(e){var t=e.svgRef,n=e.title,r=Xc(e,["svgRef","title"]);return a.a.createElement("svg",Qc({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-unlock",ref:t},r),n?a.a.createElement("title",null,n):null,Zc,$c)},ei=a.a.forwardRef((function(e,t){return a.a.createElement(_c,Qc({svgRef:t},e))})),ti=(n.p,a.a.memo((function(e){var t=e.roomId,n=e.id,o=e.index,i=Object(r.useState)(),s=Object(l.a)(i,2),u=s[0],d=s[1],m=Object(c.d)((function(e){return fa(e,{id:t})})),f=Object(c.d)(sn),p=Object(Aa.b)(),h=oe({objectToAccess:m,toAuth:f}).hasAccess;return a.a.createElement(Qo,{error:u,index:o,classNames:["JoinRoomDialog"],onClick:function(){ke.dispatch(Nn({windows:[{id:n,value:{type:we,roomId:t}}]}))},done:function(){return ke.dispatch(Cn({id:n}))},title:h?"Join room ".concat(m.roomName):"Unlock room ".concat(m.roomName)},a.a.createElement(Aa.a,p,a.a.createElement("form",{onSubmit:p.handleSubmit((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.password;ec({roomId:t,password:r}).then((function(){Object(c.b)((function(){ke.dispatch(Nn({windows:[{id:le,value:{type:le,roomId:t}}]})),ke.dispatch(Cn({id:n}))}))})).catch((function(e){var t=Object(q.a)({},e);console.log(e),"not allowed"===e.type&&(t.message="Incorrect password"),d(t)}))}))},a.a.createElement("div",{className:"identity"},a.a.createElement("span",null,"You are: "),a.a.createElement(yr,null)),a.a.createElement("div",null,h&&a.a.createElement("p",null,"Do you want to join room ".concat(m.roomName,"?")),h&&m.topic&&a.a.createElement("p",null,"Topic: ".concat(m.topic)),!h&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"The room is locked."),a.a.createElement("p",null,"Enter the password to continue:"))),!h&&a.a.createElement($o,{required:!h,minLength:4,maxLength:100,name:"password",type:"password",placeholder:"Password"}),a.a.createElement("div",{className:"buttons"},a.a.createElement(I,{stopPropagation:!0,type:"button",onClick:function(){return ke.dispatch(Cn({id:n}))}},h?"No":"Cancel"),a.a.createElement(I,{stopPropagation:!0,type:"submit",onClick:function(){}},!h&&a.a.createElement(ei,null),a.a.createElement("span",null,h?"Join":"Unlock"))))))}))),ni=a.a.memo((function(){var e=Object(c.d)(Go),t=[];return e.forEach((function(e,n){var r=e.type;r===le?t.push(a.a.createElement(Jo,{key:n,id:n,roomId:e.roomId,index:e.index})):r===ie?t.push(a.a.createElement(aa,{key:n,id:n,index:e.index})):r===se?t.push(a.a.createElement(da,{key:n,id:n,index:e.index})):r===ue?t.push(a.a.createElement(wc,{key:n,id:n,docFileId:e.docFileId,index:e.index})):r===de?t.push(a.a.createElement(Gc,{key:n,id:n,messageId:e.messageId,index:e.index})):r===me?t.push(a.a.createElement(Xo,{key:n,id:n,identityId:e.identityId,index:e.index})):r===fe?t.push(a.a.createElement(nc,{key:n,id:n,index:e.index})):r===ve?t.push(a.a.createElement(ac,{key:n,id:n,index:e.index})):r===he?t.push(a.a.createElement(uc,{key:n,id:n,index:e.index})):r===pe?t.push(a.a.createElement(rc,{key:n,id:n,roomId:e.roomId,index:e.index})):r===ge?t.push(a.a.createElement(mc,{key:n,id:n,index:e.index})):r===ye?t.push(a.a.createElement(pc,{key:n,id:n,toWalletId:e.toWalletId,index:e.index})):r===be?t.push(a.a.createElement(jc,{key:n,id:n,index:e.index})):r===Ee?t.push(a.a.createElement(Kc,{key:n,id:n,index:e.index})):r===we&&t.push(a.a.createElement(ti,{key:n,id:n,roomId:e.roomId,index:e.index}))})),a.a.createElement("div",{id:"MainWindow"},a.a.createElement(Pc,null),t)}));var ri=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(a.a.StrictMode,null,a.a.createElement(wr,null),a.a.createElement(br,null),a.a.createElement(ni,null)))},ai=(n(76),n(77));Object(i.a)(),ai.ElementQueries.listen(),Object(o.render)(a.a.createElement(c.a,{store:ke},a.a.createElement(ri,null)),document.getElementById("root"))}]),[[31,1,2]]]);
//# sourceMappingURL=main.e0f94e37.chunk.js.map